{
  "version": 3,
  "sources": ["../../spark-md5/spark-md5.js", "../../@kitware/vtk.js/Rendering/Core/Camera.js", "../../@kitware/vtk.js/Rendering/Core/Light.js", "../../@kitware/vtk.js/Rendering/Core/Viewport.js", "../../@kitware/vtk.js/Rendering/Core/Renderer.js", "../../@kitware/vtk.js/Rendering/Core/RenderWindow.js", "../../@kitware/vtk.js/Rendering/Core/RenderWindowInteractor/Constants.js", "../../@kitware/vtk.js/Rendering/Core/RenderWindowInteractor.js", "../../@kitware/vtk.js/Rendering/Core/InteractorObserver.js", "../../@kitware/vtk.js/Rendering/Core/InteractorStyle/Constants.js", "../../@kitware/vtk.js/Rendering/Core/InteractorStyle.js", "../../@kitware/vtk.js/Interaction/Style/InteractorStyleTrackballCamera.js", "../../@kitware/vtk.js/Common/Core/URLExtract.js", "../../@kitware/vtk.js/Rendering/OpenGL/Framebuffer.js", "../../@kitware/vtk.js/Rendering/SceneGraph/RenderPass.js", "../../@kitware/vtk.js/Rendering/OpenGL/OrderIndependentTranslucentPass.js", "../../@kitware/vtk.js/Rendering/OpenGL/ForwardPass.js", "../../@kitware/vtk.js/Rendering/Core/HardwareSelector.js", "../../@kitware/vtk.js/Common/DataModel/SelectionNode/Constants.js", "../../@kitware/vtk.js/Common/DataModel/SelectionNode.js", "../../@kitware/vtk.js/Rendering/OpenGL/HardwareSelector.js", "../../@kitware/vtk.js/Rendering/OpenGL/ShaderCache.js", "../../@kitware/vtk.js/Rendering/OpenGL/TextureUnitManager.js", "../../@kitware/vtk.js/Rendering/SceneGraph/RenderWindowViewNode.js", "../../@kitware/vtk.js/Rendering/OpenGL/RenderWindow/ContextProxy.js", "../../@kitware/vtk.js/Rendering/OpenGL/RenderWindow.js", "../../@kitware/vtk.js/Rendering/WebGPU/RenderEncoder.js", "../../@kitware/vtk.js/Rendering/WebGPU/OpaquePass.js", "../../@kitware/vtk.js/Rendering/WebGPU/OrderIndependentTranslucentPass.js", "../../@kitware/vtk.js/Rendering/Core/VolumeMapper/Constants.js", "../../@kitware/vtk.js/Rendering/WebGPU/VolumePassFSQ.js", "../../@kitware/vtk.js/Rendering/WebGPU/VolumePass.js", "../../@kitware/vtk.js/Rendering/WebGPU/ForwardPass.js", "../../@kitware/vtk.js/Rendering/WebGPU/TextureManager.js", "../../@kitware/vtk.js/Rendering/WebGPU/Device.js", "../../@kitware/vtk.js/Rendering/WebGPU/HardwareSelectionPass.js", "../../@kitware/vtk.js/Rendering/WebGPU/HardwareSelector.js", "../../@kitware/vtk.js/Rendering/WebGPU/RenderWindow.js", "../../@kitware/vtk.js/Rendering/Misc/GenericRenderWindow.js"],
  "sourcesContent": ["(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n", "import { mat4, vec4, vec3, quat } from 'gl-matrix';\nimport { m as macro } from '../../macros2.js';\nimport { r as radiansFromDegrees, k as add, J as normalize4D, j as cross } from '../../Common/Core/Math/index.js';\n\nconst {\n  vtkDebugMacro\n} = macro;\n\n/* eslint-disable new-cap */\n\n/*\n * Convenience function to access elements of a gl-matrix.  If it turns\n * out I have rows and columns swapped everywhere, then I'll just change\n * the order of 'row' and 'col' parameters in this function\n */\n// function getMatrixElement(matrix, row, col) {\n//   const idx = (row * 4) + col;\n//   return matrix[idx];\n// }\n\n// ----------------------------------------------------------------------------\n// vtkCamera methods\n// ----------------------------------------------------------------------------\n\nfunction vtkCamera(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkCamera');\n\n  // Set up private variables and methods\n  const origin = new Float64Array(3);\n  const dopbasis = new Float64Array([0.0, 0.0, -1.0]);\n  const upbasis = new Float64Array([0.0, 1.0, 0.0]);\n  const tmpMatrix = mat4.identity(new Float64Array(16));\n  const tmpMatrix2 = mat4.identity(new Float64Array(16));\n  const tmpvec1 = new Float64Array(3);\n  const tmpvec2 = new Float64Array(3);\n  const tmpvec3 = new Float64Array(3);\n  const rotateMatrix = mat4.identity(new Float64Array(16));\n  const trans = mat4.identity(new Float64Array(16));\n  const newPosition = new Float64Array(3);\n  const newFocalPoint = new Float64Array(3);\n\n  // Internal Functions that don't need to be public\n  function computeViewPlaneNormal() {\n    // VPN is -DOP\n    model.viewPlaneNormal[0] = -model.directionOfProjection[0];\n    model.viewPlaneNormal[1] = -model.directionOfProjection[1];\n    model.viewPlaneNormal[2] = -model.directionOfProjection[2];\n  }\n  publicAPI.orthogonalizeViewUp = () => {\n    const vt = publicAPI.getViewMatrix();\n    model.viewUp[0] = vt[4];\n    model.viewUp[1] = vt[5];\n    model.viewUp[2] = vt[6];\n    publicAPI.modified();\n  };\n  publicAPI.setPosition = (x, y, z) => {\n    if (x === model.position[0] && y === model.position[1] && z === model.position[2]) {\n      return;\n    }\n    model.position[0] = x;\n    model.position[1] = y;\n    model.position[2] = z;\n\n    // recompute the focal distance\n    publicAPI.computeDistance();\n    publicAPI.modified();\n  };\n  publicAPI.setFocalPoint = (x, y, z) => {\n    if (x === model.focalPoint[0] && y === model.focalPoint[1] && z === model.focalPoint[2]) {\n      return;\n    }\n    model.focalPoint[0] = x;\n    model.focalPoint[1] = y;\n    model.focalPoint[2] = z;\n\n    // recompute the focal distance\n    publicAPI.computeDistance();\n    publicAPI.modified();\n  };\n  publicAPI.setDistance = d => {\n    if (model.distance === d) {\n      return;\n    }\n    model.distance = d;\n    if (model.distance < 1e-20) {\n      model.distance = 1e-20;\n      vtkDebugMacro('Distance is set to minimum.');\n    }\n\n    // we want to keep the camera pointing in the same direction\n    const vec = model.directionOfProjection;\n\n    // recalculate FocalPoint\n    model.focalPoint[0] = model.position[0] + vec[0] * model.distance;\n    model.focalPoint[1] = model.position[1] + vec[1] * model.distance;\n    model.focalPoint[2] = model.position[2] + vec[2] * model.distance;\n    publicAPI.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  // This method must be called when the focal point or camera position changes\n  publicAPI.computeDistance = () => {\n    const dx = model.focalPoint[0] - model.position[0];\n    const dy = model.focalPoint[1] - model.position[1];\n    const dz = model.focalPoint[2] - model.position[2];\n    model.distance = Math.sqrt(dx * dx + dy * dy + dz * dz);\n    if (model.distance < 1e-20) {\n      model.distance = 1e-20;\n      vtkDebugMacro('Distance is set to minimum.');\n      const vec = model.directionOfProjection;\n\n      // recalculate FocalPoint\n      model.focalPoint[0] = model.position[0] + vec[0] * model.distance;\n      model.focalPoint[1] = model.position[1] + vec[1] * model.distance;\n      model.focalPoint[2] = model.position[2] + vec[2] * model.distance;\n    }\n    model.directionOfProjection[0] = dx / model.distance;\n    model.directionOfProjection[1] = dy / model.distance;\n    model.directionOfProjection[2] = dz / model.distance;\n    computeViewPlaneNormal();\n  };\n\n  //----------------------------------------------------------------------------\n  // Move the position of the camera along the view plane normal. Moving\n  // towards the focal point (e.g., > 1) is a dolly-in, moving away\n  // from the focal point (e.g., < 1) is a dolly-out.\n  publicAPI.dolly = amount => {\n    if (amount <= 0.0) {\n      return;\n    }\n\n    // dolly moves the camera towards the focus\n    const d = model.distance / amount;\n    publicAPI.setPosition(model.focalPoint[0] - d * model.directionOfProjection[0], model.focalPoint[1] - d * model.directionOfProjection[1], model.focalPoint[2] - d * model.directionOfProjection[2]);\n  };\n  publicAPI.roll = angle => {\n    const eye = model.position;\n    const at = model.focalPoint;\n    const up = model.viewUp;\n    const viewUpVec4 = new Float64Array([up[0], up[1], up[2], 0.0]);\n    mat4.identity(rotateMatrix);\n    const viewDir = new Float64Array([at[0] - eye[0], at[1] - eye[1], at[2] - eye[2]]);\n    mat4.rotate(rotateMatrix, rotateMatrix, radiansFromDegrees(angle), viewDir);\n    vec4.transformMat4(viewUpVec4, viewUpVec4, rotateMatrix);\n    model.viewUp[0] = viewUpVec4[0];\n    model.viewUp[1] = viewUpVec4[1];\n    model.viewUp[2] = viewUpVec4[2];\n    publicAPI.modified();\n  };\n  publicAPI.azimuth = angle => {\n    const fp = model.focalPoint;\n    mat4.identity(trans);\n\n    // translate the focal point to the origin,\n    // rotate about view up,\n    // translate back again\n    mat4.translate(trans, trans, fp);\n    mat4.rotate(trans, trans, radiansFromDegrees(angle), model.viewUp);\n    mat4.translate(trans, trans, [-fp[0], -fp[1], -fp[2]]);\n\n    // apply the transform to the position\n    vec3.transformMat4(newPosition, model.position, trans);\n    publicAPI.setPosition(newPosition[0], newPosition[1], newPosition[2]);\n  };\n  publicAPI.yaw = angle => {\n    const position = model.position;\n    mat4.identity(trans);\n\n    // translate the camera to the origin,\n    // rotate about axis,\n    // translate back again\n    mat4.translate(trans, trans, position);\n    mat4.rotate(trans, trans, radiansFromDegrees(angle), model.viewUp);\n    mat4.translate(trans, trans, [-position[0], -position[1], -position[2]]);\n\n    // apply the transform to the position\n    vec3.transformMat4(newFocalPoint, model.focalPoint, trans);\n    publicAPI.setFocalPoint(newFocalPoint[0], newFocalPoint[1], newFocalPoint[2]);\n  };\n  publicAPI.elevation = angle => {\n    const fp = model.focalPoint;\n\n    // get the eye / camera position from the viewMatrix\n    const vt = publicAPI.getViewMatrix();\n    const axis = [-vt[0], -vt[1], -vt[2]];\n    mat4.identity(trans);\n\n    // translate the focal point to the origin,\n    // rotate about view up,\n    // translate back again\n    mat4.translate(trans, trans, fp);\n    mat4.rotate(trans, trans, radiansFromDegrees(angle), axis);\n    mat4.translate(trans, trans, [-fp[0], -fp[1], -fp[2]]);\n\n    // apply the transform to the position\n    vec3.transformMat4(newPosition, model.position, trans);\n    publicAPI.setPosition(newPosition[0], newPosition[1], newPosition[2]);\n  };\n  publicAPI.pitch = angle => {\n    const position = model.position;\n    const vt = publicAPI.getViewMatrix();\n    const axis = [vt[0], vt[1], vt[2]];\n    mat4.identity(trans);\n\n    // translate the camera to the origin,\n    // rotate about axis,\n    // translate back again\n    mat4.translate(trans, trans, position);\n    mat4.rotate(trans, trans, radiansFromDegrees(angle), axis);\n    mat4.translate(trans, trans, [-position[0], -position[1], -position[2]]);\n\n    // apply the transform to the focal point\n    vec3.transformMat4(newFocalPoint, model.focalPoint, trans);\n    publicAPI.setFocalPoint(...newFocalPoint);\n  };\n  publicAPI.zoom = factor => {\n    if (factor <= 0) {\n      return;\n    }\n    if (model.parallelProjection) {\n      model.parallelScale /= factor;\n    } else {\n      model.viewAngle /= factor;\n    }\n    publicAPI.modified();\n  };\n  publicAPI.translate = (x, y, z) => {\n    const offset = [x, y, z];\n    add(model.position, offset, model.position);\n    add(model.focalPoint, offset, model.focalPoint);\n    publicAPI.computeDistance();\n    publicAPI.modified();\n  };\n  publicAPI.applyTransform = transformMat4 => {\n    const vuOld = [...model.viewUp, 1.0];\n    const posNew = [];\n    const fpNew = [];\n    const vuNew = [];\n    vuOld[0] += model.position[0];\n    vuOld[1] += model.position[1];\n    vuOld[2] += model.position[2];\n    vec4.transformMat4(posNew, [...model.position, 1.0], transformMat4);\n    vec4.transformMat4(fpNew, [...model.focalPoint, 1.0], transformMat4);\n    vec4.transformMat4(vuNew, vuOld, transformMat4);\n    vuNew[0] -= posNew[0];\n    vuNew[1] -= posNew[1];\n    vuNew[2] -= posNew[2];\n    publicAPI.setPosition(...posNew.slice(0, 3));\n    publicAPI.setFocalPoint(...fpNew.slice(0, 3));\n    publicAPI.setViewUp(...vuNew.slice(0, 3));\n  };\n  publicAPI.getThickness = () => model.clippingRange[1] - model.clippingRange[0];\n  publicAPI.setThickness = thickness => {\n    let t = thickness;\n    if (t < 1e-20) {\n      t = 1e-20;\n      vtkDebugMacro('Thickness is set to minimum.');\n    }\n    publicAPI.setClippingRange(model.clippingRange[0], model.clippingRange[0] + t);\n  };\n  publicAPI.setThicknessFromFocalPoint = thickness => {\n    let t = thickness;\n    if (t < 1e-20) {\n      t = 1e-20;\n      vtkDebugMacro('Thickness is set to minimum.');\n    }\n    publicAPI.setClippingRange(model.distance - t / 2, model.distance + t / 2);\n  };\n\n  // Unimplemented functions\n  publicAPI.setRoll = angle => {}; // dependency on GetOrientation() and a model.ViewTransform object, see https://github.com/Kitware/VTK/blob/master/Common/Transforms/vtkTransform.cxx and https://vtk.org/doc/nightly/html/classvtkTransform.html\n  publicAPI.getRoll = () => {};\n  publicAPI.setObliqueAngles = (alpha, beta) => {};\n  publicAPI.getOrientation = () => {};\n  publicAPI.getOrientationWXYZ = () => {};\n  publicAPI.getFrustumPlanes = function () {\n    let aspect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1.0;\n    let planes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Float64Array(24);\n    const normals = [\n    // Left\n    [1, 0, 0, 1],\n    // Right\n    [-1, 0, 0, 1],\n    // Bottom\n    [0, 1, 0, 1],\n    // Top\n    [0, -1, 0, 1],\n    // Near\n    [0, 0, 1, 1],\n    // Far\n    [0, 0, -1, 1]];\n\n    // Get the composite projection matrix\n    const matrix = publicAPI.getCompositeProjectionMatrix(aspect, -1, 1);\n\n    // Transform the normals to world coordinates\n    for (let i = 0; i < 6; i++) {\n      vec4.transformMat4(normals[i], normals[i], matrix);\n\n      // Normalize the plane normal\n      normalize4D(normals[i]);\n      planes[4 * i + 0] = normals[i][0];\n      planes[4 * i + 1] = normals[i][1];\n      planes[4 * i + 2] = normals[i][2];\n      planes[4 * i + 3] = normals[i][3];\n    }\n    return planes;\n  };\n  publicAPI.getCameraLightTransformMatrix = matrix => {\n    mat4.copy(matrix, model.cameraLightTransform);\n    return matrix;\n  };\n  publicAPI.computeCameraLightTransform = () => {\n    // not sure if this is the correct transformation, based on the same funciton in VTK\n    mat4.copy(tmpMatrix, publicAPI.getViewMatrix());\n    mat4.invert(tmpMatrix, tmpMatrix);\n    mat4.fromScaling(tmpMatrix2, [model.distance, model.distance, model.distance]);\n    mat4.multiply(tmpMatrix, tmpMatrix, tmpMatrix2);\n    mat4.identity(model.cameraLightTransform);\n    mat4.translate(model.cameraLightTransform, tmpMatrix, [0.0, 0.0, -1.0]);\n  };\n  publicAPI.deepCopy = sourceCamera => {};\n  publicAPI.physicalOrientationToWorldDirection = ori => {\n    // push the x axis through the orientation quat\n    const oriq = quat.fromValues(ori[0], ori[1], ori[2], ori[3]);\n    const coriq = quat.create();\n    const qdir = quat.fromValues(0.0, 0.0, 1.0, 0.0);\n    quat.conjugate(coriq, oriq);\n\n    // rotate the z axis by the quat\n    quat.multiply(qdir, oriq, qdir);\n    quat.multiply(qdir, qdir, coriq);\n\n    // return the z axis in world coords\n    return [qdir[0], qdir[1], qdir[2]];\n  };\n  publicAPI.getPhysicalToWorldMatrix = result => {\n    publicAPI.getWorldToPhysicalMatrix(result);\n    mat4.invert(result, result);\n  };\n  publicAPI.getWorldToPhysicalMatrix = result => {\n    mat4.identity(result);\n\n    // now the physical to vtk world rotation tform\n    const physVRight = [3];\n    cross(model.physicalViewNorth, model.physicalViewUp, physVRight);\n    result[0] = physVRight[0];\n    result[1] = physVRight[1];\n    result[2] = physVRight[2];\n    result[4] = model.physicalViewUp[0];\n    result[5] = model.physicalViewUp[1];\n    result[6] = model.physicalViewUp[2];\n    result[8] = -model.physicalViewNorth[0];\n    result[9] = -model.physicalViewNorth[1];\n    result[10] = -model.physicalViewNorth[2];\n    mat4.transpose(result, result);\n    vec3.set(tmpvec1, 1 / model.physicalScale, 1 / model.physicalScale, 1 / model.physicalScale);\n    mat4.scale(result, result, tmpvec1);\n    mat4.translate(result, result, model.physicalTranslation);\n  };\n  publicAPI.computeViewParametersFromViewMatrix = vmat => {\n    // invert to get view to world\n    mat4.invert(tmpMatrix, vmat);\n\n    // note with glmatrix operations happen in\n    // the reverse order\n    // mat.scale\n    // mat.translate\n    // will result in the translation then the scale\n    // mat.mult(a,b)\n    // results in perform the B transformation then A\n\n    // then extract the params position, orientation\n    // push 0,0,0 through to get a translation\n    vec3.transformMat4(tmpvec1, origin, tmpMatrix);\n    publicAPI.computeDistance();\n    const oldDist = model.distance;\n    publicAPI.setPosition(tmpvec1[0], tmpvec1[1], tmpvec1[2]);\n\n    // push basis vectors to get orientation\n    vec3.transformMat4(tmpvec2, dopbasis, tmpMatrix);\n    vec3.subtract(tmpvec2, tmpvec2, tmpvec1);\n    vec3.normalize(tmpvec2, tmpvec2);\n    publicAPI.setDirectionOfProjection(tmpvec2[0], tmpvec2[1], tmpvec2[2]);\n    vec3.transformMat4(tmpvec3, upbasis, tmpMatrix);\n    vec3.subtract(tmpvec3, tmpvec3, tmpvec1);\n    vec3.normalize(tmpvec3, tmpvec3);\n    publicAPI.setViewUp(tmpvec3[0], tmpvec3[1], tmpvec3[2]);\n    publicAPI.setDistance(oldDist);\n  };\n\n  // the provided matrix should include\n  // translation and orientation only\n  // mat is physical to view\n  publicAPI.computeViewParametersFromPhysicalMatrix = mat => {\n    // get the WorldToPhysicalMatrix\n    publicAPI.getWorldToPhysicalMatrix(tmpMatrix);\n\n    // first convert the physical -> view matrix to be\n    // world -> view\n    mat4.multiply(tmpMatrix, mat, tmpMatrix);\n    publicAPI.computeViewParametersFromViewMatrix(tmpMatrix);\n  };\n  publicAPI.setModelTransformMatrix = mat => {\n    model.modelTransformMatrix = mat;\n  };\n  publicAPI.getModelTransformMatrix = () => model.modelTransformMatrix;\n  publicAPI.setViewMatrix = mat => {\n    model.viewMatrix = mat;\n    if (model.viewMatrix) {\n      mat4.copy(tmpMatrix, model.viewMatrix);\n      publicAPI.computeViewParametersFromViewMatrix(tmpMatrix);\n      mat4.transpose(model.viewMatrix, model.viewMatrix);\n    }\n  };\n  publicAPI.getViewMatrix = () => {\n    if (model.viewMatrix) {\n      if (model.modelTransformMatrix) {\n        mat4.multiply(tmpMatrix, model.viewMatrix, model.modelTransformMatrix);\n        return tmpMatrix;\n      }\n      return model.viewMatrix;\n    }\n    mat4.lookAt(tmpMatrix, model.position,\n    // eye\n    model.focalPoint,\n    // at\n    model.viewUp // up\n    );\n\n    mat4.transpose(tmpMatrix, tmpMatrix);\n    const result = new Float64Array(16);\n    if (model.modelTransformMatrix) {\n      mat4.multiply(result, tmpMatrix, model.modelTransformMatrix);\n    } else {\n      mat4.copy(result, tmpMatrix);\n    }\n    return result;\n  };\n  publicAPI.setProjectionMatrix = mat => {\n    model.projectionMatrix = mat;\n  };\n  publicAPI.getProjectionMatrix = (aspect, nearz, farz) => {\n    const result = new Float64Array(16);\n    mat4.identity(result);\n    if (model.projectionMatrix) {\n      const scale = 1 / model.physicalScale;\n      vec3.set(tmpvec1, scale, scale, scale);\n      mat4.copy(result, model.projectionMatrix);\n      mat4.scale(result, result, tmpvec1);\n      mat4.transpose(result, result);\n      return result;\n    }\n    mat4.identity(tmpMatrix);\n\n    // FIXME: Not sure what to do about adjust z buffer here\n    // adjust Z-buffer range\n    // this->ProjectionTransform->AdjustZBuffer( -1, +1, nearz, farz );\n    const cWidth = model.clippingRange[1] - model.clippingRange[0];\n    const cRange = [model.clippingRange[0] + (nearz + 1) * cWidth / 2.0, model.clippingRange[0] + (farz + 1) * cWidth / 2.0];\n    if (model.parallelProjection) {\n      // set up a rectangular parallelipiped\n      const width = model.parallelScale * aspect;\n      const height = model.parallelScale;\n      const xmin = (model.windowCenter[0] - 1.0) * width;\n      const xmax = (model.windowCenter[0] + 1.0) * width;\n      const ymin = (model.windowCenter[1] - 1.0) * height;\n      const ymax = (model.windowCenter[1] + 1.0) * height;\n      mat4.ortho(tmpMatrix, xmin, xmax, ymin, ymax, cRange[0], cRange[1]);\n      mat4.transpose(tmpMatrix, tmpMatrix);\n    } else if (model.useOffAxisProjection) {\n      throw new Error('Off-Axis projection is not supported at this time');\n    } else {\n      const tmp = Math.tan(radiansFromDegrees(model.viewAngle) / 2.0);\n      let width;\n      let height;\n      if (model.useHorizontalViewAngle === true) {\n        width = model.clippingRange[0] * tmp;\n        height = model.clippingRange[0] * tmp / aspect;\n      } else {\n        width = model.clippingRange[0] * tmp * aspect;\n        height = model.clippingRange[0] * tmp;\n      }\n      const xmin = (model.windowCenter[0] - 1.0) * width;\n      const xmax = (model.windowCenter[0] + 1.0) * width;\n      const ymin = (model.windowCenter[1] - 1.0) * height;\n      const ymax = (model.windowCenter[1] + 1.0) * height;\n      const znear = cRange[0];\n      const zfar = cRange[1];\n      tmpMatrix[0] = 2.0 * znear / (xmax - xmin);\n      tmpMatrix[5] = 2.0 * znear / (ymax - ymin);\n      tmpMatrix[2] = (xmin + xmax) / (xmax - xmin);\n      tmpMatrix[6] = (ymin + ymax) / (ymax - ymin);\n      tmpMatrix[10] = -(znear + zfar) / (zfar - znear);\n      tmpMatrix[14] = -1.0;\n      tmpMatrix[11] = -2.0 * znear * zfar / (zfar - znear);\n      tmpMatrix[15] = 0.0;\n    }\n    mat4.copy(result, tmpMatrix);\n    return result;\n  };\n  publicAPI.getCompositeProjectionMatrix = (aspect, nearz, farz) => {\n    const vMat = publicAPI.getViewMatrix();\n    const pMat = publicAPI.getProjectionMatrix(aspect, nearz, farz);\n    // mats are transposed so the order is A then B\n    // we reuse pMat as it is a copy so we can do what we want with it\n    mat4.multiply(pMat, vMat, pMat);\n    return pMat;\n  };\n  publicAPI.setDirectionOfProjection = (x, y, z) => {\n    if (model.directionOfProjection[0] === x && model.directionOfProjection[1] === y && model.directionOfProjection[2] === z) {\n      return;\n    }\n    model.directionOfProjection[0] = x;\n    model.directionOfProjection[1] = y;\n    model.directionOfProjection[2] = z;\n    const vec = model.directionOfProjection;\n\n    // recalculate FocalPoint\n    model.focalPoint[0] = model.position[0] + vec[0] * model.distance;\n    model.focalPoint[1] = model.position[1] + vec[1] * model.distance;\n    model.focalPoint[2] = model.position[2] + vec[2] * model.distance;\n    computeViewPlaneNormal();\n  };\n\n  // used to handle convert js device orientation angles\n  // when you use this method the camera will adjust to the\n  // device orientation such that the physicalViewUp you set\n  // in world coordinates looks up, and the physicalViewNorth\n  // you set in world coorindates will (maybe) point north\n  //\n  // NOTE WARNING - much of the documentation out there on how\n  // orientation works is seriously wrong. Even worse the Chrome\n  // device orientation simulator is completely wrong and should\n  // never be used. OMG it is so messed up.\n  //\n  // how it seems to work on iOS is that the device orientation\n  // is specified in extrinsic angles with a alpha, beta, gamma\n  // convention with axes of Z, X, Y (the code below substitutes\n  // the physical coordinate system for these axes to get the right\n  // modified coordinate system.\n  publicAPI.setDeviceAngles = (alpha, beta, gamma, screen) => {\n    const physVRight = [3];\n    cross(model.physicalViewNorth, model.physicalViewUp, physVRight);\n\n    // phone to physical coordinates\n    const rotmat = mat4.identity(new Float64Array(16));\n    mat4.rotate(rotmat, rotmat, radiansFromDegrees(alpha), model.physicalViewUp);\n    mat4.rotate(rotmat, rotmat, radiansFromDegrees(beta), physVRight);\n    mat4.rotate(rotmat, rotmat, radiansFromDegrees(gamma), model.physicalViewNorth);\n    mat4.rotate(rotmat, rotmat, radiansFromDegrees(-screen), model.physicalViewUp);\n    const dop = new Float64Array([-model.physicalViewUp[0], -model.physicalViewUp[1], -model.physicalViewUp[2]]);\n    const vup = new Float64Array(model.physicalViewNorth);\n    vec3.transformMat4(dop, dop, rotmat);\n    vec3.transformMat4(vup, vup, rotmat);\n    publicAPI.setDirectionOfProjection(dop[0], dop[1], dop[2]);\n    publicAPI.setViewUp(vup[0], vup[1], vup[2]);\n    publicAPI.modified();\n  };\n  publicAPI.setOrientationWXYZ = (degrees, x, y, z) => {\n    const quatMat = mat4.identity(new Float64Array(16));\n    if (degrees !== 0.0 && (x !== 0.0 || y !== 0.0 || z !== 0.0)) {\n      // convert to radians\n      const angle = radiansFromDegrees(degrees);\n      const q = quat.create();\n      quat.setAxisAngle(q, [x, y, z], angle);\n      mat4.fromQuat(quatMat, q);\n    }\n    const newdop = new Float64Array(3);\n    vec3.transformMat4(newdop, [0.0, 0.0, -1.0], quatMat);\n    const newvup = new Float64Array(3);\n    vec3.transformMat4(newvup, [0.0, 1.0, 0.0], quatMat);\n    publicAPI.setDirectionOfProjection(...newdop);\n    publicAPI.setViewUp(...newvup);\n    publicAPI.modified();\n  };\n  publicAPI.computeClippingRange = bounds => {\n    let vn = null;\n    let position = null;\n    vn = model.viewPlaneNormal;\n    position = model.position;\n    const a = -vn[0];\n    const b = -vn[1];\n    const c = -vn[2];\n    const d = -(a * position[0] + b * position[1] + c * position[2]);\n\n    // Set the max near clipping plane and the min far clipping plane\n    const range = [a * bounds[0] + b * bounds[2] + c * bounds[4] + d, 1e-18];\n\n    // Find the closest / farthest bounding box vertex\n    for (let k = 0; k < 2; k++) {\n      for (let j = 0; j < 2; j++) {\n        for (let i = 0; i < 2; i++) {\n          const dist = a * bounds[i] + b * bounds[2 + j] + c * bounds[4 + k] + d;\n          range[0] = dist < range[0] ? dist : range[0];\n          range[1] = dist > range[1] ? dist : range[1];\n        }\n      }\n    }\n    return range;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  position: [0, 0, 1],\n  focalPoint: [0, 0, 0],\n  viewUp: [0, 1, 0],\n  directionOfProjection: [0, 0, -1],\n  parallelProjection: false,\n  useHorizontalViewAngle: false,\n  viewAngle: 30,\n  parallelScale: 1,\n  clippingRange: [0.01, 1000.01],\n  windowCenter: [0, 0],\n  viewPlaneNormal: [0, 0, 1],\n  useOffAxisProjection: false,\n  screenBottomLeft: [-0.5, -0.5, -0.5],\n  screenBottomRight: [0.5, -0.5, -0.5],\n  screenTopRight: [0.5, 0.5, -0.5],\n  freezeFocalPoint: false,\n  projectionMatrix: null,\n  viewMatrix: null,\n  modelTransformMatrix: null,\n  cameraLightTransform: mat4.create(),\n  // used for world to physical transformations\n  physicalTranslation: [0, 0, 0],\n  physicalScale: 1.0,\n  physicalViewUp: [0, 1, 0],\n  physicalViewNorth: [0, 0, -1]\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['distance']);\n  macro.setGet(publicAPI, model, ['parallelProjection', 'useHorizontalViewAngle', 'viewAngle', 'parallelScale', 'useOffAxisProjection', 'freezeFocalPoint', 'physicalScale']);\n  macro.getArray(publicAPI, model, ['directionOfProjection', 'viewPlaneNormal', 'position', 'focalPoint']);\n  macro.setGetArray(publicAPI, model, ['clippingRange', 'windowCenter'], 2);\n  macro.setGetArray(publicAPI, model, ['viewUp', 'screenBottomLeft', 'screenBottomRight', 'screenTopRight', 'physicalTranslation', 'physicalViewUp', 'physicalViewNorth'], 3);\n\n  // Object methods\n  vtkCamera(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkCamera');\n\n// ----------------------------------------------------------------------------\n\nvar vtkCamera$1 = {\n  newInstance,\n  extend\n};\n\nexport { DEFAULT_VALUES, vtkCamera$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport { l as normalize, r as radiansFromDegrees } from '../../Common/Core/Math/index.js';\nimport { vec3 } from 'gl-matrix';\n\n// ----------------------------------------------------------------------------\n\nconst LIGHT_TYPES = ['HeadLight', 'CameraLight', 'SceneLight'];\n\n// ----------------------------------------------------------------------------\n// vtkLight methods\n// ----------------------------------------------------------------------------\n\nfunction vtkLight(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkLight');\n  const tmpVec = new Float64Array(3);\n  publicAPI.getTransformedPosition = () => {\n    if (model.transformMatrix) {\n      vec3.transformMat4(tmpVec, model.position, model.transformMatrix);\n    } else {\n      vec3.set(tmpVec, model.position[0], model.position[1], model.position[2]);\n    }\n    return tmpVec;\n  };\n  publicAPI.getTransformedFocalPoint = () => {\n    if (model.transformMatrix) {\n      vec3.transformMat4(tmpVec, model.focalPoint, model.transformMatrix);\n    } else {\n      vec3.set(tmpVec, model.focalPoint[0], model.focalPoint[1], model.focalPoint[2]);\n    }\n    return tmpVec;\n  };\n  publicAPI.getDirection = () => {\n    if (model.directionMTime < model.mtime) {\n      vec3.sub(model.direction, model.focalPoint, model.position);\n      normalize(model.direction);\n      model.directionMTime = model.mtime;\n    }\n    return model.direction;\n  };\n\n  // Sets the direction from a vec3 instead of a focal point\n  publicAPI.setDirection = directionVector => {\n    const newFocalPoint = new Float64Array(3);\n    vec3.sub(newFocalPoint, model.position, directionVector);\n    model.focalPoint = newFocalPoint;\n  };\n  publicAPI.setDirectionAngle = (elevation, azimuth) => {\n    const elevationRadians = radiansFromDegrees(elevation);\n    const azimuthRadians = radiansFromDegrees(azimuth);\n    publicAPI.setPosition(Math.cos(elevationRadians) * Math.sin(azimuthRadians), Math.sin(elevationRadians), Math.cos(elevationRadians) * Math.cos(azimuthRadians));\n    publicAPI.setFocalPoint(0, 0, 0);\n    publicAPI.setPositional(0);\n  };\n  publicAPI.setLightTypeToHeadLight = () => {\n    publicAPI.setLightType('HeadLight');\n  };\n  publicAPI.setLightTypeToCameraLight = () => {\n    publicAPI.setLightType('CameraLight');\n  };\n  publicAPI.setLightTypeToSceneLight = () => {\n    publicAPI.setTransformMatrix(null);\n    publicAPI.setLightType('SceneLight');\n  };\n  publicAPI.lightTypeIsHeadLight = () => model.lightType === 'HeadLight';\n  publicAPI.lightTypeIsSceneLight = () => model.lightType === 'SceneLight';\n  publicAPI.lightTypeIsCameraLight = () => model.lightType === 'CameraLight';\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  switch: true,\n  intensity: 1,\n  color: [1, 1, 1],\n  position: [0, 0, 1],\n  focalPoint: [0, 0, 0],\n  positional: false,\n  exponent: 1,\n  coneAngle: 30,\n  coneFalloff: 5,\n  attenuationValues: [1, 0, 0],\n  transformMatrix: null,\n  lightType: 'SceneLight',\n  shadowAttenuation: 1,\n  direction: [0, 0, 0],\n  directionMTime: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['intensity', 'switch', 'positional', 'exponent', 'coneAngle', 'coneFalloff', 'transformMatrix', 'lightType', 'shadowAttenuation', 'attenuationValues']);\n  macro.setGetArray(publicAPI, model, ['color', 'position', 'focalPoint', 'attenuationValues'], 3);\n\n  // Object methods\n  vtkLight(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkLight');\n\n// ----------------------------------------------------------------------------\n\nvar vtkLight$1 = {\n  newInstance,\n  extend,\n  LIGHT_TYPES\n};\n\nexport { LIGHT_TYPES, vtkLight$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\nfunction notImplemented(method) {\n  return () => vtkErrorMacro(`vtkViewport::${method} - NOT IMPLEMENTED`);\n}\n\n// ----------------------------------------------------------------------------\n// vtkViewport methods\n// ----------------------------------------------------------------------------\n\nfunction vtkViewport(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkViewport');\n\n  // Public API methods\n  publicAPI.getViewProps = () => model.props;\n  publicAPI.hasViewProp = prop => model.props.includes(prop);\n  publicAPI.addViewProp = prop => {\n    if (prop && !publicAPI.hasViewProp(prop)) {\n      model.props.push(prop);\n    }\n  };\n  publicAPI.removeViewProp = prop => {\n    const newPropList = model.props.filter(item => item !== prop);\n    if (model.props.length !== newPropList.length) {\n      model.props = newPropList;\n    }\n  };\n  publicAPI.removeAllViewProps = () => {\n    model.props = [];\n  };\n\n  // this method get all the props including any nested props\n  function gatherProps(prop) {\n    let allProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    allProps.push(prop);\n    const children = prop.getNestedProps();\n    if (children && children.length) {\n      for (let i = 0; i < children.length; i++) {\n        gatherProps(children[i], allProps);\n      }\n    }\n    return allProps;\n  }\n  publicAPI.getViewPropsWithNestedProps = () => {\n    let allPropsArray = [];\n    // Repopulate the actor2D list to minimize browsing operations.\n    model.actors2D = [];\n    for (let i = 0; i < model.props.length; i++) {\n      // Handle actor2D instances separately so that they can be overlayed and layered\n      const isActor2D = model.props[i].getActors2D();\n      if (isActor2D && (!Array.isArray(isActor2D) || isActor2D.length > 0)) {\n        model.actors2D = model.actors2D.concat(isActor2D);\n      } else {\n        gatherProps(model.props[i], allPropsArray);\n      }\n    }\n    // Actor2D must be rendered by layer number order\n    model.actors2D.sort((a, b) => a.getLayerNumber() - b.getLayerNumber());\n    // Finally, add the actor2D props at the end of the list\n    // This works because, when traversing the render pass in vtkOpenGLRenderer, the children are\n    // traversed in the order that they are added to the list\n    allPropsArray = allPropsArray.concat(model.actors2D);\n    return allPropsArray;\n  };\n  publicAPI.addActor2D = publicAPI.addViewProp;\n  publicAPI.removeActor2D = prop => {\n    // VTK way: model.actors2D.RemoveItem(prop);\n    publicAPI.removeViewProp(prop);\n  };\n  publicAPI.getActors2D = () => {\n    model.actors2D = [];\n    model.props.forEach(prop => {\n      model.actors2D = model.actors2D.concat(prop.getActors2D());\n    });\n    return model.actors2D;\n  };\n  publicAPI.displayToView = () => vtkErrorMacro('call displayToView on your view instead');\n  publicAPI.viewToDisplay = () => vtkErrorMacro('callviewtodisplay on your view instead');\n  publicAPI.getSize = () => vtkErrorMacro('call getSize on your View instead');\n  publicAPI.normalizedDisplayToProjection = (x, y, z) => {\n    // first to normalized viewport\n    const nvp = publicAPI.normalizedDisplayToNormalizedViewport(x, y, z);\n\n    // then to view\n    return publicAPI.normalizedViewportToProjection(nvp[0], nvp[1], nvp[2]);\n  };\n  publicAPI.normalizedDisplayToNormalizedViewport = (x, y, z) => {\n    const scale = [model.viewport[2] - model.viewport[0], model.viewport[3] - model.viewport[1]];\n    return [(x - model.viewport[0]) / scale[0], (y - model.viewport[1]) / scale[1], z];\n  };\n  publicAPI.normalizedViewportToProjection = (x, y, z) => [x * 2.0 - 1.0, y * 2.0 - 1.0, z * 2.0 - 1.0];\n  publicAPI.projectionToNormalizedDisplay = (x, y, z) => {\n    // first to nvp\n    const nvp = publicAPI.projectionToNormalizedViewport(x, y, z);\n\n    // then to ndp\n    return publicAPI.normalizedViewportToNormalizedDisplay(nvp[0], nvp[1], nvp[2]);\n  };\n  publicAPI.normalizedViewportToNormalizedDisplay = (x, y, z) => {\n    const scale = [model.viewport[2] - model.viewport[0], model.viewport[3] - model.viewport[1]];\n    return [x * scale[0] + model.viewport[0], y * scale[1] + model.viewport[1], z];\n  };\n  publicAPI.projectionToNormalizedViewport = (x, y, z) => [(x + 1.0) * 0.5, (y + 1.0) * 0.5, (z + 1.0) * 0.5];\n  publicAPI.PickPropFrom = notImplemented('PickPropFrom');\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // _vtkWindow: null,\n  background: [0, 0, 0],\n  background2: [0.2, 0.2, 0.2],\n  gradientBackground: false,\n  viewport: [0, 0, 1, 1],\n  aspect: [1, 1],\n  pixelAspect: [1, 1],\n  props: [],\n  actors2D: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.event(publicAPI, model, 'event');\n  macro.setGetArray(publicAPI, model, ['viewport'], 4);\n  macro.setGetArray(publicAPI, model, ['background', 'background2'], 3);\n  vtkViewport(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkViewport');\n\n// ----------------------------------------------------------------------------\n\nvar vtkViewport$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkViewport$1 as default, extend, newInstance };\n", "import { mat4, vec3 } from 'gl-matrix';\nimport { n as newInstance$1, g as get, e as setGet, k as getArray, l as setGetArray, i as moveToProtected, c as macro } from '../../macros2.js';\nimport vtkCamera from './Camera.js';\nimport vtkLight from './Light.js';\nimport { W as areBoundsInitialized, u as uninitializeBounds, r as radiansFromDegrees, d as dot, I as createUninitializedBounds } from '../../Common/Core/Math/index.js';\nimport vtkViewport from './Viewport.js';\nimport vtkBoundingBox from '../../Common/DataModel/BoundingBox.js';\n\nconst {\n  vtkDebugMacro,\n  vtkErrorMacro,\n  vtkWarningMacro\n} = macro;\nfunction notImplemented(method) {\n  return () => vtkErrorMacro(`vtkRenderer::${method} - NOT IMPLEMENTED`);\n}\n\n// ----------------------------------------------------------------------------\n// vtkRenderer methods\n// ----------------------------------------------------------------------------\n\nfunction vtkRenderer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkRenderer');\n\n  // Events\n  const COMPUTE_VISIBLE_PROP_BOUNDS_EVENT = {\n    type: 'ComputeVisiblePropBoundsEvent',\n    renderer: publicAPI\n  };\n  const RESET_CAMERA_CLIPPING_RANGE_EVENT = {\n    type: 'ResetCameraClippingRangeEvent',\n    renderer: publicAPI\n  };\n  const RESET_CAMERA_EVENT = {\n    type: 'ResetCameraEvent',\n    renderer: publicAPI\n  };\n  publicAPI.updateCamera = () => {\n    if (!model.activeCamera) {\n      vtkDebugMacro('No cameras are on, creating one.');\n      // the get method will automagically create a camera\n      // and reset it since one hasn't been specified yet.\n      publicAPI.getActiveCameraAndResetIfCreated();\n    }\n\n    // update the viewing transformation\n    model.activeCamera.render(publicAPI);\n    return true;\n  };\n  publicAPI.updateLightsGeometryToFollowCamera = () => {\n    // only update the light's geometry if this Renderer is tracking\n    // this lights.  That allows one renderer to view the lights that\n    // another renderer is setting up.\n    const camera = publicAPI.getActiveCameraAndResetIfCreated();\n    model.lights.forEach(light => {\n      if (light.lightTypeIsSceneLight()) ; else if (light.lightTypeIsHeadLight()) {\n        // update position and orientation of light to match camera.\n        light.setPositionFrom(camera.getPositionByReference());\n        light.setFocalPointFrom(camera.getFocalPointByReference());\n        light.modified(camera.getMTime());\n      } else if (light.lightTypeIsCameraLight()) {\n        light.setTransformMatrix(camera.getCameraLightTransformMatrix(mat4.create()));\n      } else {\n        vtkErrorMacro('light has unknown light type', light.get());\n      }\n    });\n  };\n  publicAPI.updateLightGeometry = () => {\n    if (model.lightFollowCamera) {\n      // only update the light's geometry if this Renderer is tracking\n      // this lights.  That allows one renderer to view the lights that\n      // another renderer is setting up.\n      return publicAPI.updateLightsGeometryToFollowCamera();\n    }\n    return true;\n  };\n  publicAPI.allocateTime = notImplemented('allocateTime');\n  publicAPI.updateGeometry = notImplemented('updateGeometry');\n  publicAPI.getVTKWindow = () => model._renderWindow;\n  publicAPI.setLayer = layer => {\n    vtkDebugMacro(publicAPI.getClassName(), publicAPI, 'setting Layer to ', layer);\n    if (model.layer !== layer) {\n      model.layer = layer;\n      publicAPI.modified();\n    }\n    publicAPI.setPreserveColorBuffer(!!layer);\n  };\n  publicAPI.setActiveCamera = camera => {\n    if (model.activeCamera === camera) {\n      return false;\n    }\n    model.activeCamera = camera;\n    publicAPI.modified();\n    publicAPI.invokeEvent({\n      type: 'ActiveCameraEvent',\n      camera\n    });\n    return true;\n  };\n  publicAPI.makeCamera = () => {\n    const camera = vtkCamera.newInstance();\n    publicAPI.invokeEvent({\n      type: 'CreateCameraEvent',\n      camera\n    });\n    return camera;\n  };\n\n  // Replace the set/get macro method\n  publicAPI.getActiveCamera = () => {\n    if (!model.activeCamera) {\n      model.activeCamera = publicAPI.makeCamera();\n    }\n    return model.activeCamera;\n  };\n  publicAPI.getActiveCameraAndResetIfCreated = () => {\n    if (!model.activeCamera) {\n      publicAPI.getActiveCamera();\n      publicAPI.resetCamera();\n    }\n    return model.activeCamera;\n  };\n  publicAPI.getActors = () => {\n    model.actors = [];\n    model.props.forEach(prop => {\n      model.actors = model.actors.concat(prop.getActors());\n    });\n    return model.actors;\n  };\n  publicAPI.addActor = publicAPI.addViewProp;\n  publicAPI.removeActor = actor => {\n    model.actors = model.actors.filter(a => a !== actor);\n    publicAPI.removeViewProp(actor);\n    publicAPI.modified();\n  };\n  publicAPI.removeAllActors = () => {\n    const actors = publicAPI.getActors();\n    actors.forEach(actor => {\n      publicAPI.removeViewProp(actor);\n    });\n    model.actors = [];\n    publicAPI.modified();\n  };\n  publicAPI.getVolumes = () => {\n    model.volumes = [];\n    model.props.forEach(prop => {\n      model.volumes = model.volumes.concat(prop.getVolumes());\n    });\n    return model.volumes;\n  };\n  publicAPI.addVolume = publicAPI.addViewProp;\n  publicAPI.removeVolume = volume => {\n    model.volumes = model.volumes.filter(v => v !== volume);\n    publicAPI.removeViewProp(volume);\n    publicAPI.modified();\n  };\n  publicAPI.removeAllVolumes = () => {\n    const volumes = publicAPI.getVolumes();\n    volumes.forEach(volume => {\n      publicAPI.removeViewProp(volume);\n    });\n    model.volumes = [];\n    publicAPI.modified();\n  };\n  publicAPI.hasLight = light => model.lights.includes(light);\n  publicAPI.addLight = light => {\n    if (light && !publicAPI.hasLight(light)) {\n      model.lights.push(light);\n      publicAPI.modified();\n    }\n  };\n  publicAPI.removeLight = light => {\n    model.lights = model.lights.filter(l => l !== light);\n    publicAPI.modified();\n  };\n  publicAPI.removeAllLights = () => {\n    model.lights = [];\n    publicAPI.modified();\n  };\n  publicAPI.setLightCollection = lights => {\n    model.lights = lights;\n    publicAPI.modified();\n  };\n  publicAPI.makeLight = vtkLight.newInstance;\n  publicAPI.createLight = () => {\n    if (!model.automaticLightCreation) {\n      return;\n    }\n    if (model._createdLight) {\n      publicAPI.removeLight(model._createdLight);\n      model._createdLight.delete();\n      model._createdLight = null;\n    }\n    model._createdLight = publicAPI.makeLight();\n    publicAPI.addLight(model._createdLight);\n    model._createdLight.setLightTypeToHeadLight();\n\n    // set these values just to have a good default should LightFollowCamera\n    // be turned off.\n    model._createdLight.setPosition(publicAPI.getActiveCamera().getPosition());\n    model._createdLight.setFocalPoint(publicAPI.getActiveCamera().getFocalPoint());\n  };\n\n  // requires the aspect ratio of the viewport as X/Y\n  publicAPI.normalizedDisplayToWorld = (x, y, z, aspect) => {\n    let vpd = publicAPI.normalizedDisplayToProjection(x, y, z);\n    vpd = publicAPI.projectionToView(vpd[0], vpd[1], vpd[2], aspect);\n    return publicAPI.viewToWorld(vpd[0], vpd[1], vpd[2]);\n  };\n\n  // requires the aspect ratio of the viewport as X/Y\n  publicAPI.worldToNormalizedDisplay = (x, y, z, aspect) => {\n    let vpd = publicAPI.worldToView(x, y, z);\n    vpd = publicAPI.viewToProjection(vpd[0], vpd[1], vpd[2], aspect);\n    return publicAPI.projectionToNormalizedDisplay(vpd[0], vpd[1], vpd[2]);\n  };\n\n  // requires the aspect ratio of the viewport as X/Y\n  publicAPI.viewToWorld = (x, y, z) => {\n    if (model.activeCamera === null) {\n      vtkErrorMacro('ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0');\n      return [0, 0, 0];\n    }\n\n    // get the view matrix from the active camera\n    const matrix = model.activeCamera.getViewMatrix();\n    mat4.invert(matrix, matrix);\n    mat4.transpose(matrix, matrix);\n\n    // Transform point to world coordinates\n    const result = new Float64Array([x, y, z]);\n    vec3.transformMat4(result, result, matrix);\n    return result;\n  };\n  publicAPI.projectionToView = (x, y, z, aspect) => {\n    if (model.activeCamera === null) {\n      vtkErrorMacro('ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0');\n      return [0, 0, 0];\n    }\n\n    // get the projection transformation from the active camera\n    const matrix = model.activeCamera.getProjectionMatrix(aspect, -1.0, 1.0);\n    mat4.invert(matrix, matrix);\n    mat4.transpose(matrix, matrix);\n\n    // Transform point to world coordinates\n    const result = new Float64Array([x, y, z]);\n    vec3.transformMat4(result, result, matrix);\n    return result;\n  };\n\n  // Convert world point coordinates to view coordinates.\n  publicAPI.worldToView = (x, y, z) => {\n    if (model.activeCamera === null) {\n      vtkErrorMacro('WorldToView: no active camera, cannot compute view to world, returning 0,0,0');\n      return [0, 0, 0];\n    }\n\n    // get the view transformation from the active camera\n    const matrix = model.activeCamera.getViewMatrix();\n    mat4.transpose(matrix, matrix);\n    const result = new Float64Array([x, y, z]);\n    vec3.transformMat4(result, result, matrix);\n    return result;\n  };\n\n  // Convert world point coordinates to view coordinates.\n  // requires the aspect ratio of the viewport as X/Y\n  publicAPI.viewToProjection = (x, y, z, aspect) => {\n    if (model.activeCamera === null) {\n      vtkErrorMacro('ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0');\n      return [0, 0, 0];\n    }\n\n    // get the projeciton transformation from the active camera\n    const matrix = model.activeCamera.getProjectionMatrix(aspect, -1.0, 1.0);\n    mat4.transpose(matrix, matrix);\n    const result = new Float64Array([x, y, z]);\n    vec3.transformMat4(result, result, matrix);\n    return result;\n  };\n  publicAPI.computeVisiblePropBounds = () => {\n    model.allBounds[0] = vtkBoundingBox.INIT_BOUNDS[0];\n    model.allBounds[1] = vtkBoundingBox.INIT_BOUNDS[1];\n    model.allBounds[2] = vtkBoundingBox.INIT_BOUNDS[2];\n    model.allBounds[3] = vtkBoundingBox.INIT_BOUNDS[3];\n    model.allBounds[4] = vtkBoundingBox.INIT_BOUNDS[4];\n    model.allBounds[5] = vtkBoundingBox.INIT_BOUNDS[5];\n    let nothingVisible = true;\n    publicAPI.invokeEvent(COMPUTE_VISIBLE_PROP_BOUNDS_EVENT);\n\n    // loop through all props\n    for (let index = 0; index < model.props.length; ++index) {\n      const prop = model.props[index];\n      if (prop.getVisibility() && prop.getUseBounds()) {\n        const bounds = prop.getBounds();\n        if (bounds && areBoundsInitialized(bounds)) {\n          nothingVisible = false;\n          if (bounds[0] < model.allBounds[0]) {\n            model.allBounds[0] = bounds[0];\n          }\n          if (bounds[1] > model.allBounds[1]) {\n            model.allBounds[1] = bounds[1];\n          }\n          if (bounds[2] < model.allBounds[2]) {\n            model.allBounds[2] = bounds[2];\n          }\n          if (bounds[3] > model.allBounds[3]) {\n            model.allBounds[3] = bounds[3];\n          }\n          if (bounds[4] < model.allBounds[4]) {\n            model.allBounds[4] = bounds[4];\n          }\n          if (bounds[5] > model.allBounds[5]) {\n            model.allBounds[5] = bounds[5];\n          }\n        }\n      }\n    }\n    if (nothingVisible) {\n      uninitializeBounds(model.allBounds);\n      vtkDebugMacro(\"Can't compute bounds, no 3D props are visible\");\n    }\n    return model.allBounds;\n  };\n  publicAPI.resetCamera = function () {\n    let bounds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const boundsToUse = bounds || publicAPI.computeVisiblePropBounds();\n    const center = [0, 0, 0];\n    if (!areBoundsInitialized(boundsToUse)) {\n      vtkDebugMacro('Cannot reset camera!');\n      return false;\n    }\n    let vn = null;\n    if (publicAPI.getActiveCamera()) {\n      vn = model.activeCamera.getViewPlaneNormal();\n    } else {\n      vtkErrorMacro('Trying to reset non-existent camera');\n      return false;\n    }\n\n    // Reset the perspective zoom factors, otherwise subsequent zooms will cause\n    // the view angle to become very small and cause bad depth sorting.\n    model.activeCamera.setViewAngle(30.0);\n    center[0] = (boundsToUse[0] + boundsToUse[1]) / 2.0;\n    center[1] = (boundsToUse[2] + boundsToUse[3]) / 2.0;\n    center[2] = (boundsToUse[4] + boundsToUse[5]) / 2.0;\n    let w1 = boundsToUse[1] - boundsToUse[0];\n    let w2 = boundsToUse[3] - boundsToUse[2];\n    let w3 = boundsToUse[5] - boundsToUse[4];\n    w1 *= w1;\n    w2 *= w2;\n    w3 *= w3;\n    let radius = w1 + w2 + w3;\n\n    // If we have just a single point, pick a radius of 1.0\n    radius = radius === 0 ? 1.0 : radius;\n\n    // compute the radius of the enclosing sphere\n    radius = Math.sqrt(radius) * 0.5;\n\n    // default so that the bounding sphere fits within the view fustrum\n\n    // Viewing the scene from the side in 2D:\n    // Draw a circle representing the bounding sphere containing all pixels.\n    // Then, draw a horizontal line going out from the center of the circle.\n    // The camera is somewhere on this line.\n    // Picture the view frustrum, moving through the circle.\n    // Draw a line from the intersection of the view frustrum and the bounding sphere to line the camera is on, ensuring that the line is tangent to the circle.\n    // Draw the radius from the tangent point to the center of the circle.\n    // You will note that this forms a right triangle with sides:\n    // - radius\n    // - the line formed by the intersection of the view frustrum and the bounding sphere\n    // - the target distance for the camera.\n    // We can use trigonometry to solve for that distance.\n\n    const angle = radiansFromDegrees(model.activeCamera.getViewAngle());\n    const parallelScale = radius;\n    const distance = radius / Math.sin(angle * 0.5);\n\n    // check view-up vector against view plane normal\n    const vup = model.activeCamera.getViewUp();\n    if (Math.abs(dot(vup, vn)) > 0.999) {\n      vtkWarningMacro('Resetting view-up since view plane normal is parallel');\n      model.activeCamera.setViewUp(-vup[2], vup[0], vup[1]);\n    }\n\n    // update the camera\n    model.activeCamera.setFocalPoint(center[0], center[1], center[2]);\n    model.activeCamera.setPosition(center[0] + distance * vn[0], center[1] + distance * vn[1], center[2] + distance * vn[2]);\n    publicAPI.resetCameraClippingRange(boundsToUse);\n\n    // setup default parallel scale\n    model.activeCamera.setParallelScale(parallelScale);\n\n    // update reasonable world to physical values\n    model.activeCamera.setPhysicalScale(radius);\n    model.activeCamera.setPhysicalTranslation(-center[0], -center[1], -center[2]);\n\n    // Here to let parallel/distributed compositing intercept\n    // and do the right thing.\n    publicAPI.invokeEvent(RESET_CAMERA_EVENT);\n    return true;\n  };\n  publicAPI.resetCameraClippingRange = function () {\n    let bounds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const boundsToUse = bounds || publicAPI.computeVisiblePropBounds();\n    if (!areBoundsInitialized(boundsToUse)) {\n      vtkDebugMacro('Cannot reset camera clipping range!');\n      return false;\n    }\n\n    // Make sure we have an active camera\n    publicAPI.getActiveCameraAndResetIfCreated();\n    if (!model.activeCamera) {\n      vtkErrorMacro('Trying to reset clipping range of non-existent camera');\n      return false;\n    }\n\n    // Get the exact range for the bounds\n    const range = model.activeCamera.computeClippingRange(boundsToUse);\n\n    // do not let far - near be less than 0.1 of the window height\n    // this is for cases such as 2D images which may have zero range\n    let minGap = 0.0;\n    if (model.activeCamera.getParallelProjection()) {\n      minGap = 0.2 * model.activeCamera.getParallelScale();\n    } else {\n      const angle = radiansFromDegrees(model.activeCamera.getViewAngle());\n      minGap = 0.2 * Math.tan(angle / 2.0) * range[1];\n    }\n    if (range[1] - range[0] < minGap) {\n      minGap = minGap - range[1] + range[0];\n      range[1] += minGap / 2.0;\n      range[0] -= minGap / 2.0;\n    }\n\n    // Do not let the range behind the camera throw off the calculation.\n    if (range[0] < 0.0) {\n      range[0] = 0.0;\n    }\n\n    // Give ourselves a little breathing room\n    range[0] = 0.99 * range[0] - (range[1] - range[0]) * model.clippingRangeExpansion;\n    range[1] = 1.01 * range[1] + (range[1] - range[0]) * model.clippingRangeExpansion;\n\n    // Make sure near is not bigger than far\n    range[0] = range[0] >= range[1] ? 0.01 * range[1] : range[0];\n\n    // Make sure near is at least some fraction of far - this prevents near\n    // from being behind the camera or too close in front. How close is too\n    // close depends on the resolution of the depth buffer\n    if (!model.nearClippingPlaneTolerance) {\n      model.nearClippingPlaneTolerance = 0.01;\n    }\n\n    // make sure the front clipping range is not too far from the far clippnig\n    // range, this is to make sure that the zbuffer resolution is effectively\n    // used\n    if (range[0] < model.nearClippingPlaneTolerance * range[1]) {\n      range[0] = model.nearClippingPlaneTolerance * range[1];\n    }\n    model.activeCamera.setClippingRange(range[0], range[1]);\n\n    // Here to let parallel/distributed compositing intercept\n    // and do the right thing.\n    publicAPI.invokeEvent(RESET_CAMERA_CLIPPING_RANGE_EVENT);\n    return false;\n  };\n  publicAPI.setRenderWindow = renderWindow => {\n    if (renderWindow !== model._renderWindow) {\n      model._vtkWindow = renderWindow;\n      model._renderWindow = renderWindow;\n    }\n  };\n  publicAPI.visibleActorCount = () => model.props.filter(prop => prop.getVisibility()).length;\n  publicAPI.visibleVolumeCount = publicAPI.visibleActorCount;\n  publicAPI.getMTime = () => {\n    let m1 = model.mtime;\n    const m2 = model.activeCamera ? model.activeCamera.getMTime() : 0;\n    if (m2 > m1) {\n      m1 = m2;\n    }\n    const m3 = model._createdLight ? model._createdLight.getMTime() : 0;\n    if (m3 > m1) {\n      m1 = m3;\n    }\n    return m1;\n  };\n  publicAPI.getTransparent = () => !!model.preserveColorBuffer;\n  publicAPI.isActiveCameraCreated = () => !!model.activeCamera;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  pickedProp: null,\n  activeCamera: null,\n  allBounds: [],\n  ambient: [1, 1, 1],\n  allocatedRenderTime: 100,\n  timeFactor: 1,\n  automaticLightCreation: true,\n  twoSidedLighting: true,\n  lastRenderTimeInSeconds: -1,\n  renderWindow: null,\n  lights: [],\n  actors: [],\n  volumes: [],\n  lightFollowCamera: true,\n  numberOfPropsRendered: 0,\n  propArray: null,\n  pathArray: null,\n  layer: 0,\n  preserveColorBuffer: false,\n  preserveDepthBuffer: false,\n  computeVisiblePropBounds: createUninitializedBounds(),\n  interactive: true,\n  nearClippingPlaneTolerance: 0,\n  clippingRangeExpansion: 0.05,\n  erase: true,\n  draw: true,\n  useShadows: false,\n  useDepthPeeling: false,\n  occlusionRatio: 0,\n  maximumNumberOfPeels: 4,\n  selector: null,\n  delegate: null,\n  texturedBackground: false,\n  backgroundTexture: null,\n  environmentTexture: null,\n  environmentTextureDiffuseStrength: 1,\n  environmentTextureSpecularStrength: 1,\n  useEnvironmentTextureAsBackground: false,\n  pass: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkViewport.extend(publicAPI, model, initialValues);\n\n  // make sure background has 4 entries. Default to opaque black\n  if (!model.background) model.background = [0, 0, 0, 1];\n  while (model.background.length < 3) model.background.push(0);\n  if (model.background.length === 3) model.background.push(1);\n\n  // Build VTK API\n  get(publicAPI, model, ['_renderWindow', 'allocatedRenderTime', 'timeFactor', 'lastRenderTimeInSeconds', 'numberOfPropsRendered', 'lastRenderingUsedDepthPeeling', 'selector']);\n  setGet(publicAPI, model, ['twoSidedLighting', 'lightFollowCamera', 'automaticLightCreation', 'erase', 'draw', 'nearClippingPlaneTolerance', 'clippingRangeExpansion', 'backingStore', 'interactive', 'layer', 'preserveColorBuffer', 'preserveDepthBuffer', 'useDepthPeeling', 'occlusionRatio', 'maximumNumberOfPeels', 'delegate', 'backgroundTexture', 'texturedBackground', 'environmentTexture', 'environmentTextureDiffuseStrength', 'environmentTextureSpecularStrength', 'useEnvironmentTextureAsBackground', 'useShadows', 'pass']);\n  getArray(publicAPI, model, ['actors', 'volumes', 'lights']);\n  setGetArray(publicAPI, model, ['background'], 4, 1.0);\n  moveToProtected(publicAPI, model, ['renderWindow']);\n\n  // Object methods\n  vtkRenderer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = newInstance$1(extend, 'vtkRenderer');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderer$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkRenderer$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\nconst DEFAULT_VIEW_API = 'WebGL';\nconst VIEW_CONSTRUCTORS = Object.create(null);\n\n// ----------------------------------------------------------------------------\n// static methods\n// ----------------------------------------------------------------------------\n\nfunction registerViewConstructor(name, constructor) {\n  VIEW_CONSTRUCTORS[name] = constructor;\n}\nfunction listViewAPIs() {\n  return Object.keys(VIEW_CONSTRUCTORS);\n}\nfunction newAPISpecificView(name) {\n  let initialValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return VIEW_CONSTRUCTORS[name] && VIEW_CONSTRUCTORS[name](initialValues);\n}\n\n// ----------------------------------------------------------------------------\n// vtkRenderWindow methods\n// ----------------------------------------------------------------------------\n\nfunction vtkRenderWindow(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkRenderWindow');\n\n  // Add renderer\n  publicAPI.addRenderer = renderer => {\n    if (publicAPI.hasRenderer(renderer)) {\n      return;\n    }\n    renderer.setRenderWindow(publicAPI);\n    model.renderers.push(renderer);\n\n    // for (this->Renderers->InitTraversal(rsit);\n    //      (aren = this->Renderers->GetNextRenderer(rsit)); )\n    //   {\n    //   aren->SetAllocatedRenderTime\n    //     (1.0/(this->DesiredUpdateRate*this->Renderers->GetNumberOfItems()));\n    //   }\n\n    publicAPI.modified();\n  };\n\n  // Remove renderer\n  publicAPI.removeRenderer = renderer => {\n    model.renderers = model.renderers.filter(r => r !== renderer);\n    publicAPI.modified();\n  };\n  publicAPI.hasRenderer = ren => model.renderers.indexOf(ren) !== -1;\n\n  // get an API specific view of this data\n  publicAPI.newAPISpecificView = function (name) {\n    let initialValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return newAPISpecificView(name || model.defaultViewAPI, initialValues);\n  };\n\n  // Add renderer\n  publicAPI.addView = view => {\n    if (publicAPI.hasView(view)) {\n      return;\n    }\n    view.setRenderable(publicAPI);\n    model._views.push(view);\n    publicAPI.modified();\n  };\n\n  // Remove renderer\n  publicAPI.removeView = view => {\n    model._views = model._views.filter(r => r !== view);\n    publicAPI.modified();\n  };\n  publicAPI.hasView = view => model._views.indexOf(view) !== -1;\n\n  // handle any pre render initializations\n  publicAPI.preRender = () => {\n    model.renderers.forEach(ren => {\n      // make sure we have a camera\n      if (!ren.isActiveCameraCreated()) {\n        ren.resetCamera();\n      }\n    });\n  };\n  publicAPI.render = () => {\n    publicAPI.preRender();\n    if (model.interactor) {\n      model.interactor.render();\n    } else {\n      model._views.forEach(view => view.traverseAllPasses());\n    }\n  };\n  publicAPI.getStatistics = () => {\n    const results = {\n      propCount: 0,\n      invisiblePropCount: 0,\n      gpuMemoryMB: 0\n    };\n    model._views.forEach(v => {\n      if (v.getGraphicsMemoryInfo) results.gpuMemoryMB += v.getGraphicsMemoryInfo() / 1e6;\n    });\n    model.renderers.forEach(ren => {\n      const props = ren.getViewProps();\n      const gren = model._views[0].getViewNodeFor(ren);\n      props.forEach(prop => {\n        if (prop.getVisibility()) {\n          results.propCount += 1;\n          const mpr = prop.getMapper && prop.getMapper();\n          if (mpr && mpr.getPrimitiveCount) {\n            const gmpr = gren.getViewNodeFor(mpr);\n            if (gmpr) {\n              if (gmpr.getAllocatedGPUMemoryInBytes) {\n                results.gpuMemoryMB += gmpr.getAllocatedGPUMemoryInBytes() / 1e6;\n              }\n              const pcount = mpr.getPrimitiveCount();\n              Object.keys(pcount).forEach(keyName => {\n                if (!results[keyName]) {\n                  results[keyName] = 0;\n                }\n                results[keyName] += pcount[keyName];\n              });\n            }\n          }\n        } else {\n          results.invisiblePropCount += 1;\n        }\n      });\n    });\n    results.str = Object.keys(results).map(keyName => `${keyName}: ${results[keyName]}`).join('\\n');\n    return results;\n  };\n  publicAPI.captureImages = function () {\n    let format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'image/png';\n    let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    macro.setImmediate(publicAPI.render);\n    return model._views.map(view => view.captureNextImage ? view.captureNextImage(format, opts) : undefined).filter(i => !!i);\n  };\n  publicAPI.addRenderWindow = child => {\n    if (model.childRenderWindows.includes(child)) {\n      return false;\n    }\n    model.childRenderWindows.push(child);\n    publicAPI.modified();\n    return true;\n  };\n  publicAPI.removeRenderWindow = child => {\n    const childIndex = model.childRenderWindows.findIndex(x => x === child);\n    if (childIndex < 0) {\n      return false;\n    }\n    model.childRenderWindows.splice(childIndex, 1);\n    publicAPI.modified();\n    return true;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  defaultViewAPI: DEFAULT_VIEW_API,\n  renderers: [],\n  views: [],\n  interactor: null,\n  neverRendered: true,\n  numberOfLayers: 1,\n  childRenderWindows: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['interactor', 'numberOfLayers', '_views', 'defaultViewAPI']);\n  macro.get(publicAPI, model, ['neverRendered']);\n  macro.getArray(publicAPI, model, ['renderers', 'childRenderWindows']);\n  macro.moveToProtected(publicAPI, model, ['views']);\n  macro.event(publicAPI, model, 'completion');\n\n  // Object methods\n  vtkRenderWindow(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkRenderWindow');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderWindow$1 = {\n  newInstance,\n  extend,\n  registerViewConstructor,\n  listViewAPIs,\n  newAPISpecificView\n};\n\nexport { vtkRenderWindow$1 as default, extend, listViewAPIs, newAPISpecificView, newInstance, registerViewConstructor };\n", "const Device = {\n  Unknown: 0,\n  LeftController: 1,\n  RightController: 2\n};\nconst Input = {\n  Unknown: 0,\n  Trigger: 1,\n  TrackPad: 2,\n  Grip: 3,\n  Thumbstick: 4,\n  A: 5,\n  B: 6,\n  ApplicationMenu: 7 // Not exposed in WebXR API\n};\n\nconst Axis = {\n  Unknown: 0,\n  TouchpadX: 1,\n  TouchpadY: 2,\n  ThumbstickX: 3,\n  ThumbstickY: 4\n};\nconst MouseButton = {\n  LeftButton: 1,\n  MiddleButton: 2,\n  RightButton: 3\n};\nvar Constants = {\n  Device,\n  Input,\n  Axis,\n  MouseButton\n};\n\nexport { Axis, Device, Input, MouseButton, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport { B as degreesFromRadians } from '../../Common/Core/Math/index.js';\nimport Constants from './RenderWindowInteractor/Constants.js';\n\nconst {\n  Device,\n  Input\n} = Constants;\nconst {\n  vtkWarningMacro,\n  vtkErrorMacro,\n  normalizeWheel,\n  vtkOnceErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\nconst EMPTY_MOUSE_EVENT = {\n  ctrlKey: false,\n  altKey: false,\n  shiftKey: false\n};\nconst deviceInputMap = {\n  'xr-standard': [Input.Trigger, Input.Grip, Input.TrackPad, Input.Thumbstick, Input.A, Input.B]\n};\nconst handledEvents = ['StartAnimation', 'Animation', 'EndAnimation', 'PointerEnter', 'PointerLeave', 'MouseEnter', 'MouseLeave', 'StartMouseMove', 'MouseMove', 'EndMouseMove', 'LeftButtonPress', 'LeftButtonRelease', 'MiddleButtonPress', 'MiddleButtonRelease', 'RightButtonPress', 'RightButtonRelease', 'KeyPress', 'KeyDown', 'KeyUp', 'StartMouseWheel', 'MouseWheel', 'EndMouseWheel', 'StartPinch', 'Pinch', 'EndPinch', 'StartPan', 'Pan', 'EndPan', 'StartRotate', 'Rotate', 'EndRotate', 'Button3D', 'Move3D', 'StartPointerLock', 'EndPointerLock', 'StartInteraction', 'Interaction', 'EndInteraction', 'AnimationFrameRateUpdate'];\nfunction preventDefault(event) {\n  if (event.cancelable) {\n    event.preventDefault();\n  }\n}\nfunction pointerCacheToPositions(cache) {\n  const positions = Object.create(null);\n  cache.forEach(_ref => {\n    let {\n      pointerId,\n      position\n    } = _ref;\n    positions[pointerId] = position;\n  });\n  return positions;\n}\n\n// ----------------------------------------------------------------------------\n// vtkRenderWindowInteractor methods\n// ----------------------------------------------------------------------------\n\nfunction vtkRenderWindowInteractor(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkRenderWindowInteractor');\n\n  // Capture \"parentClass\" api for internal use\n  const superClass = {\n    ...publicAPI\n  };\n\n  // Initialize list of requesters\n  const animationRequesters = new Set();\n\n  // map from pointerId to { pointerId: number, position: [x, y] }\n  const pointerCache = new Map();\n\n  // Factor to apply on wheel spin.\n  let wheelCoefficient = 1;\n\n  // Public API methods\n\n  //----------------------------------------------------------------------\n  publicAPI.start = () => {\n    // Let the compositing handle the event loop if it wants to.\n    // if (publicAPI.HasObserver(vtkCommand::StartEvent) && !publicAPI.HandleEventLoop) {\n    //   publicAPI.invokeEvent({ type: 'StartEvent' });\n    //   return;\n    // }\n\n    // As a convenience, initialize if we aren't initialized yet.\n    if (!model.initialized) {\n      publicAPI.initialize();\n      if (!model.initialized) {\n        return;\n      }\n    }\n    // Pass execution to the subclass which will run the event loop,\n    // this will not return until TerminateApp is called.\n    publicAPI.startEventLoop();\n  };\n\n  //----------------------------------------------------------------------\n  publicAPI.setRenderWindow = aren => {\n    vtkErrorMacro('you want to call setView(view) instead of setRenderWindow on a vtk.js interactor');\n  };\n\n  //----------------------------------------------------------------------\n  publicAPI.setInteractorStyle = style => {\n    if (model.interactorStyle !== style) {\n      if (model.interactorStyle != null) {\n        model.interactorStyle.setInteractor(null);\n      }\n      model.interactorStyle = style;\n      if (model.interactorStyle != null) {\n        if (model.interactorStyle.getInteractor() !== publicAPI) {\n          model.interactorStyle.setInteractor(publicAPI);\n        }\n      }\n    }\n  };\n\n  //---------------------------------------------------------------------\n  publicAPI.initialize = () => {\n    model.initialized = true;\n    publicAPI.enable();\n    publicAPI.render();\n  };\n  publicAPI.enable = () => publicAPI.setEnabled(true);\n  publicAPI.disable = () => publicAPI.setEnabled(false);\n  publicAPI.startEventLoop = () => vtkWarningMacro('empty event loop');\n  function updateCurrentRenderer(x, y) {\n    if (!model._forcedRenderer) {\n      model.currentRenderer = publicAPI.findPokedRenderer(x, y);\n    }\n  }\n  publicAPI.getCurrentRenderer = () => {\n    if (model.currentRenderer) {\n      return model.currentRenderer;\n    }\n    updateCurrentRenderer(0, 0);\n    return model.currentRenderer;\n  };\n  function _getScreenEventPositionFor(source) {\n    const canvas = model._view.getCanvas();\n    const bounds = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / bounds.width;\n    const scaleY = canvas.height / bounds.height;\n    const position = {\n      x: scaleX * (source.clientX - bounds.left),\n      y: scaleY * (bounds.height - source.clientY + bounds.top),\n      z: 0,\n      movementX: scaleX * source.movementX,\n      movementY: scaleY * source.movementY\n    };\n\n    // if multitouch, do not update the current renderer\n    if (pointerCache.size <= 1 || !model.currentRenderer) {\n      updateCurrentRenderer(position.x, position.y);\n    }\n    return position;\n  }\n  // Allow user to override it\n  const getScreenEventPositionFor = model._getScreenEventPositionFor || _getScreenEventPositionFor;\n  function getModifierKeysFor(event) {\n    return {\n      controlKey: event.ctrlKey,\n      altKey: event.altKey,\n      shiftKey: event.shiftKey\n    };\n  }\n  function getKeysFor(event) {\n    const modifierKeys = getModifierKeysFor(event);\n    const keys = {\n      key: event.key,\n      keyCode: event.charCode,\n      ...modifierKeys\n    };\n    return keys;\n  }\n  function getDeviceTypeFor(event) {\n    return event.pointerType || '';\n  }\n  const _bindEvents = () => {\n    if (model.container === null) {\n      return;\n    }\n    const {\n      container\n    } = model;\n    container.addEventListener('contextmenu', preventDefault);\n    container.addEventListener('wheel', publicAPI.handleWheel);\n    container.addEventListener('DOMMouseScroll', publicAPI.handleWheel);\n    container.addEventListener('pointerenter', publicAPI.handlePointerEnter);\n    container.addEventListener('pointerleave', publicAPI.handlePointerLeave);\n    container.addEventListener('pointermove', publicAPI.handlePointerMove, {\n      passive: false\n    });\n    container.addEventListener('pointerdown', publicAPI.handlePointerDown, {\n      passive: false\n    });\n    container.addEventListener('pointerup', publicAPI.handlePointerUp);\n    container.addEventListener('pointercancel', publicAPI.handlePointerCancel);\n    container.addEventListener('keypress', publicAPI.handleKeyPress);\n    container.addEventListener('keydown', publicAPI.handleKeyDown);\n    // Observe keyup on document in case the focus changes\n    // between keydown and keyup.\n    document.addEventListener('keyup', publicAPI.handleKeyUp);\n    document.addEventListener('pointerlockchange', publicAPI.handlePointerLockChange);\n    container.tabIndex = 0; // to receive key events\n    // using touchAction is more performant than preventDefault\n    // in a touchstart handler.\n    container.style.touchAction = 'none';\n    container.style.userSelect = 'none';\n    // disables tap highlight for when cursor is pointer\n    container.style.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n  };\n\n  // For backward compatibility.\n  // Necessary for using unbind/bindEvent without calling setContainer.\n  publicAPI.bindEvents = container => {\n    if (container === null) {\n      return;\n    }\n    const res = superClass.setContainer(container);\n    if (res) {\n      _bindEvents();\n    }\n  };\n  const _unbindEvents = () => {\n    // Clear any previous timeouts and state variables that control mouse / touchpad behavior.\n    clearTimeout(model.moveTimeoutID);\n    clearTimeout(model.wheelTimeoutID);\n    model.moveTimeoutID = 0;\n    model.wheelTimeoutID = 0;\n    wheelCoefficient = 1.0;\n    const {\n      container\n    } = model;\n    if (container) {\n      container.removeEventListener('contextmenu', preventDefault);\n      container.removeEventListener('wheel', publicAPI.handleWheel);\n      container.removeEventListener('DOMMouseScroll', publicAPI.handleWheel);\n      container.removeEventListener('pointerenter', publicAPI.handlePointerEnter);\n      container.removeEventListener('pointerleave', publicAPI.handlePointerLeave);\n      container.removeEventListener('pointermove', publicAPI.handlePointerMove, {\n        passive: false\n      });\n      container.removeEventListener('pointerdown', publicAPI.handlePointerDown, {\n        passive: false\n      });\n      container.removeEventListener('pointerup', publicAPI.handlePointerUp);\n      container.removeEventListener('pointercancel', publicAPI.handlePointerCancel);\n      container.removeEventListener('keypress', publicAPI.handleKeyPress);\n      container.removeEventListener('keydown', publicAPI.handleKeyDown);\n    }\n    document.removeEventListener('keyup', publicAPI.handleKeyUp);\n    document.removeEventListener('pointerlockchange', publicAPI.handlePointerLockChange);\n    pointerCache.clear();\n  };\n  publicAPI.unbindEvents = () => {\n    _unbindEvents();\n    superClass.setContainer(null);\n  };\n  publicAPI.handleKeyPress = event => {\n    const data = getKeysFor(event);\n    publicAPI.keyPressEvent(data);\n  };\n  publicAPI.handleKeyDown = event => {\n    const data = getKeysFor(event);\n    publicAPI.keyDownEvent(data);\n  };\n  publicAPI.handleKeyUp = event => {\n    const data = getKeysFor(event);\n    publicAPI.keyUpEvent(data);\n  };\n  publicAPI.handlePointerEnter = event => {\n    const callData = {\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n    publicAPI.pointerEnterEvent(callData);\n    if (callData.deviceType === 'mouse') {\n      publicAPI.mouseEnterEvent(callData);\n    }\n  };\n  publicAPI.handlePointerLeave = event => {\n    const callData = {\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n    publicAPI.pointerLeaveEvent(callData);\n    if (callData.deviceType === 'mouse') {\n      publicAPI.mouseLeaveEvent(callData);\n    }\n  };\n  publicAPI.handlePointerDown = event => {\n    if (event.button > 2 || publicAPI.isPointerLocked()) {\n      // ignore events from extra mouse buttons such as `back` and `forward`\n      return;\n    }\n    if (model.preventDefaultOnPointerDown) {\n      preventDefault(event);\n    }\n    if (event.target.hasPointerCapture(event.pointerId)) {\n      event.target.releasePointerCapture(event.pointerId);\n    }\n    model.container.setPointerCapture(event.pointerId);\n    if (pointerCache.has(event.pointerId)) {\n      vtkWarningMacro('[RenderWindowInteractor] duplicate pointerId detected');\n    }\n    pointerCache.set(event.pointerId, {\n      pointerId: event.pointerId,\n      position: getScreenEventPositionFor(event)\n    });\n    switch (event.pointerType) {\n      case 'pen':\n      case 'touch':\n        publicAPI.handleTouchStart(event);\n        break;\n      case 'mouse':\n      default:\n        publicAPI.handleMouseDown(event);\n        break;\n    }\n  };\n  publicAPI.handlePointerUp = event => {\n    if (pointerCache.has(event.pointerId)) {\n      if (model.preventDefaultOnPointerUp) {\n        preventDefault(event);\n      }\n      pointerCache.delete(event.pointerId);\n      model.container.releasePointerCapture(event.pointerId);\n      switch (event.pointerType) {\n        case 'pen':\n        case 'touch':\n          publicAPI.handleTouchEnd(event);\n          break;\n        case 'mouse':\n        default:\n          publicAPI.handleMouseUp(event);\n          break;\n      }\n    }\n  };\n  publicAPI.handlePointerCancel = event => {\n    if (pointerCache.has(event.pointerId)) {\n      pointerCache.delete(event.pointerId);\n      switch (event.pointerType) {\n        case 'pen':\n        case 'touch':\n          publicAPI.handleTouchEnd(event);\n          break;\n        case 'mouse':\n        default:\n          publicAPI.handleMouseUp(event);\n          break;\n      }\n    }\n  };\n  publicAPI.handlePointerMove = event => {\n    if (pointerCache.has(event.pointerId)) {\n      const pointer = pointerCache.get(event.pointerId);\n      pointer.position = getScreenEventPositionFor(event);\n    }\n    switch (event.pointerType) {\n      case 'pen':\n      case 'touch':\n        publicAPI.handleTouchMove(event);\n        break;\n      case 'mouse':\n      default:\n        publicAPI.handleMouseMove(event);\n        break;\n    }\n  };\n  publicAPI.handleMouseDown = event => {\n    const callData = {\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n    switch (event.button) {\n      case 0:\n        publicAPI.leftButtonPressEvent(callData);\n        break;\n      case 1:\n        publicAPI.middleButtonPressEvent(callData);\n        break;\n      case 2:\n        publicAPI.rightButtonPressEvent(callData);\n        break;\n      default:\n        vtkErrorMacro(`Unknown mouse button pressed: ${event.button}`);\n        break;\n    }\n  };\n\n  //----------------------------------------------------------------------\n  publicAPI.requestPointerLock = () => {\n    if (model.container) {\n      model.container.requestPointerLock();\n    }\n  };\n\n  //----------------------------------------------------------------------\n  publicAPI.exitPointerLock = () => document.exitPointerLock?.();\n\n  //----------------------------------------------------------------------\n  publicAPI.isPointerLocked = () => !!model.container && document.pointerLockElement === model.container;\n\n  //----------------------------------------------------------------------\n  publicAPI.handlePointerLockChange = () => {\n    if (publicAPI.isPointerLocked()) {\n      publicAPI.startPointerLockEvent();\n    } else {\n      publicAPI.endPointerLockEvent();\n    }\n  };\n\n  //----------------------------------------------------------------------\n  function forceRender() {\n    if (model._view && model.enabled && model.enableRender) {\n      model.inRender = true;\n      model._view.traverseAllPasses();\n      model.inRender = false;\n    }\n    // outside the above test so that third-party code can redirect\n    // the render to the appropriate class\n    publicAPI.invokeRenderEvent();\n  }\n  publicAPI.requestAnimation = requestor => {\n    if (requestor === undefined) {\n      vtkErrorMacro(`undefined requester, can not start animating`);\n      return;\n    }\n    if (animationRequesters.has(requestor)) {\n      vtkWarningMacro(`requester is already registered for animating`);\n      return;\n    }\n    animationRequesters.add(requestor);\n    if (!model.animationRequest && animationRequesters.size === 1 && !model.xrAnimation) {\n      model._animationStartTime = Date.now();\n      model._animationFrameCount = 0;\n      model.animationRequest = requestAnimationFrame(publicAPI.handleAnimation);\n      publicAPI.startAnimationEvent();\n    }\n  };\n\n  // continue animating for at least the specified duration of\n  // milliseconds.\n  publicAPI.extendAnimation = duration => {\n    const newEnd = Date.now() + duration;\n    model._animationExtendedEnd = Math.max(model._animationExtendedEnd, newEnd);\n    if (!model.animationRequest && animationRequesters.size === 0 && !model.xrAnimation) {\n      model._animationStartTime = Date.now();\n      model._animationFrameCount = 0;\n      model.animationRequest = requestAnimationFrame(publicAPI.handleAnimation);\n      publicAPI.startAnimationEvent();\n    }\n  };\n  publicAPI.isAnimating = () => model.xrAnimation || model.animationRequest !== null;\n  publicAPI.cancelAnimation = function (requestor) {\n    let skipWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!animationRequesters.has(requestor)) {\n      if (!skipWarning) {\n        const requestStr = requestor && requestor.getClassName ? requestor.getClassName() : requestor;\n        vtkWarningMacro(`${requestStr} did not request an animation`);\n      }\n      return;\n    }\n    animationRequesters.delete(requestor);\n    if (model.animationRequest && animationRequesters.size === 0 && Date.now() > model._animationExtendedEnd) {\n      cancelAnimationFrame(model.animationRequest);\n      model.animationRequest = null;\n      publicAPI.endAnimationEvent();\n      publicAPI.render();\n    }\n  };\n  publicAPI.switchToXRAnimation = () => {\n    // cancel existing animation if any\n    if (model.animationRequest) {\n      cancelAnimationFrame(model.animationRequest);\n      model.animationRequest = null;\n    }\n    model.xrAnimation = true;\n  };\n  publicAPI.returnFromXRAnimation = () => {\n    model.xrAnimation = false;\n    if (animationRequesters.size !== 0) {\n      model.recentAnimationFrameRate = 10.0;\n      model.animationRequest = requestAnimationFrame(publicAPI.handleAnimation);\n    }\n  };\n  publicAPI.updateXRGamepads = (xrSession, xrFrame, xrRefSpace) => {\n    // watch for when buttons change state and fire events\n    xrSession.inputSources.forEach(inputSource => {\n      const gripPose = inputSource.gripSpace == null ? null : xrFrame.getPose(inputSource.gripSpace, xrRefSpace);\n      const targetRayPose = inputSource.gripSpace == null ? null : xrFrame.getPose(inputSource.targetRaySpace, xrRefSpace);\n      const gamepad = inputSource.gamepad;\n      const hand = inputSource.handedness;\n      if (!gamepad) {\n        return;\n      }\n      if (!(gamepad.index in model.lastGamepadValues)) {\n        model.lastGamepadValues[gamepad.index] = {\n          left: {\n            buttons: {}\n          },\n          right: {\n            buttons: {}\n          },\n          none: {\n            buttons: {}\n          }\n        };\n      }\n      for (let buttonIdx = 0; buttonIdx < gamepad.buttons.length; ++buttonIdx) {\n        if (!(buttonIdx in model.lastGamepadValues[gamepad.index][hand].buttons)) {\n          model.lastGamepadValues[gamepad.index][hand].buttons[buttonIdx] = false;\n        }\n        if (model.lastGamepadValues[gamepad.index][hand].buttons[buttonIdx] !== gamepad.buttons[buttonIdx].pressed && gripPose != null) {\n          publicAPI.button3DEvent({\n            gamepad,\n            position: gripPose.transform.position,\n            orientation: gripPose.transform.orientation,\n            targetPosition: targetRayPose.transform.position,\n            targetOrientation: targetRayPose.transform.orientation,\n            pressed: gamepad.buttons[buttonIdx].pressed,\n            device: inputSource.handedness === 'left' ? Device.LeftController : Device.RightController,\n            input: deviceInputMap[gamepad.mapping] && deviceInputMap[gamepad.mapping][buttonIdx] ? deviceInputMap[gamepad.mapping][buttonIdx] : Input.Trigger\n          });\n          model.lastGamepadValues[gamepad.index][hand].buttons[buttonIdx] = gamepad.buttons[buttonIdx].pressed;\n        }\n        if (model.lastGamepadValues[gamepad.index][hand].buttons[buttonIdx] && gripPose != null) {\n          publicAPI.move3DEvent({\n            gamepad,\n            position: gripPose.transform.position,\n            orientation: gripPose.transform.orientation,\n            targetPosition: targetRayPose.transform.position,\n            targetOrientation: targetRayPose.transform.orientation,\n            device: inputSource.handedness === 'left' ? Device.LeftController : Device.RightController\n          });\n        }\n      }\n    });\n  };\n  publicAPI.handleMouseMove = event => {\n    const callData = {\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n    if (model.moveTimeoutID === 0) {\n      publicAPI.startMouseMoveEvent(callData);\n    } else {\n      publicAPI.mouseMoveEvent(callData);\n      clearTimeout(model.moveTimeoutID);\n    }\n\n    // start a timer to keep us animating while we get mouse move events\n    model.moveTimeoutID = setTimeout(() => {\n      publicAPI.endMouseMoveEvent();\n      model.moveTimeoutID = 0;\n    }, 200);\n  };\n  publicAPI.handleAnimation = () => {\n    const currTime = Date.now();\n    model._animationFrameCount++;\n    if (currTime - model._animationStartTime > 1000.0 && model._animationFrameCount > 1) {\n      model.recentAnimationFrameRate = 1000.0 * (model._animationFrameCount - 1) / (currTime - model._animationStartTime);\n      model.lastFrameTime = 1.0 / model.recentAnimationFrameRate;\n      publicAPI.animationFrameRateUpdateEvent();\n      model._animationStartTime = currTime;\n      model._animationFrameCount = 1;\n    }\n    publicAPI.animationEvent();\n    forceRender();\n    if (animationRequesters.size > 0 || Date.now() < model._animationExtendedEnd) {\n      model.animationRequest = requestAnimationFrame(publicAPI.handleAnimation);\n    } else {\n      cancelAnimationFrame(model.animationRequest);\n      model.animationRequest = null;\n      publicAPI.endAnimationEvent();\n      publicAPI.render();\n    }\n  };\n  publicAPI.handleWheel = event => {\n    preventDefault(event);\n\n    /**\n     * wheel event values can vary significantly across browsers, platforms\n     * and devices [1]. `normalizeWheel` uses facebook's solution from their\n     * fixed-data-table repository [2].\n     *\n     * [1] https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel\n     * [2] https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n     *\n     * This code will return an object with properties:\n     *\n     *   spinX   -- normalized spin speed (use for zoom) - x plane\n     *   spinY   -- \" - y plane\n     *   pixelX  -- normalized distance (to pixels) - x plane\n     *   pixelY  -- \" - y plane\n     *\n     */\n    const callData = {\n      ...normalizeWheel(event),\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n\n    // Wheel events are thought to scroll pages (i.e. multiple lines at once).\n    // See normalizeWheel() documentation for more context.\n    // While trackpad wheel events are many small (<1) wheel spins,\n    // mouse wheel events have absolute spin values higher than 1.\n    // Here the first spin value is \"recorded\", and used to normalize\n    // all the following mouse wheel events.\n    if (model.wheelTimeoutID === 0) {\n      // we attempt to distinguish between trackpads and mice\n      // .3 will be larger than the first trackpad event,\n      // but small enough to detect some common edge case mice\n      if (Math.abs(callData.spinY) >= 0.3) {\n        // Event is coming from mouse wheel\n        wheelCoefficient = Math.abs(callData.spinY);\n      } else {\n        // Event is coming from trackpad\n        wheelCoefficient = 1;\n      }\n    }\n    callData.spinY /= wheelCoefficient;\n    if (model.wheelTimeoutID === 0) {\n      publicAPI.startMouseWheelEvent(callData);\n      publicAPI.mouseWheelEvent(callData);\n    } else {\n      publicAPI.mouseWheelEvent(callData);\n      clearTimeout(model.wheelTimeoutID);\n    }\n    if (model.mouseScrollDebounceByPass) {\n      publicAPI.extendAnimation(600);\n      publicAPI.endMouseWheelEvent();\n      model.wheelTimeoutID = 0;\n    } else {\n      // start a timer to keep us animating while we get wheel events\n      model.wheelTimeoutID = setTimeout(() => {\n        publicAPI.extendAnimation(600);\n        publicAPI.endMouseWheelEvent();\n        model.wheelTimeoutID = 0;\n      }, 200);\n    }\n  };\n  publicAPI.handleMouseUp = event => {\n    const callData = {\n      ...getModifierKeysFor(event),\n      position: getScreenEventPositionFor(event),\n      deviceType: getDeviceTypeFor(event)\n    };\n    switch (event.button) {\n      case 0:\n        publicAPI.leftButtonReleaseEvent(callData);\n        break;\n      case 1:\n        publicAPI.middleButtonReleaseEvent(callData);\n        break;\n      case 2:\n        publicAPI.rightButtonReleaseEvent(callData);\n        break;\n      default:\n        vtkErrorMacro(`Unknown mouse button released: ${event.button}`);\n        break;\n    }\n  };\n  publicAPI.handleTouchStart = event => {\n    const pointers = [...pointerCache.values()];\n    // If multitouch\n    if (model.recognizeGestures && pointers.length > 1) {\n      const positions = pointerCacheToPositions(pointerCache);\n      // did we just transition to multitouch?\n      if (pointers.length === 2) {\n        const callData = {\n          ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n          position: pointers[0].position,\n          deviceType: getDeviceTypeFor(event)\n        };\n        publicAPI.leftButtonReleaseEvent(callData);\n      }\n      // handle the gesture\n      publicAPI.recognizeGesture('TouchStart', positions);\n    } else if (pointers.length === 1) {\n      const callData = {\n        ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n        position: getScreenEventPositionFor(event),\n        deviceType: getDeviceTypeFor(event)\n      };\n      publicAPI.leftButtonPressEvent(callData);\n    }\n  };\n  publicAPI.handleTouchMove = event => {\n    const pointers = [...pointerCache.values()];\n    if (model.recognizeGestures && pointers.length > 1) {\n      const positions = pointerCacheToPositions(pointerCache);\n      publicAPI.recognizeGesture('TouchMove', positions);\n    } else if (pointers.length === 1) {\n      const callData = {\n        ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n        position: pointers[0].position,\n        deviceType: getDeviceTypeFor(event)\n      };\n      publicAPI.mouseMoveEvent(callData);\n    }\n  };\n  publicAPI.handleTouchEnd = event => {\n    const pointers = [...pointerCache.values()];\n    if (model.recognizeGestures) {\n      // No more fingers down\n      if (pointers.length === 0) {\n        const callData = {\n          ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n          position: getScreenEventPositionFor(event),\n          deviceType: getDeviceTypeFor(event)\n        };\n        publicAPI.leftButtonReleaseEvent(callData);\n      } else if (pointers.length === 1) {\n        // If one finger left, end touch and start button press\n        const positions = pointerCacheToPositions(pointerCache);\n        publicAPI.recognizeGesture('TouchEnd', positions);\n        const callData = {\n          ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n          position: pointers[0].position,\n          deviceType: getDeviceTypeFor(event)\n        };\n        publicAPI.leftButtonPressEvent(callData);\n      } else {\n        // If more than one finger left, keep touch move\n        const positions = pointerCacheToPositions(pointerCache);\n        publicAPI.recognizeGesture('TouchMove', positions);\n      }\n    } else if (pointers.length === 1) {\n      const callData = {\n        ...getModifierKeysFor(EMPTY_MOUSE_EVENT),\n        position: pointers[0].position,\n        deviceType: getDeviceTypeFor(event)\n      };\n      publicAPI.leftButtonReleaseEvent(callData);\n    }\n  };\n  publicAPI.setView = val => {\n    if (model._view === val) {\n      return;\n    }\n    model._view = val;\n    model._view.getRenderable().setInteractor(publicAPI);\n    publicAPI.modified();\n  };\n  publicAPI.getFirstRenderer = () => model._view?.getRenderable()?.getRenderersByReference()?.[0];\n  publicAPI.findPokedRenderer = function () {\n    let x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (!model._view) {\n      return null;\n    }\n    // The original order of renderers needs to remain as\n    // the first one is the one we want to manipulate the camera on.\n    const rc = model._view?.getRenderable()?.getRenderers();\n    if (!rc || rc.length === 0) {\n      return null;\n    }\n    rc.sort((a, b) => a.getLayer() - b.getLayer());\n    let interactiveren = null;\n    let viewportren = null;\n    let currentRenderer = null;\n    let count = rc.length;\n    while (count--) {\n      const aren = rc[count];\n      if (model._view.isInViewport(x, y, aren) && aren.getInteractive()) {\n        currentRenderer = aren;\n        break;\n      }\n      if (interactiveren === null && aren.getInteractive()) {\n        // Save this renderer in case we can't find one in the viewport that\n        // is interactive.\n        interactiveren = aren;\n      }\n      if (viewportren === null && model._view.isInViewport(x, y, aren)) {\n        // Save this renderer in case we can't find one in the viewport that\n        // is interactive.\n        viewportren = aren;\n      }\n    }\n\n    // We must have a value.  If we found an interactive renderer before, that's\n    // better than a non-interactive renderer.\n    if (currentRenderer === null) {\n      currentRenderer = interactiveren;\n    }\n\n    // We must have a value.  If we found a renderer that is in the viewport,\n    // that is better than any old viewport (but not as good as an interactive\n    // one).\n    if (currentRenderer === null) {\n      currentRenderer = viewportren;\n    }\n\n    // We must have a value - take anything.\n    if (currentRenderer == null) {\n      currentRenderer = rc[0];\n    }\n    return currentRenderer;\n  };\n\n  // only render if we are not animating. If we are animating\n  // then renders will happen naturally anyhow and we definitely\n  // do not want extra renders as the make the apparent interaction\n  // rate slower.\n  publicAPI.render = () => {\n    if (!publicAPI.isAnimating() && !model.inRender) {\n      forceRender();\n    }\n  };\n\n  // create the generic Event methods\n  handledEvents.forEach(eventName => {\n    const lowerFirst = eventName.charAt(0).toLowerCase() + eventName.slice(1);\n    publicAPI[`${lowerFirst}Event`] = arg => {\n      // Check that interactor enabled\n      if (!model.enabled) {\n        return;\n      }\n\n      // Check that a poked renderer exists\n      const renderer = publicAPI.getCurrentRenderer();\n      if (!renderer) {\n        vtkOnceErrorMacro(`\n          Can not forward events without a current renderer on the interactor.\n        `);\n        return;\n      }\n\n      // Pass the eventName and the poked renderer\n      const callData = {\n        type: eventName,\n        pokedRenderer: model.currentRenderer,\n        firstRenderer: publicAPI.getFirstRenderer(),\n        // Add the arguments to the call data\n        ...arg\n      };\n\n      // Call invoke\n      publicAPI[`invoke${eventName}`](callData);\n    };\n  });\n\n  // we know we are in multitouch now, so start recognizing\n  publicAPI.recognizeGesture = (event, positions) => {\n    // more than two pointers we ignore\n    if (Object.keys(positions).length > 2) {\n      return;\n    }\n    if (!model.startingEventPositions) {\n      model.startingEventPositions = {};\n    }\n\n    // store the initial positions\n    if (event === 'TouchStart') {\n      Object.keys(positions).forEach(key => {\n        model.startingEventPositions[key] = positions[key];\n      });\n      // we do not know what the gesture is yet\n      model.currentGesture = 'Start';\n      return;\n    }\n\n    // end the gesture if needed\n    if (event === 'TouchEnd') {\n      if (model.currentGesture === 'Pinch') {\n        publicAPI.render();\n        publicAPI.endPinchEvent();\n      }\n      if (model.currentGesture === 'Rotate') {\n        publicAPI.render();\n        publicAPI.endRotateEvent();\n      }\n      if (model.currentGesture === 'Pan') {\n        publicAPI.render();\n        publicAPI.endPanEvent();\n      }\n      model.currentGesture = 'Start';\n      model.startingEventPositions = {};\n      return;\n    }\n\n    // what are the two pointers we are working with\n    let count = 0;\n    const posVals = [];\n    const startVals = [];\n    Object.keys(positions).forEach(key => {\n      posVals[count] = positions[key];\n      startVals[count] = model.startingEventPositions[key];\n      count++;\n    });\n\n    // The meat of the algorithm\n    // on move events we analyze them to determine what type\n    // of movement it is and then deal with it.\n    // calculate the distances\n    const originalDistance = Math.sqrt((startVals[0].x - startVals[1].x) * (startVals[0].x - startVals[1].x) + (startVals[0].y - startVals[1].y) * (startVals[0].y - startVals[1].y));\n    const newDistance = Math.sqrt((posVals[0].x - posVals[1].x) * (posVals[0].x - posVals[1].x) + (posVals[0].y - posVals[1].y) * (posVals[0].y - posVals[1].y));\n\n    // calculate rotations\n    let originalAngle = degreesFromRadians(Math.atan2(startVals[1].y - startVals[0].y, startVals[1].x - startVals[0].x));\n    let newAngle = degreesFromRadians(Math.atan2(posVals[1].y - posVals[0].y, posVals[1].x - posVals[0].x));\n\n    // angles are cyclic so watch for that, 1 and 359 are only 2 apart :)\n    let angleDeviation = newAngle - originalAngle;\n    newAngle = newAngle + 180.0 >= 360.0 ? newAngle - 180.0 : newAngle + 180.0;\n    originalAngle = originalAngle + 180.0 >= 360.0 ? originalAngle - 180.0 : originalAngle + 180.0;\n    if (Math.abs(newAngle - originalAngle) < Math.abs(angleDeviation)) {\n      angleDeviation = newAngle - originalAngle;\n    }\n\n    // calculate the translations\n    const trans = [];\n    trans[0] = (posVals[0].x - startVals[0].x + posVals[1].x - startVals[1].x) / 2.0;\n    trans[1] = (posVals[0].y - startVals[0].y + posVals[1].y - startVals[1].y) / 2.0;\n    if (event === 'TouchMove') {\n      // OK we want to\n      // - immediately respond to the user\n      // - allow the user to zoom without panning (saves focal point)\n      // - allow the user to rotate without panning (saves focal point)\n\n      // do we know what gesture we are doing yet? If not\n      // see if we can figure it out\n      if (model.currentGesture === 'Start') {\n        // pinch is a move to/from the center point\n        // rotate is a move along the circumference\n        // pan is a move of the center point\n        // compute the distance along each of these axes in pixels\n        // the first to break thresh wins\n        let thresh = 0.01 * Math.sqrt(model.container.clientWidth * model.container.clientWidth + model.container.clientHeight * model.container.clientHeight);\n        if (thresh < 15.0) {\n          thresh = 15.0;\n        }\n        const pinchDistance = Math.abs(newDistance - originalDistance);\n        const rotateDistance = newDistance * 3.1415926 * Math.abs(angleDeviation) / 360.0;\n        const panDistance = Math.sqrt(trans[0] * trans[0] + trans[1] * trans[1]);\n        if (pinchDistance > thresh && pinchDistance > rotateDistance && pinchDistance > panDistance) {\n          model.currentGesture = 'Pinch';\n          const callData = {\n            scale: 1.0,\n            touches: positions\n          };\n          publicAPI.startPinchEvent(callData);\n        } else if (rotateDistance > thresh && rotateDistance > panDistance) {\n          model.currentGesture = 'Rotate';\n          const callData = {\n            rotation: 0.0,\n            touches: positions\n          };\n          publicAPI.startRotateEvent(callData);\n        } else if (panDistance > thresh) {\n          model.currentGesture = 'Pan';\n          const callData = {\n            translation: [0, 0],\n            touches: positions\n          };\n          publicAPI.startPanEvent(callData);\n        }\n      } else {\n        // if we have found a specific type of movement then\n        // handle it\n        if (model.currentGesture === 'Rotate') {\n          const callData = {\n            rotation: angleDeviation,\n            touches: positions\n          };\n          publicAPI.rotateEvent(callData);\n        }\n        if (model.currentGesture === 'Pinch') {\n          const callData = {\n            scale: newDistance / originalDistance,\n            touches: positions\n          };\n          publicAPI.pinchEvent(callData);\n        }\n        if (model.currentGesture === 'Pan') {\n          const callData = {\n            translation: trans,\n            touches: positions\n          };\n          publicAPI.panEvent(callData);\n        }\n      }\n    }\n  };\n  publicAPI.handleVisibilityChange = () => {\n    model._animationStartTime = Date.now();\n    model._animationFrameCount = 0;\n  };\n  publicAPI.setCurrentRenderer = r => {\n    model._forcedRenderer = !!r;\n    model.currentRenderer = r;\n  };\n  publicAPI.setContainer = container => {\n    _unbindEvents();\n    const res = superClass.setContainer(container ?? null);\n    if (res) {\n      _bindEvents();\n    }\n    return res;\n  };\n\n  // Stop animating if the renderWindowInteractor is deleted.\n  publicAPI.delete = () => {\n    while (animationRequesters.size) {\n      publicAPI.cancelAnimation(animationRequesters.values().next().value);\n    }\n    if (typeof document.hidden !== 'undefined') {\n      document.removeEventListener('visibilitychange', publicAPI.handleVisibilityChange);\n    }\n    if (model.container) {\n      publicAPI.setContainer(null);\n    }\n    superClass.delete();\n  };\n\n  // Use the Page Visibility API to detect when we switch away from or back to\n  // this tab, and reset the animationFrameStart. When tabs are not active, browsers\n  // will stop calling requestAnimationFrame callbacks.\n  if (typeof document.hidden !== 'undefined') {\n    document.addEventListener('visibilitychange', publicAPI.handleVisibilityChange, false);\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  renderWindow: null,\n  interactorStyle: null,\n  picker: null,\n  pickingManager: null,\n  initialized: false,\n  enabled: false,\n  enableRender: true,\n  currentRenderer: null,\n  lightFollowCamera: true,\n  desiredUpdateRate: 30.0,\n  stillUpdateRate: 2.0,\n  container: null,\n  // _view: null,\n  recognizeGestures: true,\n  currentGesture: 'Start',\n  animationRequest: null,\n  lastFrameTime: 0.1,\n  recentAnimationFrameRate: 10.0,\n  wheelTimeoutID: 0,\n  moveTimeoutID: 0,\n  lastGamepadValues: {},\n  preventDefaultOnPointerDown: false,\n  preventDefaultOnPointerUp: false,\n  mouseScrollDebounceByPass: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n\n  // run animation at least until this time\n  model._animationExtendedEnd = 0;\n  macro.event(publicAPI, model, 'RenderEvent');\n  handledEvents.forEach(eventName => macro.event(publicAPI, model, eventName));\n\n  // Create get-only macros\n  macro.get(publicAPI, model, ['initialized', 'interactorStyle', 'lastFrameTime', 'recentAnimationFrameRate', '_view']);\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['container', 'lightFollowCamera', 'enabled', 'enableRender', 'recognizeGestures', 'desiredUpdateRate', 'stillUpdateRate', 'picker', 'preventDefaultOnPointerDown', 'preventDefaultOnPointerUp', 'mouseScrollDebounceByPass']);\n  macro.moveToProtected(publicAPI, model, ['view']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkRenderWindowInteractor(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkRenderWindowInteractor');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderWindowInteractor$1 = {\n  newInstance,\n  extend,\n  handledEvents,\n  ...Constants\n};\n\nexport { vtkRenderWindowInteractor$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkRenderWindowInteractor from './RenderWindowInteractor.js';\n\nconst {\n  vtkErrorMacro,\n  VOID\n} = macro;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n//----------------------------------------------------------------------------\n// Description:\n// Transform from world to display coordinates.\nfunction computeWorldToDisplay(renderer, x, y, z) {\n  const view = renderer.getRenderWindow().getViews()[0];\n  return view.worldToDisplay(x, y, z, renderer);\n}\n\n//----------------------------------------------------------------------------\n// Description:\n// Transform from display to world coordinates.\nfunction computeDisplayToWorld(renderer, x, y, z) {\n  const view = renderer.getRenderWindow().getViews()[0];\n  return view.displayToWorld(x, y, z, renderer);\n}\n\n// ----------------------------------------------------------------------------\n// Static API\n// ----------------------------------------------------------------------------\nconst STATIC = {\n  computeWorldToDisplay,\n  computeDisplayToWorld\n};\n\n// ----------------------------------------------------------------------------\n// vtkInteractorObserver methods\n// ----------------------------------------------------------------------------\n\nfunction vtkInteractorObserver(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkInteractorObserver');\n  const superClass = {\n    ...publicAPI\n  };\n\n  //----------------------------------------------------------------------------\n  function unsubscribeFromEvents() {\n    while (model.subscribedEvents.length) {\n      model.subscribedEvents.pop().unsubscribe();\n    }\n  }\n\n  //----------------------------------------------------------------------------\n  // Check what events we can handle and register callbacks\n  function subscribeToEvents() {\n    vtkRenderWindowInteractor.handledEvents.forEach(eventName => {\n      if (publicAPI[`handle${eventName}`]) {\n        model.subscribedEvents.push(model._interactor[`on${eventName}`](callData => {\n          if (model.processEvents) {\n            return publicAPI[`handle${eventName}`](callData);\n          }\n          return VOID;\n        }, model.priority));\n      }\n    });\n  }\n\n  //----------------------------------------------------------------------------\n  // Public API methods\n  //----------------------------------------------------------------------------\n  publicAPI.setInteractor = i => {\n    if (i === model._interactor) {\n      return;\n    }\n    unsubscribeFromEvents();\n    model._interactor = i;\n    if (i && model.enabled) {\n      subscribeToEvents();\n    }\n    publicAPI.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.setEnabled = enable => {\n    if (enable === model.enabled) {\n      return;\n    }\n    unsubscribeFromEvents();\n    if (enable) {\n      if (model._interactor) {\n        subscribeToEvents();\n      } else {\n        vtkErrorMacro(`\n          The interactor must be set before subscribing to events\n        `);\n      }\n    }\n    model.enabled = enable;\n    publicAPI.modified();\n  };\n\n  //----------------------------------------------------------------------------\n  // Description:\n  // Transform from display to world coordinates.\n  publicAPI.computeDisplayToWorld = (renderer, x, y, z) => {\n    if (!renderer) {\n      return null;\n    }\n    return model._interactor.getView().displayToWorld(x, y, z, renderer);\n  };\n\n  //----------------------------------------------------------------------------\n  // Description:\n  // Transform from world to display coordinates.\n  publicAPI.computeWorldToDisplay = (renderer, x, y, z) => {\n    if (!renderer) {\n      return null;\n    }\n    return model._interactor.getView().worldToDisplay(x, y, z, renderer);\n  };\n\n  //----------------------------------------------------------------------------\n\n  publicAPI.setPriority = priority => {\n    const modified = superClass.setPriority(priority);\n    if (modified && model._interactor) {\n      unsubscribeFromEvents();\n      subscribeToEvents();\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  enabled: true,\n  // _interactor: null,\n  priority: 0.0,\n  processEvents: true,\n  subscribedEvents: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.event(publicAPI, model, 'InteractionEvent');\n  macro.event(publicAPI, model, 'StartInteractionEvent');\n  macro.event(publicAPI, model, 'EndInteractionEvent');\n\n  // Create get-only macros\n  macro.get(publicAPI, model, ['_interactor', 'enabled']);\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['priority', 'processEvents']);\n  macro.moveToProtected(publicAPI, model, ['interactor']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkInteractorObserver(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkInteractorObserver');\n\n// ----------------------------------------------------------------------------\n\nvar vtkInteractorObserver$1 = {\n  newInstance,\n  extend,\n  ...STATIC\n};\n\nexport { STATIC, vtkInteractorObserver$1 as default, extend, newInstance };\n", "const States = {\n  IS_START: 0,\n  IS_NONE: 0,\n  IS_ROTATE: 1,\n  IS_PAN: 2,\n  IS_SPIN: 3,\n  IS_DOLLY: 4,\n  IS_CAMERA_POSE: 11,\n  IS_WINDOW_LEVEL: 1024,\n  IS_SLICE: 1025\n};\nvar vtkInteractorStyleConstants = {\n  States\n};\n\nexport { States, vtkInteractorStyleConstants as default };\n", "import { m as macro } from '../../macros2.js';\nimport vtkInteractorObserver from './InteractorObserver.js';\nimport vtkInteractorStyleConstants from './InteractorStyle/Constants.js';\n\nconst {\n  States\n} = vtkInteractorStyleConstants;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// Add module-level functions or api that you want to expose statically via\n// the next section...\n\nconst stateNames = {\n  Rotate: States.IS_ROTATE,\n  Pan: States.IS_PAN,\n  Spin: States.IS_SPIN,\n  Dolly: States.IS_DOLLY,\n  CameraPose: States.IS_CAMERA_POSE,\n  WindowLevel: States.IS_WINDOW_LEVEL,\n  Slice: States.IS_SLICE\n};\n\n// ----------------------------------------------------------------------------\n// vtkInteractorStyle methods\n// ----------------------------------------------------------------------------\n\nfunction vtkInteractorStyle(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkInteractorStyle');\n\n  // Public API methods\n  // create bunch of Start/EndState methods\n  Object.keys(stateNames).forEach(key => {\n    macro.event(publicAPI, model, `Start${key}Event`);\n    publicAPI[`start${key}`] = () => {\n      if (model.state !== States.IS_NONE) {\n        return;\n      }\n      model.state = stateNames[key];\n      model._interactor.requestAnimation(publicAPI);\n      publicAPI.invokeStartInteractionEvent({\n        type: 'StartInteractionEvent'\n      });\n      publicAPI[`invokeStart${key}Event`]({\n        type: `Start${key}Event`\n      });\n    };\n    macro.event(publicAPI, model, `End${key}Event`);\n    publicAPI[`end${key}`] = () => {\n      if (model.state !== stateNames[key]) {\n        return;\n      }\n      model.state = States.IS_NONE;\n      model._interactor.cancelAnimation(publicAPI);\n      publicAPI.invokeEndInteractionEvent({\n        type: 'EndInteractionEvent'\n      });\n      publicAPI[`invokeEnd${key}Event`]({\n        type: `End${key}Event`\n      });\n      model._interactor.render();\n    };\n  });\n  model.getRenderer = callData => model.focusedRenderer || callData.pokedRenderer;\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleKeyPress = callData => {\n    const rwi = model._interactor;\n    let ac = null;\n    switch (callData.key) {\n      case 'r':\n      case 'R':\n        model.getRenderer(callData).resetCamera();\n        rwi.render();\n        break;\n      case 'w':\n      case 'W':\n        ac = model.getRenderer(callData).getActors();\n        ac.forEach(anActor => {\n          const prop = anActor.getProperty();\n          if (prop.setRepresentationToWireframe) {\n            prop.setRepresentationToWireframe();\n          }\n        });\n        rwi.render();\n        break;\n      case 's':\n      case 'S':\n        ac = model.getRenderer(callData).getActors();\n        ac.forEach(anActor => {\n          const prop = anActor.getProperty();\n          if (prop.setRepresentationToSurface) {\n            prop.setRepresentationToSurface();\n          }\n        });\n        rwi.render();\n        break;\n      case 'v':\n      case 'V':\n        ac = model.getRenderer(callData).getActors();\n        ac.forEach(anActor => {\n          const prop = anActor.getProperty();\n          if (prop.setRepresentationToPoints) {\n            prop.setRepresentationToPoints();\n          }\n        });\n        rwi.render();\n        break;\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  state: States.IS_NONE,\n  handleObservers: 1,\n  autoAdjustCameraClippingRange: 1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkInteractorObserver.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['focusedRenderer']);\n\n  // Object specific methods\n  vtkInteractorStyle(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkInteractorStyle');\n\n// ----------------------------------------------------------------------------\n\nvar vtkInteractorStyle$1 = {\n  newInstance,\n  extend,\n  ...vtkInteractorStyleConstants\n};\n\nexport { vtkInteractorStyle$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkInteractorStyle from '../../Rendering/Core/InteractorStyle.js';\nimport vtkInteractorStyleConstants from '../../Rendering/Core/InteractorStyle/Constants.js';\nimport { B as degreesFromRadians } from '../../Common/Core/Math/index.js';\nimport { Device, Input } from '../../Rendering/Core/RenderWindowInteractor/Constants.js';\n\nconst {\n  States\n} = vtkInteractorStyleConstants;\n\n/* eslint-disable no-lonely-if */\n\n// ----------------------------------------------------------------------------\n// vtkInteractorStyleTrackballCamera methods\n// ----------------------------------------------------------------------------\n\nfunction vtkInteractorStyleTrackballCamera(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkInteractorStyleTrackballCamera');\n\n  // Public API methods\n  publicAPI.handleMouseMove = callData => {\n    const pos = callData.position;\n    const renderer = model.getRenderer(callData);\n    switch (model.state) {\n      case States.IS_ROTATE:\n        publicAPI.handleMouseRotate(renderer, pos);\n        publicAPI.invokeInteractionEvent({\n          type: 'InteractionEvent'\n        });\n        break;\n      case States.IS_PAN:\n        publicAPI.handleMousePan(renderer, pos);\n        publicAPI.invokeInteractionEvent({\n          type: 'InteractionEvent'\n        });\n        break;\n      case States.IS_DOLLY:\n        publicAPI.handleMouseDolly(renderer, pos);\n        publicAPI.invokeInteractionEvent({\n          type: 'InteractionEvent'\n        });\n        break;\n      case States.IS_SPIN:\n        publicAPI.handleMouseSpin(renderer, pos);\n        publicAPI.invokeInteractionEvent({\n          type: 'InteractionEvent'\n        });\n        break;\n    }\n    model.previousPosition = pos;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleButton3D = ed => {\n    if (ed && ed.pressed && ed.device === Device.RightController && (ed.input === Input.Trigger || ed.input === Input.TrackPad)) {\n      publicAPI.startCameraPose();\n      return;\n    }\n    if (ed && !ed.pressed && ed.device === Device.RightController && (ed.input === Input.Trigger || ed.input === Input.TrackPad) && model.state === States.IS_CAMERA_POSE) {\n      publicAPI.endCameraPose();\n      // return;\n    }\n  };\n\n  publicAPI.handleMove3D = ed => {\n    switch (model.state) {\n      case States.IS_CAMERA_POSE:\n        publicAPI.updateCameraPose(ed);\n        break;\n    }\n  };\n  publicAPI.updateCameraPose = ed => {\n    // move the world in the direction of the\n    // controller\n    const camera = model.getRenderer(ed).getActiveCamera();\n    const oldTrans = camera.getPhysicalTranslation();\n\n    // look at the y axis to determine how fast / what direction to move\n    const speed = 0.5; // ed.gamepad.axes[1];\n\n    // 0.05 meters / frame movement\n    const pscale = speed * 0.05 * camera.getPhysicalScale();\n\n    // convert orientation to world coordinate direction\n    const dir = camera.physicalOrientationToWorldDirection([ed.orientation.x, ed.orientation.y, ed.orientation.z, ed.orientation.w]);\n    camera.setPhysicalTranslation(oldTrans[0] + dir[0] * pscale, oldTrans[1] + dir[1] * pscale, oldTrans[2] + dir[2] * pscale);\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleLeftButtonPress = callData => {\n    const pos = callData.position;\n    model.previousPosition = pos;\n    if (callData.shiftKey) {\n      if (callData.controlKey || callData.altKey) {\n        publicAPI.startDolly();\n      } else {\n        publicAPI.startPan();\n      }\n    } else {\n      if (callData.controlKey || callData.altKey) {\n        publicAPI.startSpin();\n      } else {\n        publicAPI.startRotate();\n      }\n    }\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleLeftButtonRelease = () => {\n    switch (model.state) {\n      case States.IS_DOLLY:\n        publicAPI.endDolly();\n        break;\n      case States.IS_PAN:\n        publicAPI.endPan();\n        break;\n      case States.IS_SPIN:\n        publicAPI.endSpin();\n        break;\n      case States.IS_ROTATE:\n        publicAPI.endRotate();\n        break;\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleStartMouseWheel = () => {\n    publicAPI.startDolly();\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleEndMouseWheel = () => {\n    publicAPI.endDolly();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleStartPinch = callData => {\n    model.previousScale = callData.scale;\n    publicAPI.startDolly();\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleEndPinch = () => {\n    publicAPI.endDolly();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleStartRotate = callData => {\n    model.previousRotation = callData.rotation;\n    publicAPI.startRotate();\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleEndRotate = () => {\n    publicAPI.endRotate();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleStartPan = callData => {\n    model.previousTranslation = callData.translation;\n    publicAPI.startPan();\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleEndPan = () => {\n    publicAPI.endPan();\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handlePinch = callData => {\n    publicAPI.dollyByFactor(model.getRenderer(callData), callData.scale / model.previousScale);\n    model.previousScale = callData.scale;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handlePan = callData => {\n    const camera = model.getRenderer(callData).getActiveCamera();\n\n    // Calculate the focal depth since we'll be using it a lot\n    let viewFocus = camera.getFocalPoint();\n    viewFocus = publicAPI.computeWorldToDisplay(model.getRenderer(callData), viewFocus[0], viewFocus[1], viewFocus[2]);\n    const focalDepth = viewFocus[2];\n    const trans = callData.translation;\n    const lastTrans = model.previousTranslation;\n    const newPickPoint = publicAPI.computeDisplayToWorld(model.getRenderer(callData), viewFocus[0] + trans[0] - lastTrans[0], viewFocus[1] + trans[1] - lastTrans[1], focalDepth);\n\n    // Has to recalc old mouse point since the viewport has moved,\n    // so can't move it outside the loop\n    const oldPickPoint = publicAPI.computeDisplayToWorld(model.getRenderer(callData), viewFocus[0], viewFocus[1], focalDepth);\n\n    // Camera motion is reversed\n    const motionVector = [];\n    motionVector[0] = oldPickPoint[0] - newPickPoint[0];\n    motionVector[1] = oldPickPoint[1] - newPickPoint[1];\n    motionVector[2] = oldPickPoint[2] - newPickPoint[2];\n    viewFocus = camera.getFocalPoint();\n    const viewPoint = camera.getPosition();\n    camera.setFocalPoint(motionVector[0] + viewFocus[0], motionVector[1] + viewFocus[1], motionVector[2] + viewFocus[2]);\n    camera.setPosition(motionVector[0] + viewPoint[0], motionVector[1] + viewPoint[1], motionVector[2] + viewPoint[2]);\n    if (model._interactor.getLightFollowCamera()) {\n      model.getRenderer(callData).updateLightsGeometryToFollowCamera();\n    }\n    camera.orthogonalizeViewUp();\n    model.previousTranslation = callData.translation;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleRotate = callData => {\n    const camera = model.getRenderer(callData).getActiveCamera();\n    camera.roll(callData.rotation - model.previousRotation);\n    camera.orthogonalizeViewUp();\n    model.previousRotation = callData.rotation;\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleMouseRotate = (renderer, position) => {\n    if (!model.previousPosition) {\n      return;\n    }\n    const rwi = model._interactor;\n    const dx = position.x - model.previousPosition.x;\n    const dy = position.y - model.previousPosition.y;\n    const size = rwi.getView().getViewportSize(renderer);\n    let deltaElevation = -0.1;\n    let deltaAzimuth = -0.1;\n    if (size[0] && size[1]) {\n      deltaElevation = -20.0 / size[1];\n      deltaAzimuth = -20.0 / size[0];\n    }\n    const rxf = dx * deltaAzimuth * model.motionFactor;\n    const ryf = dy * deltaElevation * model.motionFactor;\n    const camera = renderer.getActiveCamera();\n    if (!Number.isNaN(rxf) && !Number.isNaN(ryf)) {\n      camera.azimuth(rxf);\n      camera.elevation(ryf);\n      camera.orthogonalizeViewUp();\n    }\n    if (model.autoAdjustCameraClippingRange) {\n      renderer.resetCameraClippingRange();\n    }\n    if (rwi.getLightFollowCamera()) {\n      renderer.updateLightsGeometryToFollowCamera();\n    }\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleMouseSpin = (renderer, position) => {\n    if (!model.previousPosition) {\n      return;\n    }\n    const rwi = model._interactor;\n    const camera = renderer.getActiveCamera();\n    const center = rwi.getView().getViewportCenter(renderer);\n    const oldAngle = degreesFromRadians(Math.atan2(model.previousPosition.y - center[1], model.previousPosition.x - center[0]));\n    const newAngle = degreesFromRadians(Math.atan2(position.y - center[1], position.x - center[0])) - oldAngle;\n    if (!Number.isNaN(newAngle)) {\n      camera.roll(newAngle);\n      camera.orthogonalizeViewUp();\n    }\n  };\n\n  //--------------------------------------------------------------------------\n  publicAPI.handleMousePan = (renderer, position) => {\n    if (!model.previousPosition) {\n      return;\n    }\n    const camera = renderer.getActiveCamera();\n\n    // Calculate the focal depth since we'll be using it a lot\n    let viewFocus = camera.getFocalPoint();\n    viewFocus = publicAPI.computeWorldToDisplay(renderer, viewFocus[0], viewFocus[1], viewFocus[2]);\n    const focalDepth = viewFocus[2];\n    const newPickPoint = publicAPI.computeDisplayToWorld(renderer, position.x, position.y, focalDepth);\n\n    // Has to recalc old mouse point since the viewport has moved,\n    // so can't move it outside the loop\n    const oldPickPoint = publicAPI.computeDisplayToWorld(renderer, model.previousPosition.x, model.previousPosition.y, focalDepth);\n\n    // Camera motion is reversed\n    const motionVector = [];\n    motionVector[0] = oldPickPoint[0] - newPickPoint[0];\n    motionVector[1] = oldPickPoint[1] - newPickPoint[1];\n    motionVector[2] = oldPickPoint[2] - newPickPoint[2];\n    viewFocus = camera.getFocalPoint();\n    const viewPoint = camera.getPosition();\n    camera.setFocalPoint(motionVector[0] + viewFocus[0], motionVector[1] + viewFocus[1], motionVector[2] + viewFocus[2]);\n    camera.setPosition(motionVector[0] + viewPoint[0], motionVector[1] + viewPoint[1], motionVector[2] + viewPoint[2]);\n    if (model._interactor.getLightFollowCamera()) {\n      renderer.updateLightsGeometryToFollowCamera();\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleMouseDolly = (renderer, position) => {\n    if (!model.previousPosition) {\n      return;\n    }\n    const dy = position.y - model.previousPosition.y;\n    const rwi = model._interactor;\n    const center = rwi.getView().getViewportCenter(renderer);\n    const dyf = model.motionFactor * dy / center[1];\n    publicAPI.dollyByFactor(renderer, 1.1 ** dyf);\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.handleMouseWheel = callData => {\n    const dyf = 1 - callData.spinY / model.zoomFactor;\n    publicAPI.dollyByFactor(model.getRenderer(callData), dyf);\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.dollyByFactor = (renderer, factor) => {\n    if (Number.isNaN(factor)) {\n      return;\n    }\n    const camera = renderer.getActiveCamera();\n    if (camera.getParallelProjection()) {\n      camera.setParallelScale(camera.getParallelScale() / factor);\n    } else {\n      camera.dolly(factor);\n      if (model.autoAdjustCameraClippingRange) {\n        renderer.resetCameraClippingRange();\n      }\n    }\n    if (model._interactor.getLightFollowCamera()) {\n      renderer.updateLightsGeometryToFollowCamera();\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  motionFactor: 10.0,\n  zoomFactor: 10.0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkInteractorStyle.extend(publicAPI, model, initialValues);\n\n  // Create get-set macros\n  macro.setGet(publicAPI, model, ['motionFactor', 'zoomFactor']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n\n  // Object specific methods\n  vtkInteractorStyleTrackballCamera(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkInteractorStyleTrackballCamera');\n\n// ----------------------------------------------------------------------------\n\nvar vtkInteractorStyleTrackballCamera$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkInteractorStyleTrackballCamera$1 as default, extend, newInstance };\n", "function identity(i) {\n  return i;\n}\nfunction toNativeType(str) {\n  if (str === null || str === 'null') {\n    return null;\n  }\n  if (str === 'true') {\n    return true;\n  }\n  if (str === 'false') {\n    return false;\n  }\n  if (str === undefined || str === 'undefined') {\n    return undefined;\n  }\n  if (str[0] === '[' && str[str.length - 1] === ']') {\n    return str.substring(1, str.length - 1).split(',').map(s => toNativeType(s.trim()));\n  }\n  if (str === '' || Number.isNaN(Number(str))) {\n    return str;\n  }\n  return Number(str);\n}\nfunction extractURLParameters() {\n  let castToNativeType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  let query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window.location.search;\n  const summary = {};\n  const convert = castToNativeType ? toNativeType : identity;\n  const params = new URLSearchParams(query);\n  params.forEach((value, key) => {\n    if (key) {\n      summary[key] = value ? convert(value) : true;\n    }\n  });\n  return summary;\n}\nvar vtkURLExtract = {\n  toNativeType,\n  extractURLParameters\n};\n\nexport { vtkURLExtract as default };\n", "import { n as newInstance$1, o as obj, r as vtkErrorMacro, k as getArray } from '../../macros2.js';\nimport vtkOpenGLTexture from './Texture.js';\nimport { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\nimport { Filter } from './Texture/Constants.js';\n\n// ----------------------------------------------------------------------------\n// vtkFramebuffer methods\n// ----------------------------------------------------------------------------\nfunction vtkFramebuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkFramebuffer');\n  publicAPI.getBothMode = () => model.context.FRAMEBUFFER;\n  // publicAPI.getDrawMode = () => model.context.DRAW_FRAMEBUFFER;\n  // publicAPI.getReadMode = () => model.context.READ_FRAMEBUFFER;\n\n  publicAPI.saveCurrentBindingsAndBuffers = modeIn => {\n    const mode = typeof modeIn !== 'undefined' ? modeIn : publicAPI.getBothMode();\n    publicAPI.saveCurrentBindings(mode);\n    publicAPI.saveCurrentBuffers(mode);\n  };\n  publicAPI.saveCurrentBindings = modeIn => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling saveCurrentBindings');\n      return;\n    }\n    const gl = model.context;\n    model.previousDrawBinding = gl.getParameter(model.context.FRAMEBUFFER_BINDING);\n    model.previousActiveFramebuffer = model._openGLRenderWindow.getActiveFramebuffer();\n  };\n  publicAPI.saveCurrentBuffers = modeIn => {\n    // noop on webgl 1\n  };\n  publicAPI.restorePreviousBindingsAndBuffers = modeIn => {\n    const mode = typeof modeIn !== 'undefined' ? modeIn : publicAPI.getBothMode();\n    publicAPI.restorePreviousBindings(mode);\n    publicAPI.restorePreviousBuffers(mode);\n  };\n  publicAPI.restorePreviousBindings = modeIn => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling restorePreviousBindings');\n      return;\n    }\n    const gl = model.context;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, model.previousDrawBinding);\n    model._openGLRenderWindow.setActiveFramebuffer(model.previousActiveFramebuffer);\n  };\n  publicAPI.restorePreviousBuffers = modeIn => {\n    // currently a noop on webgl1\n  };\n  publicAPI.bind = function () {\n    let modeArg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let mode = modeArg;\n    if (mode === null) {\n      mode = model.context.FRAMEBUFFER;\n    }\n    model.context.bindFramebuffer(mode, model.glFramebuffer);\n    for (let i = 0; i < model.colorBuffers.length; i++) {\n      model.colorBuffers[i].bind();\n    }\n    model._openGLRenderWindow.setActiveFramebuffer(publicAPI);\n  };\n  publicAPI.create = (width, height) => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling create');\n      return;\n    }\n    model.glFramebuffer = model.context.createFramebuffer();\n    model.glFramebuffer.width = width;\n    model.glFramebuffer.height = height;\n  };\n  publicAPI.setColorBuffer = function (texture) {\n    let attachment = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const gl = model.context;\n    if (!gl) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling setColorBuffer');\n      return;\n    }\n    let glAttachment = gl.COLOR_ATTACHMENT0;\n    if (attachment > 0) {\n      if (model._openGLRenderWindow.getWebgl2()) {\n        glAttachment += attachment;\n      } else {\n        vtkErrorMacro('Using multiple framebuffer attachments requires WebGL 2');\n        return;\n      }\n    }\n    model.colorBuffers[attachment] = texture;\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, glAttachment, gl.TEXTURE_2D, texture.getHandle(), 0);\n  };\n  publicAPI.removeColorBuffer = function () {\n    let attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    const gl = model.context;\n    if (!gl) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling removeColorBuffer');\n      return;\n    }\n    let glAttachment = gl.COLOR_ATTACHMENT0;\n    if (attachment > 0) {\n      if (model._openGLRenderWindow.getWebgl2()) {\n        glAttachment += attachment;\n      } else {\n        vtkErrorMacro('Using multiple framebuffer attachments requires WebGL 2');\n        return;\n      }\n    }\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, glAttachment, gl.TEXTURE_2D, null, 0);\n    model.colorBuffers = model.colorBuffers.splice(attachment, 1);\n  };\n  publicAPI.setDepthBuffer = texture => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling setDepthBuffer');\n      return;\n    }\n    if (model._openGLRenderWindow.getWebgl2()) {\n      const gl = model.context;\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, texture.getHandle(), 0);\n    } else {\n      vtkErrorMacro('Attaching depth buffer textures to fbo requires WebGL 2');\n    }\n  };\n  publicAPI.removeDepthBuffer = () => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling removeDepthBuffer');\n      return;\n    }\n    if (model._openGLRenderWindow.getWebgl2()) {\n      const gl = model.context;\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, null, 0);\n    } else {\n      vtkErrorMacro('Attaching depth buffer textures to framebuffers requires WebGL 2');\n    }\n  };\n  publicAPI.getGLFramebuffer = () => model.glFramebuffer;\n  publicAPI.setOpenGLRenderWindow = rw => {\n    if (model._openGLRenderWindow === rw) {\n      return;\n    }\n    publicAPI.releaseGraphicsResources();\n    model._openGLRenderWindow = rw;\n    model.context = null;\n    if (rw) {\n      model.context = model._openGLRenderWindow.getContext();\n    }\n  };\n  publicAPI.releaseGraphicsResources = () => {\n    if (model.glFramebuffer) {\n      model.context.deleteFramebuffer(model.glFramebuffer);\n    }\n  };\n  publicAPI.getSize = () => {\n    if (model.glFramebuffer == null) return null;\n    return [model.glFramebuffer.width, model.glFramebuffer.height];\n  };\n  publicAPI.populateFramebuffer = () => {\n    if (!model.context) {\n      vtkErrorMacro('you must set the OpenGLRenderWindow before calling populateFrameBuffer');\n      return;\n    }\n    publicAPI.bind();\n    const gl = model.context;\n    const texture = vtkOpenGLTexture.newInstance();\n    texture.setOpenGLRenderWindow(model._openGLRenderWindow);\n    texture.setMinificationFilter(Filter.LINEAR);\n    texture.setMagnificationFilter(Filter.LINEAR);\n    texture.create2DFromRaw({\n      width: model.glFramebuffer.width,\n      height: model.glFramebuffer.height,\n      numComps: 4,\n      dataType: VtkDataTypes.UNSIGNED_CHAR,\n      data: null\n    });\n    publicAPI.setColorBuffer(texture);\n\n    // for now do not count on having a depth buffer texture\n    // as they are not standard webgl 1\n    model.depthTexture = gl.createRenderbuffer();\n    gl.bindRenderbuffer(gl.RENDERBUFFER, model.depthTexture);\n    gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, model.glFramebuffer.width, model.glFramebuffer.height);\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, model.depthTexture);\n  };\n\n  // For backwards compatibility. Use getColorBuffers()[0] going forward.\n  publicAPI.getColorTexture = () => model.colorBuffers[0];\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  // _openGLRenderWindow: null,\n  glFramebuffer: null,\n  colorBuffers: null,\n  depthTexture: null,\n  previousDrawBinding: 0,\n  previousReadBinding: 0,\n  previousDrawBuffer: 0,\n  previousReadBuffer: 0,\n  previousActiveFramebuffer: null\n};\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  obj(publicAPI, model);\n  if (model.colorBuffers) {\n    vtkErrorMacro('you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead.');\n  }\n  model.colorBuffers = [];\n  getArray(publicAPI, model, ['colorBuffers']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n  // Object specific methods\n  vtkFramebuffer(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nconst newInstance = newInstance$1(extend, 'vtkFramebuffer');\n\n// ----------------------------------------------------------------------------\nvar vtkOpenGLFramebuffer = {\n  newInstance,\n  extend\n};\n\nexport { vtkOpenGLFramebuffer as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\n// ----------------------------------------------------------------------------\n\nfunction vtkRenderPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkRenderPass');\n  publicAPI.getOperation = () => model.currentOperation;\n  publicAPI.setCurrentOperation = val => {\n    model.currentOperation = val;\n    model.currentTraverseOperation = `traverse${macro.capitalize(model.currentOperation)}`;\n  };\n  publicAPI.getTraverseOperation = () => model.currentTraverseOperation;\n\n  // by default this class will traverse all of its\n  // preDelegateOperations, then call its delegate render passes\n  // the traverse all of its postDelegateOperations\n  // any of those three arrays can be empty\n  publicAPI.traverse = function (viewNode) {\n    let parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = parent;\n    model.preDelegateOperations.forEach(val => {\n      publicAPI.setCurrentOperation(val);\n      viewNode.traverse(publicAPI);\n    });\n    model.delegates.forEach(val => {\n      val.traverse(viewNode, publicAPI);\n    });\n    model.postDelegateOperations.forEach(val => {\n      publicAPI.setCurrentOperation(val);\n      viewNode.traverse(publicAPI);\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  delegates: [],\n  currentOperation: null,\n  preDelegateOperations: [],\n  postDelegateOperations: [],\n  currentParent: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['currentOperation']);\n  macro.setGet(publicAPI, model, ['delegates', '_currentParent', 'preDelegateOperations', 'postDelegateOperations']);\n  macro.moveToProtected(publicAPI, model, ['currentParent']);\n\n  // Object methods\n  vtkRenderPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkRenderPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderPass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkRenderPass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkOpenGLTexture from './Texture.js';\nimport vtkOpenGLFramebuffer from './Framebuffer.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkHelper from './Helper.js';\nimport vtkProperty from '../Core/Property.js';\nimport vtkShaderProgram from './ShaderProgram.js';\nimport vtkVertexArrayObject from './VertexArrayObject.js';\n\nconst {\n  Representation\n} = vtkProperty;\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n\nfunction translucentShaderReplacement(shaders) {\n  const substituteRes = vtkShaderProgram.substitute(shaders.Fragment, '//VTK::RenderPassFragmentShader::Impl', `\n      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);\n      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);\n      gl_FragData[1].r = weight;\n    `, false);\n  shaders.Fragment = substituteRes.result;\n}\nconst oitpFragTemplate = `//VTK::System::Dec\n\nin vec2 tcoord;\n\nuniform sampler2D translucentRTexture;\nuniform sampler2D translucentRGBATexture;\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  vec4 t1Color = texture(translucentRGBATexture, tcoord);\n  float t2Color = texture(translucentRTexture, tcoord).r;\n  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);\n}\n`;\nfunction vtkOpenGLOrderIndependentTranslucentPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLOrderIndependentTranslucentPass');\n\n  // build vertices etc\n  publicAPI.createVertexBuffer = () => {\n    // 4 corner points in clipping space in order (x, y, z) where z is always set to -1\n    // prettier-ignore\n    const ptsArray = new Float32Array([-1, -1, -1, 1, -1, -1, -1, 1, -1, 1, 1, -1]);\n\n    // 4 corresponding corner points in texture space in order (x, y)\n    const tcoordArray = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n\n    // a square defined as cell relation ship in order (cell_size, v1, v2, v3, v4)\n    const cellArray = new Uint16Array([4, 0, 1, 3, 2]);\n    const points = vtkDataArray.newInstance({\n      numberOfComponents: 3,\n      values: ptsArray\n    });\n    points.setName('points');\n    const tcoords = vtkDataArray.newInstance({\n      numberOfComponents: 2,\n      values: tcoordArray\n    });\n    tcoords.setName('tcoords');\n    const cells = vtkDataArray.newInstance({\n      numberOfComponents: 1,\n      values: cellArray\n    });\n    model.tris.getCABO().createVBO(cells, 'polys', Representation.SURFACE, {\n      points,\n      tcoords,\n      cellOffset: 0\n    });\n    model.VBOBuildTime.modified();\n  };\n  publicAPI.createFramebuffer = viewNode => {\n    const size = viewNode.getSize();\n    const gl = viewNode.getContext();\n    model.framebuffer = vtkOpenGLFramebuffer.newInstance();\n    model.framebuffer.setOpenGLRenderWindow(viewNode);\n    model.framebuffer.create(...size);\n    model.framebuffer.saveCurrentBindingsAndBuffers();\n    model.framebuffer.bind();\n    model.translucentRGBATexture = vtkOpenGLTexture.newInstance();\n    model.translucentRGBATexture.setInternalFormat(gl.RGBA16F);\n    model.translucentRGBATexture.setFormat(gl.RGBA);\n    model.translucentRGBATexture.setOpenGLDataType(gl.HALF_FLOAT);\n    model.translucentRGBATexture.setOpenGLRenderWindow(viewNode);\n    model.translucentRGBATexture.create2DFromRaw({\n      width: size[0],\n      height: size[1],\n      numComps: 4,\n      dataType: 'Float32Array',\n      data: null\n    });\n    model.translucentRTexture = vtkOpenGLTexture.newInstance();\n    model.translucentRTexture.setInternalFormat(gl.R16F);\n    model.translucentRTexture.setFormat(gl.RED);\n    model.translucentRTexture.setOpenGLDataType(gl.HALF_FLOAT);\n    model.translucentRTexture.setOpenGLRenderWindow(viewNode);\n    model.translucentRTexture.create2DFromRaw({\n      width: size[0],\n      height: size[1],\n      numComps: 1,\n      dataType: 'Float32Array',\n      data: null\n    });\n    model.translucentZTexture = vtkOpenGLTexture.newInstance();\n    model.translucentZTexture.setOpenGLRenderWindow(viewNode);\n    model.translucentZTexture.createDepthFromRaw({\n      width: size[0],\n      height: size[1],\n      dataType: 'Float32Array',\n      data: null\n    });\n    model.framebuffer.setColorBuffer(model.translucentRGBATexture, 0);\n    model.framebuffer.setColorBuffer(model.translucentRTexture, 1);\n    model.framebuffer.setDepthBuffer(model.translucentZTexture);\n  };\n  publicAPI.createCopyShader = viewNode => {\n    model.copyShader = viewNode.getShaderCache().readyShaderProgramArray(['//VTK::System::Dec', 'attribute vec4 vertexDC;', 'attribute vec2 tcoordTC;', 'varying vec2 tcoord;', 'void main() { tcoord = tcoordTC; gl_Position = vertexDC; }'].join('\\n'), oitpFragTemplate, '');\n  };\n  publicAPI.createVBO = viewNode => {\n    const gl = viewNode.getContext();\n    model.tris.setOpenGLRenderWindow(viewNode);\n    publicAPI.createVertexBuffer();\n    const program = model.copyShader;\n    // prepare the vertex and triangle data for the image plane to render to\n\n    model.tris.getCABO().bind();\n    if (!model.copyVAO.addAttributeArray(program, model.tris.getCABO(), 'vertexDC', model.tris.getCABO().getVertexOffset(), model.tris.getCABO().getStride(), gl.FLOAT, 3, gl.FALSE)) {\n      vtkErrorMacro('Error setting vertexDC in copy shader VAO.');\n    }\n    if (!model.copyVAO.addAttributeArray(program, model.tris.getCABO(), 'tcoordTC', model.tris.getCABO().getTCoordOffset(), model.tris.getCABO().getStride(), gl.FLOAT, 2, gl.FALSE)) {\n      vtkErrorMacro('Error setting vertexDC in copy shader VAO.');\n    }\n  };\n  publicAPI.traverse = (viewNode, renNode, forwardPass) => {\n    if (model.deleted) {\n      return;\n    }\n    const size = viewNode.getSize();\n    const gl = viewNode.getContext();\n\n    // if we lack the webgl2 and half floatsupport just do\n    // basic alpha blending\n    model._supported = false;\n    if (renNode.getSelector() || !gl || !viewNode.getWebgl2() || !gl.getExtension('EXT_color_buffer_half_float') && !gl.getExtension('EXT_color_buffer_float')) {\n      publicAPI.setCurrentOperation('translucentPass');\n      renNode.traverse(publicAPI);\n      return;\n    }\n    model._supported = true;\n\n    // prepare framebuffer // allocate framebuffer if needed and bind it\n    if (model.framebuffer === null) {\n      publicAPI.createFramebuffer(viewNode);\n    } else {\n      const fbSize = model.framebuffer.getSize();\n      if (fbSize === null || fbSize[0] !== size[0] || fbSize[1] !== size[1]) {\n        model.framebuffer.releaseGraphicsResources();\n        model.translucentRGBATexture.releaseGraphicsResources(viewNode);\n        model.translucentRTexture.releaseGraphicsResources(viewNode);\n        model.translucentZTexture.releaseGraphicsResources(viewNode);\n        publicAPI.createFramebuffer(viewNode);\n      } else {\n        // store framebuffer bindings to restore them later\n        model.framebuffer.saveCurrentBindingsAndBuffers();\n        model.framebuffer.bind();\n      }\n    }\n    gl.drawBuffers([gl.COLOR_ATTACHMENT0]);\n    gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 0.0]);\n    gl.clearBufferfv(gl.DEPTH, 0, [1.0]);\n    gl.colorMask(false, false, false, false);\n\n    // rerender the opaque pass to set the depth buffer\n    // TODO remove when webgl1 is deprecated and instead\n    // have the forward pass use a texture backed zbuffer\n    if (forwardPass.getOpaqueActorCount() > 0) {\n      // Don't use zBufferPass as it will also render the depth of translucent actors\n      forwardPass.setCurrentOperation('opaqueZBufferPass');\n      renNode.traverse(forwardPass);\n    }\n    gl.colorMask(true, true, true, true);\n    gl.drawBuffers([gl.COLOR_ATTACHMENT0, gl.COLOR_ATTACHMENT1]);\n\n    // make sure to clear the entire framebuffer as we will\n    // be blitting the entire thing all of it needs good initial values\n    gl.viewport(0, 0, size[0], size[1]);\n    gl.scissor(0, 0, size[0], size[1]);\n    gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 0.0, 1.0]);\n    gl.clearBufferfv(gl.COLOR, 1, [0.0, 0.0, 0.0, 0.0]);\n    gl.enable(gl.DEPTH_TEST);\n    gl.enable(gl.BLEND);\n\n    // basic gist is we accumulate color into RGB We compute final opacity\n    // into A We store accumulated opacity into R of the R texture.\n    gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ZERO, gl.ONE_MINUS_SRC_ALPHA);\n\n    // now do the translucent rendering\n    publicAPI.setCurrentOperation('translucentPass');\n    renNode.traverse(publicAPI);\n    gl.drawBuffers([gl.NONE]);\n    model.framebuffer.restorePreviousBindingsAndBuffers();\n    // gl.drawBuffers([gl.BACK]);\n\n    // make sure the copy shader is ready\n    if (model.copyShader === null) {\n      publicAPI.createCopyShader(viewNode);\n    } else {\n      viewNode.getShaderCache().readyShaderProgram(model.copyShader);\n    }\n\n    // make sure we have a VAO\n    if (!model.copyVAO) {\n      model.copyVAO = vtkVertexArrayObject.newInstance();\n      model.copyVAO.setOpenGLRenderWindow(viewNode);\n    }\n    model.copyVAO.bind();\n\n    // make sure the VBO is up to date\n    if (model.VBOBuildTime.getMTime() < publicAPI.getMTime()) {\n      publicAPI.createVBO(viewNode);\n    }\n    gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n    gl.depthMask(false);\n    gl.depthFunc(gl.ALWAYS);\n    gl.viewport(0, 0, size[0], size[1]);\n    gl.scissor(0, 0, size[0], size[1]);\n\n    // activate texture\n    model.translucentRGBATexture.activate();\n    model.copyShader.setUniformi('translucentRGBATexture', model.translucentRGBATexture.getTextureUnit());\n    model.translucentRTexture.activate();\n    model.copyShader.setUniformi('translucentRTexture', model.translucentRTexture.getTextureUnit());\n\n    // render quad\n    gl.drawArrays(gl.TRIANGLES, 0, model.tris.getCABO().getElementCount());\n    gl.depthMask(true);\n    gl.depthFunc(gl.LEQUAL);\n    model.translucentRGBATexture.deactivate();\n    model.translucentRTexture.deactivate();\n\n    // restore scissor + viewport from renderer\n    const ts = renNode.getTiledSizeAndOrigin();\n    gl.scissor(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n    gl.viewport(ts.lowerLeftU, ts.lowerLeftV, ts.usize, ts.vsize);\n  };\n  publicAPI.getShaderReplacement = () => {\n    if (model._supported) {\n      return translucentShaderReplacement;\n    }\n    return null;\n  };\n  publicAPI.releaseGraphicsResources = viewNode => {\n    if (model.framebuffer) {\n      model.framebuffer.releaseGraphicsResources(viewNode);\n      model.framebuffer = null;\n    }\n    if (model.translucentRGBATexture) {\n      model.translucentRGBATexture.releaseGraphicsResources(viewNode);\n      model.translucentRGBATexture = null;\n    }\n    if (model.translucentRTexture) {\n      model.translucentRTexture.releaseGraphicsResources(viewNode);\n      model.translucentRTexture = null;\n    }\n    if (model.translucentZTexture) {\n      model.translucentZTexture.releaseGraphicsResources(viewNode);\n      model.translucentZTexture = null;\n    }\n    if (model.copyVAO) {\n      model.copyVAO.releaseGraphicsResources(viewNode);\n      model.copyVAO = null;\n    }\n    if (model.copyShader) {\n      model.copyShader.releaseGraphicsResources(viewNode);\n      model.copyShader = null;\n    }\n    if (model.tris) {\n      model.tris.releaseGraphicsResources(viewNode);\n      model.tris = null;\n    }\n    publicAPI.modified();\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  framebuffer: null,\n  copyShader: null,\n  tris: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  model.VBOBuildTime = {};\n  macro.obj(model.VBOBuildTime, {\n    mtime: 0\n  });\n  model.tris = vtkHelper.newInstance();\n  macro.get(publicAPI, model, ['framebuffer']);\n\n  // Object methods\n  vtkOpenGLOrderIndependentTranslucentPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLOrderIndependentTranslucentPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkOpenGLOrderIndependentTranslucentPass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkOpenGLOrderIndependentTranslucentPass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkOpenGLFramebuffer from './Framebuffer.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkOpenGLOrderIndependentTranslucentPass from './OrderIndependentTranslucentPass.js';\n\n// ----------------------------------------------------------------------------\n\nfunction vtkForwardPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkForwardPass');\n\n  // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n  publicAPI.traverse = function (viewNode) {\n    let parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = parent;\n\n    // build\n    publicAPI.setCurrentOperation('buildPass');\n    viewNode.traverse(publicAPI);\n    const numlayers = viewNode.getRenderable().getNumberOfLayers();\n\n    // iterate over renderers\n    const renderers = viewNode.getRenderable().getRenderersByReference();\n    for (let i = 0; i < numlayers; i++) {\n      for (let index = 0; index < renderers.length; index++) {\n        const ren = renderers[index];\n        const renNode = viewNode.getViewNodeFor(ren);\n        if (ren.getDraw() && ren.getLayer() === i) {\n          // check for both opaque and volume actors\n          model.opaqueActorCount = 0;\n          model.translucentActorCount = 0;\n          model.volumeCount = 0;\n          model.overlayActorCount = 0;\n          publicAPI.setCurrentOperation('queryPass');\n          renNode.traverse(publicAPI);\n\n          // do we need to capture a zbuffer?\n          if ((model.opaqueActorCount > 0 || model.translucentActorCount > 0) && model.volumeCount > 0 || model.depthRequested) {\n            const size = viewNode.getFramebufferSize();\n            // make sure the framebuffer is setup\n            if (model.framebuffer === null) {\n              model.framebuffer = vtkOpenGLFramebuffer.newInstance();\n            }\n            model.framebuffer.setOpenGLRenderWindow(viewNode);\n            model.framebuffer.saveCurrentBindingsAndBuffers();\n            const fbSize = model.framebuffer.getSize();\n            if (fbSize === null || fbSize[0] !== size[0] || fbSize[1] !== size[1]) {\n              model.framebuffer.create(size[0], size[1]);\n              model.framebuffer.populateFramebuffer();\n            }\n            model.framebuffer.bind();\n            // opaqueZBufferPass only renders opaque actors\n            // zBufferPass renders both translucent and opaque actors\n            // we want to be able to pick translucent actors\n            publicAPI.setCurrentOperation('zBufferPass');\n            renNode.traverse(publicAPI);\n            model.framebuffer.restorePreviousBindingsAndBuffers();\n\n            // reset now that we have done it\n            model.depthRequested = false;\n          }\n          publicAPI.setCurrentOperation('cameraPass');\n          renNode.traverse(publicAPI);\n          if (model.opaqueActorCount > 0) {\n            publicAPI.setCurrentOperation('opaquePass');\n            renNode.traverse(publicAPI);\n          }\n          if (model.translucentActorCount > 0) {\n            if (!model.translucentPass) {\n              model.translucentPass = vtkOpenGLOrderIndependentTranslucentPass.newInstance();\n            }\n            model.translucentPass.traverse(viewNode, renNode, publicAPI);\n          }\n          if (model.volumeCount > 0) {\n            publicAPI.setCurrentOperation('volumePass');\n            renNode.traverse(publicAPI);\n          }\n          if (model.overlayActorCount > 0) {\n            publicAPI.setCurrentOperation('overlayPass');\n            renNode.traverse(publicAPI);\n          }\n        }\n      }\n    }\n  };\n  publicAPI.getZBufferTexture = () => {\n    if (model.framebuffer) {\n      return model.framebuffer.getColorTexture();\n    }\n    return null;\n  };\n  publicAPI.requestDepth = () => {\n    model.depthRequested = true;\n  };\n  publicAPI.incrementOpaqueActorCount = () => model.opaqueActorCount++;\n  publicAPI.incrementTranslucentActorCount = () => model.translucentActorCount++;\n  publicAPI.incrementVolumeCount = () => model.volumeCount++;\n  publicAPI.incrementOverlayActorCount = () => model.overlayActorCount++;\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  opaqueActorCount: 0,\n  translucentActorCount: 0,\n  volumeCount: 0,\n  overlayActorCount: 0,\n  framebuffer: null,\n  depthRequested: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['framebuffer', 'opaqueActorCount', 'translucentActorCount', 'volumeCount']);\n\n  // Object methods\n  vtkForwardPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkForwardPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkForwardPass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkForwardPass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkDataSet from '../../Common/DataModel/DataSet.js';\n\nconst {\n  FieldAssociations\n} = vtkDataSet;\n\n// ----------------------------------------------------------------------------\n// vtkHardwareSelector methods\n// ----------------------------------------------------------------------------\n\nfunction vtkHardwareSelector(publicAPI, model) {\n  model.classHierarchy.push('vtkHardwareSelector');\n\n  // get the source data that is used for generating a selection. This\n  // must be called at least once before calling generateSelection. In\n  // raster based backends this method will capture the buffers. You can\n  // call this once and then make multiple calls to generateSelection.\n  publicAPI.getSourceDataAsync = async (renderer, fx1, fy1, fx2, fy2) => {};\n  publicAPI.selectAsync = async (renderer, fx1, fy1, fx2, fy2) => {\n    const srcData = await publicAPI.getSourceDataAsync(renderer, fx1, fy1, fx2, fy2);\n    if (srcData) {\n      return srcData.generateSelection(fx1, fy1, fx2, fy2);\n    }\n    return [];\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  fieldAssociation: FieldAssociations.FIELD_ASSOCIATION_CELLS,\n  captureZValues: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['fieldAssociation', 'captureZValues']);\n\n  // Object methods\n  vtkHardwareSelector(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkHardwareSelector');\n\n// ----------------------------------------------------------------------------\n\nvar vtkHardwareSelector$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkHardwareSelector$1 as default, extend, newInstance };\n", "/**\n * The (primary) property that describes the content of a selection\n * node's data. Other auxiliary description properties follow.\n * GLOBALIDS means that the selection list contains values from the\n * vtkDataSetAttribute array of the same name.\n * PEDIGREEIDS means that the selection list contains values from the\n * vtkDataSetAttribute array of the same name.\n * VALUES means the the selection list contains values from an\n * arbitrary attribute array (ignores any globalids attribute)\n * INDICES means that the selection list contains indexes into the\n * cell or point arrays.\n * FRUSTUM means the set of points and cells inside a frustum\n * LOCATIONS means the set of points and cells near a set of positions\n * THRESHOLDS means the points and cells with values within a set of ranges\n * getContentType() returns -1 if the content type is not set.\n */\n\n// Specify how data arrays can be used by data objects\nconst SelectionContent = {\n  GLOBALIDS: 0,\n  PEDIGREEIDS: 1,\n  VALUES: 2,\n  INDICES: 3,\n  FRUSTUM: 4,\n  LOCATIONS: 5,\n  THRESHOLDS: 6,\n  BLOCKS: 7,\n  QUERY: 8\n};\nconst SelectionField = {\n  CELL: 0,\n  POINT: 1,\n  FIELD: 2,\n  VERTEX: 3,\n  EDGE: 4,\n  ROW: 5\n};\nvar Constants = {\n  SelectionContent,\n  SelectionField\n};\n\nexport { SelectionContent, SelectionField, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './SelectionNode/Constants.js';\n\n// ----------------------------------------------------------------------------\n// vtkSelectionNode methods\n// ----------------------------------------------------------------------------\n\nfunction vtkSelectionNode(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkSelectionNode');\n  publicAPI.getBounds = () => model.points.getBounds();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  contentType: -1,\n  fieldType: -1,\n  properties: null,\n  selectionList: []\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  macro.obj(publicAPI, model);\n  model.properties = {};\n  macro.setGet(publicAPI, model, ['contentType', 'fieldType', 'properties', 'selectionList']);\n\n  // Object specific methods\n  vtkSelectionNode(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkSelectionNode');\n\n// ----------------------------------------------------------------------------\n\nvar vtkSelectionNode$1 = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkSelectionNode$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport Constants from './HardwareSelector/Constants.js';\nimport vtkHardwareSelector$1 from '../Core/HardwareSelector.js';\nimport vtkOpenGLFramebuffer from './Framebuffer.js';\nimport vtkSelectionNode from '../../Common/DataModel/SelectionNode.js';\nimport vtkDataSet from '../../Common/DataModel/DataSet.js';\n\nconst {\n  PassTypes\n} = Constants;\nconst {\n  SelectionContent,\n  SelectionField\n} = vtkSelectionNode;\nconst {\n  FieldAssociations\n} = vtkDataSet;\nconst {\n  vtkErrorMacro\n} = macro;\nconst idOffset = 1;\nfunction getInfoHash(info) {\n  return `${info.propID} ${info.compositeID}`;\n}\nfunction getAlpha(xx, yy, pb, area) {\n  if (!pb) {\n    return 0;\n  }\n  const offset = (yy * (area[2] - area[0] + 1) + xx) * 4;\n  return pb[offset + 3];\n}\nfunction convert(xx, yy, pb, area) {\n  if (!pb) {\n    return 0;\n  }\n\n  // console.log(caller);\n  // console.log('convert', xx, yy, pb, area);\n  const offset = (yy * (area[2] - area[0] + 1) + xx) * 4;\n  const r = pb[offset];\n  const g = pb[offset + 1];\n  const b = pb[offset + 2];\n  // console.log(b, g, r, (b * 256 + g) * 256 + r);\n  return (b * 256 + g) * 256 + r;\n}\nfunction getID(low24, high8) {\n  /* eslint-disable no-bitwise */\n  let val = high8;\n  val <<= 24;\n  val |= low24;\n  return val;\n  /* eslint-enable no-bitwise */\n}\n\nfunction getPixelInformationWithData(buffdata, inDisplayPosition, maxDistance, outSelectedPosition) {\n  // Base case\n  const maxDist = maxDistance < 0 ? 0 : maxDistance;\n  if (maxDist === 0) {\n    outSelectedPosition[0] = inDisplayPosition[0];\n    outSelectedPosition[1] = inDisplayPosition[1];\n    if (inDisplayPosition[0] < buffdata.area[0] || inDisplayPosition[0] > buffdata.area[2] || inDisplayPosition[1] < buffdata.area[1] || inDisplayPosition[1] > buffdata.area[3]) {\n      return null;\n    }\n\n    // offset inDisplayPosition based on the lower-left-corner of the Area.\n    const displayPosition = [inDisplayPosition[0] - buffdata.area[0], inDisplayPosition[1] - buffdata.area[1]];\n    const actorid = convert(displayPosition[0], displayPosition[1], buffdata.pixBuffer[PassTypes.ACTOR_PASS], buffdata.area);\n    if (actorid <= 0 || actorid - idOffset >= buffdata.props.length) {\n      // the pixel did not hit any actor.\n      return null;\n    }\n    const info = {};\n    info.valid = true;\n    info.propID = actorid - idOffset;\n    info.prop = buffdata.props[info.propID];\n    let compositeID = convert(displayPosition[0], displayPosition[1], buffdata.pixBuffer[PassTypes.COMPOSITE_INDEX_PASS], buffdata.area);\n    if (compositeID < 0 || compositeID > 0xffffff) {\n      compositeID = 0;\n    }\n    info.compositeID = compositeID - idOffset;\n    if (buffdata.captureZValues) {\n      const offset = (displayPosition[1] * (buffdata.area[2] - buffdata.area[0] + 1) + displayPosition[0]) * 4;\n      info.zValue = (256 * buffdata.zBuffer[offset] + buffdata.zBuffer[offset + 1]) / 65535.0;\n      info.displayPosition = inDisplayPosition;\n    }\n    if (buffdata.pixBuffer[PassTypes.ID_LOW24]) {\n      if (getAlpha(displayPosition[0], displayPosition[1], buffdata.pixBuffer[PassTypes.ID_LOW24], buffdata.area) === 0.0) {\n        return info;\n      }\n    }\n    const low24 = convert(displayPosition[0], displayPosition[1], buffdata.pixBuffer[PassTypes.ID_LOW24], buffdata.area);\n    const high24 = convert(displayPosition[0], displayPosition[1], buffdata.pixBuffer[PassTypes.ID_HIGH24], buffdata.area);\n    info.attributeID = getID(low24, high24);\n    return info;\n  }\n\n  // Iterate over successively growing boxes.\n  // They recursively call the base case to handle single pixels.\n  const dispPos = [inDisplayPosition[0], inDisplayPosition[1]];\n  const curPos = [0, 0];\n  let info = getPixelInformationWithData(buffdata, inDisplayPosition, 0, outSelectedPosition);\n  if (info && info.valid) {\n    return info;\n  }\n  for (let dist = 1; dist < maxDist; ++dist) {\n    // Vertical sides of box.\n    for (let y = dispPos[1] > dist ? dispPos[1] - dist : 0; y <= dispPos[1] + dist; ++y) {\n      curPos[1] = y;\n      if (dispPos[0] >= dist) {\n        curPos[0] = dispPos[0] - dist;\n        info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n        if (info && info.valid) {\n          return info;\n        }\n      }\n      curPos[0] = dispPos[0] + dist;\n      info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n      if (info && info.valid) {\n        return info;\n      }\n    }\n    // Horizontal sides of box.\n    for (let x = dispPos[0] >= dist ? dispPos[0] - (dist - 1) : 0; x <= dispPos[0] + (dist - 1); ++x) {\n      curPos[0] = x;\n      if (dispPos[1] >= dist) {\n        curPos[1] = dispPos[1] - dist;\n        info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n        if (info && info.valid) {\n          return info;\n        }\n      }\n      curPos[1] = dispPos[1] + dist;\n      info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n      if (info && info.valid) {\n        return info;\n      }\n    }\n  }\n\n  // nothing hit.\n  outSelectedPosition[0] = inDisplayPosition[0];\n  outSelectedPosition[1] = inDisplayPosition[1];\n  return null;\n}\n\n//-----------------------------------------------------------------------------\nfunction convertSelection(fieldassociation, dataMap, captureZValues, renderer, openGLRenderWindow) {\n  const sel = [];\n  let count = 0;\n  dataMap.forEach((value, key) => {\n    const child = vtkSelectionNode.newInstance();\n    child.setContentType(SelectionContent.INDICES);\n    switch (fieldassociation) {\n      case FieldAssociations.FIELD_ASSOCIATION_CELLS:\n        child.setFieldType(SelectionField.CELL);\n        break;\n      case FieldAssociations.FIELD_ASSOCIATION_POINTS:\n        child.setFieldType(SelectionField.POINT);\n        break;\n      default:\n        vtkErrorMacro('Unknown field association');\n    }\n    child.getProperties().propID = value.info.propID;\n    child.getProperties().prop = value.info.prop;\n    child.getProperties().compositeID = value.info.compositeID;\n    child.getProperties().attributeID = value.info.attributeID;\n    child.getProperties().pixelCount = value.pixelCount;\n    if (captureZValues) {\n      child.getProperties().displayPosition = [value.info.displayPosition[0], value.info.displayPosition[1], value.info.zValue];\n      child.getProperties().worldPosition = openGLRenderWindow.displayToWorld(value.info.displayPosition[0], value.info.displayPosition[1], value.info.zValue, renderer);\n    }\n    child.setSelectionList(value.attributeIDs);\n    sel[count] = child;\n    count++;\n  });\n  return sel;\n}\n\n//----------------------------------------------------------------------------\nfunction generateSelectionWithData(buffdata, fx1, fy1, fx2, fy2) {\n  const x1 = Math.floor(fx1);\n  const y1 = Math.floor(fy1);\n  const x2 = Math.floor(fx2);\n  const y2 = Math.floor(fy2);\n  const dataMap = new Map();\n  const outSelectedPosition = [0, 0];\n  for (let yy = y1; yy <= y2; yy++) {\n    for (let xx = x1; xx <= x2; xx++) {\n      const pos = [xx, yy];\n      const info = getPixelInformationWithData(buffdata, pos, 0, outSelectedPosition);\n      if (info && info.valid) {\n        const hash = getInfoHash(info);\n        if (!dataMap.has(hash)) {\n          dataMap.set(hash, {\n            info,\n            pixelCount: 1,\n            attributeIDs: [info.attributeID]\n          });\n        } else {\n          const dmv = dataMap.get(hash);\n          dmv.pixelCount++;\n          if (buffdata.captureZValues) {\n            if (info.zValue < dmv.info.zValue) {\n              dmv.info = info;\n            }\n          }\n          if (dmv.attributeIDs.indexOf(info.attributeID) === -1) {\n            dmv.attributeIDs.push(info.attributeID);\n          }\n        }\n      }\n    }\n  }\n  return convertSelection(buffdata.fieldAssociation, dataMap, buffdata.captureZValues, buffdata.renderer, buffdata.openGLRenderWindow);\n}\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLHardwareSelector methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLHardwareSelector(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLHardwareSelector');\n\n  //----------------------------------------------------------------------------\n  publicAPI.releasePixBuffers = () => {\n    model.rawPixBuffer = [];\n    model.pixBuffer = [];\n    model.zBuffer = null;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.beginSelection = () => {\n    model._openGLRenderer = model._openGLRenderWindow.getViewNodeFor(model._renderer, model._openGLRenderer);\n    model.maxAttributeId = 0;\n    const size = model._openGLRenderWindow.getSize();\n    if (!model.framebuffer) {\n      model.framebuffer = vtkOpenGLFramebuffer.newInstance();\n      model.framebuffer.setOpenGLRenderWindow(model._openGLRenderWindow);\n      model.framebuffer.saveCurrentBindingsAndBuffers();\n      model.framebuffer.create(size[0], size[1]);\n      // this calls model.framebuffer.bind()\n      model.framebuffer.populateFramebuffer();\n    } else {\n      model.framebuffer.setOpenGLRenderWindow(model._openGLRenderWindow);\n      model.framebuffer.saveCurrentBindingsAndBuffers();\n      const fbSize = model.framebuffer.getSize();\n      if (!fbSize || fbSize[0] !== size[0] || fbSize[1] !== size[1]) {\n        model.framebuffer.create(size[0], size[1]);\n        // this calls model.framebuffer.bind()\n        model.framebuffer.populateFramebuffer();\n      } else {\n        model.framebuffer.bind();\n      }\n    }\n    model._openGLRenderer.clear();\n    model._openGLRenderer.setSelector(publicAPI);\n    model.hitProps = {};\n    model.propPixels = {};\n    model.props = [];\n    publicAPI.releasePixBuffers();\n    if (model.fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_POINTS) {\n      const gl = model._openGLRenderWindow.getContext();\n      const originalBlending = gl.isEnabled(gl.BLEND);\n      gl.disable(gl.BLEND);\n      model._openGLRenderWindow.traverseAllPasses();\n      if (originalBlending) {\n        gl.enable(gl.BLEND);\n      }\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.endSelection = () => {\n    model.hitProps = {};\n    model._openGLRenderer.setSelector(null);\n    model.framebuffer.restorePreviousBindingsAndBuffers();\n  };\n  publicAPI.preCapturePass = () => {\n    const gl = model._openGLRenderWindow.getContext();\n    // Disable blending\n    model.originalBlending = gl.isEnabled(gl.BLEND);\n    gl.disable(gl.BLEND);\n  };\n  publicAPI.postCapturePass = () => {\n    const gl = model._openGLRenderWindow.getContext();\n    // Restore blending if it was enabled prior to the capture\n    if (model.originalBlending) {\n      gl.enable(gl.BLEND);\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.select = () => {\n    let sel = null;\n    if (publicAPI.captureBuffers()) {\n      sel = publicAPI.generateSelection(model.area[0], model.area[1], model.area[2], model.area[3]);\n      publicAPI.releasePixBuffers();\n    }\n    return sel;\n  };\n  publicAPI.getSourceDataAsync = async (renderer, fx1, fy1, fx2, fy2) => {\n    // assign the renderer\n    model._renderer = renderer;\n\n    // set area to all if no arguments provided\n    if (fx1 === undefined) {\n      const size = model._openGLRenderWindow.getSize();\n      publicAPI.setArea(0, 0, size[0] - 1, size[1] - 1);\n    } else {\n      publicAPI.setArea(fx1, fy1, fx2, fy2);\n    }\n    // just do capture buffers and package up the result\n    if (!publicAPI.captureBuffers()) {\n      return false;\n    }\n    const result = {\n      area: [...model.area],\n      pixBuffer: [...model.pixBuffer],\n      captureZValues: model.captureZValues,\n      zBuffer: model.zBuffer,\n      props: [...model.props],\n      fieldAssociation: model.fieldAssociation,\n      renderer,\n      openGLRenderWindow: model._openGLRenderWindow\n    };\n    result.generateSelection = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return generateSelectionWithData(result, ...args);\n    };\n    return result;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.captureBuffers = () => {\n    if (!model._renderer || !model._openGLRenderWindow) {\n      vtkErrorMacro('Renderer and view must be set before calling Select.');\n      return false;\n    }\n    model._openGLRenderer = model._openGLRenderWindow.getViewNodeFor(model._renderer, model._openGLRenderer);\n\n    // todo revisit making selection part of core\n    // then we can do this in core\n    model._openGLRenderWindow.getRenderable().preRender();\n\n    // int rgba[4];\n    // rwin.getColorBufferSizes(rgba);\n    // if (rgba[0] < 8 || rgba[1] < 8 || rgba[2] < 8) {\n    //   vtkErrorMacro(\"Color buffer depth must be at least 8 bit. \"\n    //     \"Currently: \" << rgba[0] << \", \" << rgba[1] << \", \" <<rgba[2]);\n    //   return false;\n    // }\n    publicAPI.invokeEvent({\n      type: 'StartEvent'\n    });\n\n    // Initialize renderer for selection.\n    // change the renderer's background to black, which will indicate a miss\n    model.originalBackground = model._renderer.getBackgroundByReference();\n    model._renderer.setBackground(0.0, 0.0, 0.0, 0.0);\n    const rpasses = model._openGLRenderWindow.getRenderPasses();\n    publicAPI.beginSelection();\n    const pixelBufferSavedPasses = [];\n    for (model.currentPass = PassTypes.MIN_KNOWN_PASS; model.currentPass <= PassTypes.MAX_KNOWN_PASS; model.currentPass++) {\n      if (publicAPI.passRequired(model.currentPass)) {\n        publicAPI.preCapturePass(model.currentPass);\n        if (model.captureZValues && model.currentPass === PassTypes.ACTOR_PASS && typeof rpasses[0].requestDepth === 'function' && typeof rpasses[0].getFramebuffer === 'function') {\n          rpasses[0].requestDepth();\n          model._openGLRenderWindow.traverseAllPasses();\n        } else {\n          model._openGLRenderWindow.traverseAllPasses();\n        }\n        publicAPI.postCapturePass(model.currentPass);\n        publicAPI.savePixelBuffer(model.currentPass);\n        pixelBufferSavedPasses.push(model.currentPass);\n      }\n    }\n\n    // Process pixel buffers\n    pixelBufferSavedPasses.forEach(pass => {\n      model.currentPass = pass;\n      publicAPI.processPixelBuffers();\n    });\n    model.currentPass = PassTypes.MAX_KNOWN_PASS;\n    publicAPI.endSelection();\n\n    // restore original background\n    model._renderer.setBackground(model.originalBackground);\n    publicAPI.invokeEvent({\n      type: 'EndEvent'\n    });\n\n    // restore image, not needed?\n    // model._openGLRenderWindow.traverseAllPasses();\n    return true;\n  };\n  publicAPI.processPixelBuffers = () => {\n    model.props.forEach((prop, index) => {\n      if (publicAPI.isPropHit(index)) {\n        prop.processSelectorPixelBuffers(publicAPI, model.propPixels[index]);\n      }\n    });\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.passRequired = pass => {\n    if (pass === PassTypes.ID_HIGH24) {\n      if (model.fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_POINTS) {\n        return model.maximumPointId > 0x00ffffff;\n      }\n      if (model.fieldAssociation === FieldAssociations.FIELD_ASSOCIATION_CELLS) {\n        return model.maximumCellId > 0x00ffffff;\n      }\n    }\n    return true;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.savePixelBuffer = passNo => {\n    model.pixBuffer[passNo] = model._openGLRenderWindow.getPixelData(model.area[0], model.area[1], model.area[2], model.area[3]);\n    if (!model.rawPixBuffer[passNo]) {\n      const size = (model.area[2] - model.area[0] + 1) * (model.area[3] - model.area[1] + 1) * 4;\n      model.rawPixBuffer[passNo] = new Uint8Array(size);\n      model.rawPixBuffer[passNo].set(model.pixBuffer[passNo]);\n    }\n    if (passNo === PassTypes.ACTOR_PASS) {\n      if (model.captureZValues) {\n        const rpasses = model._openGLRenderWindow.getRenderPasses();\n        if (typeof rpasses[0].requestDepth === 'function' && typeof rpasses[0].getFramebuffer === 'function') {\n          const fb = rpasses[0].getFramebuffer();\n          fb.saveCurrentBindingsAndBuffers();\n          fb.bind();\n          model.zBuffer = model._openGLRenderWindow.getPixelData(model.area[0], model.area[1], model.area[2], model.area[3]);\n          fb.restorePreviousBindingsAndBuffers();\n        }\n      }\n      publicAPI.buildPropHitList(model.rawPixBuffer[passNo]);\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.buildPropHitList = pixelbuffer => {\n    let offset = 0;\n    for (let yy = 0; yy <= model.area[3] - model.area[1]; yy++) {\n      for (let xx = 0; xx <= model.area[2] - model.area[0]; xx++) {\n        let val = convert(xx, yy, pixelbuffer, model.area);\n        if (val > 0) {\n          val--;\n          if (!(val in model.hitProps)) {\n            model.hitProps[val] = true;\n            model.propPixels[val] = [];\n          }\n          model.propPixels[val].push(offset * 4);\n        }\n        ++offset;\n      }\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.renderProp = prop => {\n    if (model.currentPass === PassTypes.ACTOR_PASS) {\n      publicAPI.setPropColorValueFromInt(model.props.length + idOffset);\n      model.props.push(prop);\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.renderCompositeIndex = index => {\n    if (model.currentPass === PassTypes.COMPOSITE_INDEX_PASS) {\n      publicAPI.setPropColorValueFromInt(index + idOffset);\n    }\n  };\n\n  //----------------------------------------------------------------------------\n  // TODO: make inline\n  publicAPI.renderAttributeId = attribid => {\n    if (attribid < 0) {\n      // negative attribid is valid. It happens when rendering higher order\n      // elements where new points are added for rendering smooth surfaces.\n      return;\n    }\n    model.maxAttributeId = attribid > model.maxAttributeId ? attribid : model.maxAttributeId;\n\n    // if (model.currentPass < PassTypes.ID_LOW24) {\n    //   return; // useless...\n    // }\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.passTypeToString = type => macro.enumToString(PassTypes, type);\n\n  //----------------------------------------------------------------------------\n  publicAPI.isPropHit = id => Boolean(model.hitProps[id]);\n  publicAPI.setPropColorValueFromInt = val => {\n    model.propColorValue[0] = val % 256 / 255.0;\n    model.propColorValue[1] = Math.floor(val / 256) % 256 / 255.0;\n    model.propColorValue[2] = Math.floor(val / 65536) % 256 / 255.0;\n  };\n\n  // info has\n  //   valid\n  //   propId\n  //   prop\n  //   compositeID\n  //   attributeID\n\n  //----------------------------------------------------------------------------\n  publicAPI.getPixelInformation = (inDisplayPosition, maxDistance, outSelectedPosition) => {\n    // Base case\n    const maxDist = maxDistance < 0 ? 0 : maxDistance;\n    console.log('getPixelInformation called', maxDist);\n    if (maxDist === 0) {\n      outSelectedPosition[0] = inDisplayPosition[0];\n      outSelectedPosition[1] = inDisplayPosition[1];\n      if (inDisplayPosition[0] < model.area[0] || inDisplayPosition[0] > model.area[2] || inDisplayPosition[1] < model.area[1] || inDisplayPosition[1] > model.area[3]) {\n        return null;\n      }\n      console.log(inDisplayPosition);\n      console.log(model.area);\n      // offset inDisplayPosition based on the lower-left-corner of the Area.\n      const displayPosition = [inDisplayPosition[0] - model.area[0], inDisplayPosition[1] - model.area[1]];\n      console.log('adjusted displayPosition', displayPosition);\n      const actorid = convert(displayPosition[0], displayPosition[1], model.pixBuffer[PassTypes.ACTOR_PASS], model.area);\n      console.log('actorid', actorid);\n      if (actorid <= 0 || actorid - idOffset >= model.props.length) {\n        // the pixel did not hit any actor.\n        return null;\n      }\n      const info = {};\n      info.valid = true;\n      info.propID = actorid - idOffset;\n      info.prop = model.props[info.propID];\n      let compositeID = convert(displayPosition[0], displayPosition[1], model.pixBuffer[PassTypes.COMPOSITE_INDEX_PASS], model.area);\n      if (compositeID < 0 || compositeID > 0xffffff) {\n        compositeID = 0;\n      }\n      info.compositeID = compositeID - idOffset;\n      if (model.captureZValues) {\n        const offset = (displayPosition[1] * (model.area[2] - model.area[0] + 1) + displayPosition[0]) * 4;\n        info.zValue = (256 * model.zBuffer[offset] + model.zBuffer[offset + 1]) / 65535.0;\n        info.displayPosition = inDisplayPosition;\n      }\n\n      // Skip attribute ids if alpha is zero (missed)\n      if (model.pixBuffer[PassTypes.ID_LOW24]) {\n        if (getAlpha(displayPosition[0], displayPosition[1], model.pixBuffer[PassTypes.ID_LOW24], model.area) === 0.0) {\n          return info;\n        }\n      }\n      const low24 = convert(displayPosition[0], displayPosition[1], model.pixBuffer[PassTypes.ID_LOW24], model.area);\n      const high24 = convert(displayPosition[0], displayPosition[1], model.pixBuffer[PassTypes.ID_HIGH24], model.area);\n      info.attributeID = getID(low24, high24);\n      return info;\n    }\n\n    // Iterate over successively growing boxes.\n    // They recursively call the base case to handle single pixels.\n    const dispPos = [inDisplayPosition[0], inDisplayPosition[1]];\n    const curPos = [0, 0];\n    let info = publicAPI.getPixelInformation(inDisplayPosition, 0, outSelectedPosition);\n    if (info && info.valid) {\n      return info;\n    }\n    for (let dist = 1; dist < maxDist; ++dist) {\n      // Vertical sides of box.\n      for (let y = dispPos[1] > dist ? dispPos[1] - dist : 0; y <= dispPos[1] + dist; ++y) {\n        curPos[1] = y;\n        if (dispPos[0] >= dist) {\n          curPos[0] = dispPos[0] - dist;\n          info = publicAPI.getPixelInformation(curPos, 0, outSelectedPosition);\n          if (info && info.valid) {\n            return info;\n          }\n        }\n        curPos[0] = dispPos[0] + dist;\n        info = publicAPI.getPixelInformation(curPos, 0, outSelectedPosition);\n        if (info && info.valid) {\n          return info;\n        }\n      }\n      // Horizontal sides of box.\n      for (let x = dispPos[0] >= dist ? dispPos[0] - (dist - 1) : 0; x <= dispPos[0] + (dist - 1); ++x) {\n        curPos[0] = x;\n        if (dispPos[1] >= dist) {\n          curPos[1] = dispPos[1] - dist;\n          info = publicAPI.getPixelInformation(curPos, 0, outSelectedPosition);\n          if (info && info.valid) {\n            return info;\n          }\n        }\n        curPos[1] = dispPos[1] + dist;\n        info = publicAPI.getPixelInformation(curPos, 0, outSelectedPosition);\n        if (info && info.valid) {\n          return info;\n        }\n      }\n    }\n\n    // nothing hit.\n    outSelectedPosition[0] = inDisplayPosition[0];\n    outSelectedPosition[1] = inDisplayPosition[1];\n    return null;\n  };\n\n  //----------------------------------------------------------------------------\n  publicAPI.generateSelection = (fx1, fy1, fx2, fy2) => {\n    const x1 = Math.floor(fx1);\n    const y1 = Math.floor(fy1);\n    const x2 = Math.floor(fx2);\n    const y2 = Math.floor(fy2);\n    const dataMap = new Map();\n    const outSelectedPosition = [0, 0];\n    for (let yy = y1; yy <= y2; yy++) {\n      for (let xx = x1; xx <= x2; xx++) {\n        const pos = [xx, yy];\n        const info = publicAPI.getPixelInformation(pos, 0, outSelectedPosition);\n        if (info && info.valid) {\n          const hash = getInfoHash(info);\n          if (!dataMap.has(hash)) {\n            dataMap.set(hash, {\n              info,\n              pixelCount: 1,\n              attributeIDs: [info.attributeID]\n            });\n          } else {\n            const dmv = dataMap.get(hash);\n            dmv.pixelCount++;\n            if (model.captureZValues) {\n              if (info.zValue < dmv.info.zValue) {\n                dmv.info = info;\n              }\n            }\n            if (dmv.attributeIDs.indexOf(info.attributeID) === -1) {\n              dmv.attributeIDs.push(info.attributeID);\n            }\n          }\n        }\n      }\n    }\n    return convertSelection(model.fieldAssociation, dataMap, model.captureZValues, model._renderer, model._openGLRenderWindow);\n  };\n  publicAPI.getRawPixelBuffer = passNo => model.rawPixBuffer[passNo];\n  publicAPI.getPixelBuffer = passNo => model.pixBuffer[passNo];\n\n  //----------------------------------------------------------------------------\n\n  publicAPI.attach = (openGLRenderWindow, renderer) => {\n    model._openGLRenderWindow = openGLRenderWindow;\n    model._renderer = renderer;\n  };\n\n  // override\n  const superSetArea = publicAPI.setArea;\n  publicAPI.setArea = function () {\n    if (superSetArea(...arguments)) {\n      model.area[0] = Math.floor(model.area[0]);\n      model.area[1] = Math.floor(model.area[1]);\n      model.area[2] = Math.floor(model.area[2]);\n      model.area[3] = Math.floor(model.area[3]);\n      return true;\n    }\n    return false;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  area: undefined,\n  // _renderer: null,\n  // _openGLRenderWindow: null,\n  // _openGLRenderer: null,\n  currentPass: -1,\n  propColorValue: null,\n  props: null,\n  maximumPointId: 0,\n  maximumCellId: 0,\n  idOffset: 1\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkHardwareSelector$1.extend(publicAPI, model, initialValues);\n  model.propColorValue = [0, 0, 0];\n  model.props = [];\n  if (!model.area) {\n    model.area = [0, 0, 0, 0];\n  }\n  macro.setGetArray(publicAPI, model, ['area'], 4);\n  macro.setGet(publicAPI, model, ['_renderer', 'currentPass', '_openGLRenderWindow', 'maximumPointId', 'maximumCellId']);\n  macro.setGetArray(publicAPI, model, ['propColorValue'], 3);\n  macro.moveToProtected(publicAPI, model, ['renderer', 'openGLRenderWindow']);\n  macro.event(publicAPI, model, 'event');\n\n  // Object methods\n  vtkOpenGLHardwareSelector(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLHardwareSelector');\n\n// ----------------------------------------------------------------------------\n\nvar vtkHardwareSelector = {\n  newInstance,\n  extend,\n  ...Constants\n};\n\nexport { vtkHardwareSelector as default, extend, newInstance };\n", "import Md5 from 'spark-md5';\nimport { m as macro } from '../../macros2.js';\nimport vtkShaderProgram from './ShaderProgram.js';\n\n// ----------------------------------------------------------------------------\n\nconst SET_GET_FIELDS = ['lastShaderProgramBound', 'context', '_openGLRenderWindow'];\n\n// ----------------------------------------------------------------------------\n// vtkShaderCache methods\n// ----------------------------------------------------------------------------\n\nfunction vtkShaderCache(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkShaderCache');\n  publicAPI.replaceShaderValues = (VSSource, FSSource, GSSource) => {\n    // first handle renaming any Fragment shader inputs\n    // if we have a geometry shader. By default fragment shaders\n    // assume their inputs come from a Vertex Shader. When we\n    // have a Geometry shader we rename the frament shader inputs\n    // to come from the geometry shader\n\n    let nFSSource = FSSource;\n    if (GSSource.length > 0) {\n      nFSSource = vtkShaderProgram.substitute(nFSSource, 'VSOut', 'GSOut').result;\n    }\n    const gl2 = model._openGLRenderWindow.getWebgl2();\n    let fragDepthString = '\\n';\n    let version = '#version 100\\n';\n    if (gl2) {\n      version = '#version 300 es\\n' + '#define attribute in\\n' + '#define textureCube texture\\n' + '#define texture2D texture\\n' + '#define textureCubeLod textureLod\\n' + '#define texture2DLod textureLod\\n';\n    } else {\n      model.context.getExtension('OES_standard_derivatives');\n      if (model.context.getExtension('EXT_frag_depth')) {\n        fragDepthString = '#extension GL_EXT_frag_depth : enable\\n';\n      }\n      if (model.context.getExtension('EXT_shader_texture_lod')) {\n        fragDepthString += '#extension GL_EXT_shader_texture_lod : enable\\n' + '#define textureCubeLod textureCubeLodEXT\\n' + '#define texture2DLod texture2DLodEXT';\n      }\n    }\n    nFSSource = vtkShaderProgram.substitute(nFSSource, '//VTK::System::Dec', [`${version}\\n`, gl2 ? '' : '#extension GL_OES_standard_derivatives : enable\\n', fragDepthString, '#ifdef GL_FRAGMENT_PRECISION_HIGH', 'precision highp float;', 'precision highp int;', '#else', 'precision mediump float;', 'precision mediump int;', '#endif']).result;\n    let nVSSource = vtkShaderProgram.substitute(VSSource, '//VTK::System::Dec', [`${version}\\n`, '#ifdef GL_FRAGMENT_PRECISION_HIGH', 'precision highp float;', 'precision highp int;', '#else', 'precision mediump float;', 'precision mediump int;', '#endif']).result;\n    if (gl2) {\n      nVSSource = vtkShaderProgram.substitute(nVSSource, 'varying', 'out').result;\n      nFSSource = vtkShaderProgram.substitute(nFSSource, 'varying', 'in').result;\n      let shaderOutputs = '';\n      let outputCount = 0;\n      while (nFSSource.includes(`gl_FragData[${outputCount}]`)) {\n        nFSSource = vtkShaderProgram.substitute(nFSSource, `gl_FragData\\\\[${outputCount}\\\\]`, `fragOutput${outputCount}`).result;\n        shaderOutputs += `layout(location = ${outputCount}) out vec4 fragOutput${outputCount};\\n`;\n        outputCount++;\n      }\n      nFSSource = vtkShaderProgram.substitute(nFSSource, '//VTK::Output::Dec', shaderOutputs).result;\n    }\n\n    // nFSSource = ShaderProgram.substitute(nFSSource, 'gl_FragData\\\\[0\\\\]',\n    //   'gl_FragColor').result;\n\n    const nGSSource = vtkShaderProgram.substitute(GSSource, '//VTK::System::Dec', version).result;\n    return {\n      VSSource: nVSSource,\n      FSSource: nFSSource,\n      GSSource: nGSSource\n    };\n  };\n\n  // return NULL if there is an issue\n  publicAPI.readyShaderProgramArray = (vertexCode, fragmentCode, geometryCode) => {\n    const data = publicAPI.replaceShaderValues(vertexCode, fragmentCode, geometryCode);\n    const shaderProgram = publicAPI.getShaderProgram(data.VSSource, data.FSSource, data.GSSource);\n    return publicAPI.readyShaderProgram(shaderProgram);\n  };\n  publicAPI.readyShaderProgram = program => {\n    if (!program) {\n      return null;\n    }\n\n    // compile if needed\n    if (!program.getCompiled() && !program.compileShader()) {\n      return null;\n    }\n\n    // bind if needed\n    if (!publicAPI.bindShaderProgram(program)) {\n      return null;\n    }\n    return program;\n  };\n  publicAPI.getShaderProgram = (vertexCode, fragmentCode, geometryCode) => {\n    // compute the MD5 and the check the map\n    const hashInput = `${vertexCode}${fragmentCode}${geometryCode}`;\n    const result = Md5.hash(hashInput);\n\n    // does it already exist?\n    if (!(result in model.shaderPrograms)) {\n      // create one\n      const sps = vtkShaderProgram.newInstance();\n      sps.setContext(model.context);\n      sps.getVertexShader().setSource(vertexCode);\n      sps.getFragmentShader().setSource(fragmentCode);\n      if (geometryCode) {\n        sps.getGeometryShader().setSource(geometryCode);\n      }\n      sps.setMd5Hash(result);\n      model.shaderPrograms[result] = sps;\n      return sps;\n    }\n    return model.shaderPrograms[result];\n  };\n  publicAPI.releaseGraphicsResources = win => {\n    // NOTE:\n    // In the current implementation as of October 26th, if a shader\n    // program is created by ShaderCache then it should make sure\n    // that it releases the graphics resources used by these programs.\n    // It is not wisely for callers to do that since then they would\n    // have to loop over all the programs were in use and invoke\n    // release graphics resources individually.\n\n    publicAPI.releaseCurrentShaderProgram();\n    Object.keys(model.shaderPrograms).map(key => model.shaderPrograms[key]).forEach(sp => sp.cleanup());\n    model.shaderPrograms = {};\n  };\n  publicAPI.releaseCurrentShaderProgram = () => {\n    // release prior shader\n    if (model.lastShaderProgramBound) {\n      model.lastShaderProgramBound.cleanup();\n      model.lastShaderProgramBound = null;\n    }\n  };\n  publicAPI.bindShaderProgram = program => {\n    if (model.lastShaderProgramBound === program) {\n      return 1;\n    }\n\n    // release prior program\n    if (model.lastShaderProgramBound) {\n      model.lastShaderProgramBound.release();\n    }\n    program.bind();\n    model.lastShaderProgramBound = program;\n    return 1;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  lastShaderProgramBound: null,\n  shaderPrograms: null,\n  context: null\n  // _openGLRenderWindow: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Internal objects\n  model.shaderPrograms = {};\n\n  // Build VTK API\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, SET_GET_FIELDS);\n  macro.moveToProtected(publicAPI, model, ['openGLRenderWindow']);\n\n  // Object methods\n  vtkShaderCache(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkShaderCache');\n\n// ----------------------------------------------------------------------------\n\nvar vtkShaderCache$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkShaderCache$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLTextureUnitManager methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLTextureUnitManager(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLTextureUnitManager');\n\n  // ----------------------------------------------------------------------------\n  // Description:\n  // Delete the allocation table and check if it is not called before\n  // all the texture units have been released.\n  publicAPI.deleteTable = () => {\n    for (let i = 0; i < model.numberOfTextureUnits; ++i) {\n      if (model.textureUnits[i] === true) {\n        vtkErrorMacro('some texture units  were not properly released');\n      }\n    }\n    model.textureUnits = [];\n    model.numberOfTextureUnits = 0;\n  };\n\n  // ----------------------------------------------------------------------------\n  publicAPI.setContext = ctx => {\n    if (model.context !== ctx) {\n      if (model.context !== 0) {\n        publicAPI.deleteTable();\n      }\n      model.context = ctx;\n      if (model.context) {\n        model.numberOfTextureUnits = ctx.getParameter(ctx.MAX_TEXTURE_IMAGE_UNITS);\n        for (let i = 0; i < model.numberOfTextureUnits; ++i) {\n          model.textureUnits[i] = false;\n        }\n      }\n      publicAPI.modified();\n    }\n  };\n\n  // ----------------------------------------------------------------------------\n  // Description:\n  // Reserve a texture unit. It returns its number.\n  // It returns -1 if the allocation failed (because there are no more\n  // texture units left).\n  // \\post valid_result: result==-1 || result>=0 && result<this->GetNumberOfTextureUnits())\n  // \\post allocated: result==-1 || this->IsAllocated(result)\n  publicAPI.allocate = () => {\n    for (let i = 0; i < model.numberOfTextureUnits; i++) {\n      if (!publicAPI.isAllocated(i)) {\n        model.textureUnits[i] = true;\n        return i;\n      }\n    }\n    return -1;\n  };\n  publicAPI.allocateUnit = unit => {\n    if (publicAPI.isAllocated(unit)) {\n      return -1;\n    }\n    model.textureUnits[unit] = true;\n    return unit;\n  };\n\n  // ----------------------------------------------------------------------------\n  // Description:\n  // Tell if texture unit `textureUnitId' is already allocated.\n  // \\pre valid_id_range : textureUnitId>=0 && textureUnitId<this->GetNumberOfTextureUnits()\n  publicAPI.isAllocated = textureUnitId => model.textureUnits[textureUnitId];\n\n  // ----------------------------------------------------------------------------\n  // Description:\n  // Release a texture unit.\n  // \\pre valid_id: textureUnitId>=0 && textureUnitId<this->GetNumberOfTextureUnits()\n  // \\pre allocated_id: this->IsAllocated(textureUnitId)\n  publicAPI.free = val => {\n    model.textureUnits[val] = false;\n  };\n  publicAPI.freeAll = () => {\n    for (let i = 0; i < model.numberOfTextureUnits; ++i) {\n      model.textureUnits[i] = false;\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  context: null,\n  numberOfTextureUnits: 0,\n  textureUnits: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  macro.obj(publicAPI, model);\n  model.textureUnits = [];\n\n  // Build VTK API\n  macro.get(publicAPI, model, ['numberOfTextureUnits']);\n  macro.setGet(publicAPI, model, ['context']);\n\n  // Object methods\n  vtkOpenGLTextureUnitManager(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLTextureUnitManager');\n\n// ----------------------------------------------------------------------------\n\nvar vtkTextureUnitManager = {\n  newInstance,\n  extend\n};\n\nexport { vtkTextureUnitManager as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkViewNode from './ViewNode.js';\n\n// ----------------------------------------------------------------------------\n// vtkRenderWindowViewNode is intended to be a superclass for all api specific\n// RenderWindows. It is intended to define a common API that can be invoked\n// upon an api specific render window and provide some common method\n// implementations. If your application requires communicating with an api specific\n// view try to limit such interactions to methods defined in this class.\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkRenderWindowViewNode methods\n// ----------------------------------------------------------------------------\n\nfunction vtkRenderWindowViewNode(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkRenderWindowViewNode');\n  publicAPI.getViewNodeFactory = () => null;\n  publicAPI.getAspectRatio = () => model.size[0] / model.size[1];\n  publicAPI.getAspectRatioForRenderer = renderer => {\n    const viewport = renderer.getViewportByReference();\n    return model.size[0] * (viewport[2] - viewport[0]) / ((viewport[3] - viewport[1]) * model.size[1]);\n  };\n  publicAPI.isInViewport = (x, y, viewport) => {\n    const vCoords = viewport.getViewportByReference();\n    const size = publicAPI.getFramebufferSize();\n    if (vCoords[0] * size[0] <= x && vCoords[2] * size[0] >= x && vCoords[1] * size[1] <= y && vCoords[3] * size[1] >= y) {\n      return true;\n    }\n    return false;\n  };\n  publicAPI.getViewportSize = viewport => {\n    const vCoords = viewport.getViewportByReference();\n    const size = publicAPI.getFramebufferSize();\n    return [(vCoords[2] - vCoords[0]) * size[0], (vCoords[3] - vCoords[1]) * size[1]];\n  };\n  publicAPI.getViewportCenter = viewport => {\n    const size = publicAPI.getViewportSize(viewport);\n    return [size[0] * 0.5, size[1] * 0.5];\n  };\n  publicAPI.displayToNormalizedDisplay = (x, y, z) => {\n    const size = publicAPI.getFramebufferSize();\n    return [x / size[0], y / size[1], z];\n  };\n  publicAPI.normalizedDisplayToDisplay = (x, y, z) => {\n    const size = publicAPI.getFramebufferSize();\n    return [x * size[0], y * size[1], z];\n  };\n  publicAPI.worldToView = (x, y, z, renderer) => renderer.worldToView(x, y, z);\n  publicAPI.viewToWorld = (x, y, z, renderer) => renderer.viewToWorld(x, y, z);\n  publicAPI.worldToDisplay = (x, y, z, renderer) => {\n    const val = renderer.worldToView(x, y, z);\n    const dims = publicAPI.getViewportSize(renderer);\n    const val2 = renderer.viewToProjection(val[0], val[1], val[2], dims[0] / dims[1]);\n    const val3 = renderer.projectionToNormalizedDisplay(val2[0], val2[1], val2[2]);\n    return publicAPI.normalizedDisplayToDisplay(val3[0], val3[1], val3[2]);\n  };\n  publicAPI.displayToWorld = (x, y, z, renderer) => {\n    const val = publicAPI.displayToNormalizedDisplay(x, y, z);\n    const val2 = renderer.normalizedDisplayToProjection(val[0], val[1], val[2]);\n    const dims = publicAPI.getViewportSize(renderer);\n    const val3 = renderer.projectionToView(val2[0], val2[1], val2[2], dims[0] / dims[1]);\n    return renderer.viewToWorld(val3[0], val3[1], val3[2]);\n  };\n  publicAPI.normalizedDisplayToViewport = (x, y, z, renderer) => {\n    let vCoords = renderer.getViewportByReference();\n    vCoords = publicAPI.normalizedDisplayToDisplay(vCoords[0], vCoords[1], 0.0);\n    const coords = publicAPI.normalizedDisplayToDisplay(x, y, z);\n    return [coords[0] - vCoords[0] - 0.5, coords[1] - vCoords[1] - 0.5, z];\n  };\n  publicAPI.viewportToNormalizedViewport = (x, y, z, renderer) => {\n    const size = publicAPI.getViewportSize(renderer);\n    if (size && size[0] !== 0 && size[1] !== 0) {\n      return [x / (size[0] - 1.0), y / (size[1] - 1.0), z];\n    }\n    return [x, y, z];\n  };\n  publicAPI.normalizedViewportToViewport = (x, y, z, renderer) => {\n    const size = publicAPI.getViewportSize(renderer);\n    return [x * (size[0] - 1.0), y * (size[1] - 1.0), z];\n  };\n  publicAPI.displayToLocalDisplay = (x, y, z) => {\n    const size = publicAPI.getFramebufferSize();\n    return [x, size[1] - y - 1, z];\n  };\n  publicAPI.viewportToNormalizedDisplay = (x, y, z, renderer) => {\n    let vCoords = renderer.getViewportByReference();\n    vCoords = publicAPI.normalizedDisplayToDisplay(vCoords[0], vCoords[1], 0.0);\n    const x2 = x + vCoords[0] + 0.5;\n    const y2 = y + vCoords[1] + 0.5;\n    return publicAPI.displayToNormalizedDisplay(x2, y2, z);\n  };\n  publicAPI.getComputedDevicePixelRatio = () => model.size[0] / publicAPI.getContainerSize()[0];\n  publicAPI.getContainerSize = () => {\n    macro.vtkErrorMacro('not implemented');\n  };\n  publicAPI.getPixelData = (x1, y1, x2, y2) => {\n    macro.vtkErrorMacro('not implemented');\n  };\n  publicAPI.createSelector = () => {\n    macro.vtkErrorMacro('not implemented');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  size: undefined,\n  selector: undefined\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  if (!model.size) {\n    model.size = [300, 300];\n  }\n  macro.getArray(publicAPI, model, ['size'], 2);\n  macro.get(publicAPI, model, ['selector']);\n\n  // Inheritance\n  vtkViewNode.extend(publicAPI, model, initialValues);\n\n  // Object methods\n  vtkRenderWindowViewNode(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkRenderWindowViewNode');\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderWindowViewNode$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkRenderWindowViewNode$1 as default, extend, newInstance };\n", "// This is used to access the underlying 3D context\nconst GET_UNDERLYING_CONTEXT = '__getUnderlyingContext';\nfunction createContextProxyHandler() {\n  const cache = new Map();\n  const getParameterHandler = {\n    apply(target, gl, args) {\n      if (cache.has(args[0])) {\n        return cache.get(args[0]);\n      }\n      return target.apply(gl, args);\n    }\n  };\n\n  // only supports single-value setters\n  function cachedSetterHandler(key) {\n    return {\n      apply(target, gl, args) {\n        cache.set(key, args[0]);\n        return target.apply(gl, args);\n      }\n    };\n  }\n\n  // When a property is accessed on the webgl context proxy,\n  // it's accessed is intercepted. If the property name matches\n  // any of the keys of `propHandlers`, then that handler is called\n  // with the following arguments: (gl, prop, receiver, propValue)\n  // - gl (WebGL2RenderingContext): the underlying webgl context\n  // - propName (string): the property name\n  // - receiver (Proxy): the webgl context proxy\n  // - propValue (unknown): the value of `gl[propName]`\n\n  const propHandlers = Object.create(null);\n\n  // Sets getParameter(property) as a cached getter proxy.\n  // propValue.bind(gl) is to avoid Illegal Invocation errors.\n  propHandlers.getParameter = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), getParameterHandler);\n\n  // Sets depthMask(flag) as a cached setter proxy.\n  propHandlers.depthMask = (gl, prop, receiver, propValue) => new Proxy(propValue.bind(gl), cachedSetterHandler(gl.DEPTH_WRITEMASK));\n  return {\n    get(gl, prop, receiver) {\n      if (prop === GET_UNDERLYING_CONTEXT) return () => gl;\n      let value = Reflect.get(gl, prop, gl);\n      if (value instanceof Function) {\n        // prevents Illegal Invocation errors\n        value = value.bind(gl);\n      }\n      const propHandler = propHandlers[prop];\n      if (propHandler) {\n        return propHandler(gl, prop, receiver, value);\n      }\n      return value;\n    }\n  };\n}\nvar ContextProxy = {\n  createContextProxyHandler\n};\n\nexport { GET_UNDERLYING_CONTEXT, createContextProxyHandler, ContextProxy as default };\n", "import { VtkDataTypes } from '../../Common/Core/DataArray/Constants.js';\nimport { m as macro } from '../../macros2.js';\nimport { registerViewConstructor } from '../Core/RenderWindow.js';\nimport vtkForwardPass from './ForwardPass.js';\nimport vtkHardwareSelector from './HardwareSelector.js';\nimport vtkShaderCache from './ShaderCache.js';\nimport vtkTextureUnitManager from './TextureUnitManager.js';\nimport vtkViewNodeFactory, { registerOverride } from './ViewNodeFactory.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkRenderWindowViewNode from '../SceneGraph/RenderWindowViewNode.js';\nimport { createContextProxyHandler } from './RenderWindow/ContextProxy.js';\n\nconst {\n  vtkDebugMacro,\n  vtkErrorMacro\n} = macro;\nconst SCREENSHOT_PLACEHOLDER = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%'\n};\nconst parentMethodsToProxy = ['activateTexture', 'deactivateTexture', 'disableCullFace', 'enableCullFace', 'get3DContext', 'getActiveFramebuffer', 'getContext', 'getDefaultTextureByteSize', 'getDefaultTextureInternalFormat', 'getDefaultToWebgl2', 'getGLInformations', 'getGraphicsMemoryInfo', 'getGraphicsResourceForObject', 'getHardwareMaximumLineWidth', 'getPixelData', 'getShaderCache', 'getTextureUnitForTexture', 'getTextureUnitManager', 'getWebgl2', 'makeCurrent', 'releaseGraphicsResources', 'registerGraphicsResourceUser', 'unregisterGraphicsResourceUser', 'restoreContext', 'setActiveFramebuffer', 'setContext', 'setDefaultToWebgl2', 'setGraphicsResourceForObject'];\nfunction checkRenderTargetSupport(gl, format, type) {\n  // create temporary frame buffer and texture\n  const framebuffer = gl.createFramebuffer();\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, 2, 2, 0, format, type, null);\n  gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n  gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n\n  // check frame buffer status\n  const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\n  // clean up\n  gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  gl.bindTexture(gl.TEXTURE_2D, null);\n  return status === gl.FRAMEBUFFER_COMPLETE;\n}\n\n// ----------------------------------------------------------------------------\n// Monitor the usage of GL context across vtkOpenGLRenderWindow instances\n// ----------------------------------------------------------------------------\n\nlet GL_CONTEXT_COUNT = 0;\nconst GL_CONTEXT_LISTENERS = [];\nfunction createGLContext() {\n  GL_CONTEXT_COUNT++;\n  GL_CONTEXT_LISTENERS.forEach(cb => cb(GL_CONTEXT_COUNT));\n}\nfunction deleteGLContext() {\n  GL_CONTEXT_COUNT--;\n  GL_CONTEXT_LISTENERS.forEach(cb => cb(GL_CONTEXT_COUNT));\n}\nfunction pushMonitorGLContextCount(cb) {\n  GL_CONTEXT_LISTENERS.push(cb);\n}\nfunction popMonitorGLContextCount(cb) {\n  return GL_CONTEXT_LISTENERS.pop();\n}\nfunction _preventDefault(e) {\n  e.preventDefault();\n}\n\n// ----------------------------------------------------------------------------\n// vtkOpenGLRenderWindow methods\n// ----------------------------------------------------------------------------\n\nfunction vtkOpenGLRenderWindow(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkOpenGLRenderWindow');\n\n  // Only create a cachingContextHandler if needed\n  let cachingContextHandler;\n  function getCachingContextHandler() {\n    if (!cachingContextHandler) {\n      cachingContextHandler = createContextProxyHandler();\n    }\n    return cachingContextHandler;\n  }\n  publicAPI.getViewNodeFactory = () => model.myFactory;\n\n  // prevent default context lost handler\n  model.canvas.addEventListener('webglcontextlost', _preventDefault, false);\n  model.canvas.addEventListener('webglcontextrestored', publicAPI.restoreContext, false);\n\n  // Auto update style\n  const previousSize = [0, 0];\n  function updateWindow() {\n    // Canvas size\n    if (model.renderable) {\n      if (model.size[0] !== previousSize[0] || model.size[1] !== previousSize[1]) {\n        previousSize[0] = model.size[0];\n        previousSize[1] = model.size[1];\n        model.canvas.setAttribute('width', model.size[0]);\n        model.canvas.setAttribute('height', model.size[1]);\n      }\n    }\n\n    // ImageStream size\n    if (model.viewStream) {\n      // If same size that's a NoOp\n      model.viewStream.setSize(model.size[0], model.size[1]);\n    }\n\n    // Offscreen ?\n    model.canvas.style.display = model.useOffScreen ? 'none' : 'block';\n\n    // Cursor type\n    if (model.el) {\n      model.el.style.cursor = model.cursorVisibility ? model.cursor : 'none';\n    }\n\n    // Invalidate cached DOM container size\n    model.containerSize = null;\n  }\n  publicAPI.onModified(updateWindow);\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (!model.renderable) {\n        return;\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNodes(model.renderable.getRenderersByReference());\n      publicAPI.addMissingNodes(model.renderable.getChildRenderWindowsByReference());\n      publicAPI.removeUnusedNodes();\n      publicAPI.initialize();\n      model.children.forEach(child => {\n        // Children can be openGl renderer or openGl render windows\n        // Only openGl renderers have a method setOpenGLRenderWindow\n        child.setOpenGLRenderWindow?.(publicAPI);\n      });\n    }\n  };\n  publicAPI.initialize = () => {\n    if (!model.initialized) {\n      // Set root parent if there is one\n      // Some methods of the root parent are proxied (see parentMethodsToProxy)\n      model.rootOpenGLRenderWindow = publicAPI.getLastAncestorOfType('vtkOpenGLRenderWindow');\n      if (model.rootOpenGLRenderWindow) {\n        // Initialize a 2D context that will copy the content of the root parent\n        model.context2D = publicAPI.get2DContext();\n      } else {\n        // Initialize a 3D context that may be used by child render windows\n        model.context = publicAPI.get3DContext();\n        publicAPI.resizeFromChildRenderWindows();\n        if (model.context) {\n          createGLContext();\n        }\n        model.textureUnitManager = vtkTextureUnitManager.newInstance();\n        model.textureUnitManager.setContext(model.context);\n        model.shaderCache.setContext(model.context);\n        // initialize blending for transparency\n        const gl = model.context;\n        gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.depthFunc(gl.LEQUAL);\n        gl.enable(gl.BLEND);\n      }\n      model.initialized = true;\n    }\n  };\n  publicAPI.makeCurrent = () => {\n    model.context.makeCurrent();\n  };\n  publicAPI.setContainer = el => {\n    if (model.el && model.el !== el) {\n      if (model.canvas.parentNode !== model.el) {\n        vtkErrorMacro('Error: canvas parent node does not match container');\n      }\n\n      // Remove canvas from previous container\n      model.el.removeChild(model.canvas);\n\n      // If the renderer has previously added\n      // a background image, remove it from the DOM.\n      if (model.el.contains(model.bgImage)) {\n        model.el.removeChild(model.bgImage);\n      }\n    }\n    if (model.el !== el) {\n      model.el = el;\n      if (model.el) {\n        model.el.appendChild(model.canvas);\n\n        // If the renderer is set to use a background\n        // image, attach it to the DOM.\n        if (model.useBackgroundImage) {\n          model.el.appendChild(model.bgImage);\n        }\n      }\n\n      // Trigger modified()\n      publicAPI.modified();\n    }\n  };\n  publicAPI.getContainer = () => model.el;\n  publicAPI.getContainerSize = () => {\n    if (!model.containerSize && model.el) {\n      const {\n        width,\n        height\n      } = model.el.getBoundingClientRect();\n      model.containerSize = [width, height];\n    }\n    return model.containerSize || model.size;\n  };\n  publicAPI.getFramebufferSize = () => {\n    const fbSize = model.activeFramebuffer?.getSize();\n    return fbSize || model.size;\n  };\n  publicAPI.getPixelData = (x1, y1, x2, y2) => {\n    const pixels = new Uint8Array((x2 - x1 + 1) * (y2 - y1 + 1) * 4);\n    model.context.readPixels(x1, y1, x2 - x1 + 1, y2 - y1 + 1, model.context.RGBA, model.context.UNSIGNED_BYTE, pixels);\n    return pixels;\n  };\n  publicAPI.get3DContext = function () {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      preserveDrawingBuffer: false,\n      depth: true,\n      alpha: true,\n      powerPreference: 'high-performance'\n    };\n    let result = null;\n    const webgl2Supported = typeof WebGL2RenderingContext !== 'undefined';\n    model.webgl2 = false;\n    if (model.defaultToWebgl2 && webgl2Supported) {\n      result = model.canvas.getContext('webgl2', options);\n      if (result) {\n        model.webgl2 = true;\n        vtkDebugMacro('using webgl2');\n      }\n    }\n    if (!result) {\n      vtkDebugMacro('using webgl1');\n      result = model.canvas.getContext('webgl', options) || model.canvas.getContext('experimental-webgl', options);\n    }\n    if (!result) {\n      vtkErrorMacro('no webgl context');\n    }\n    return new Proxy(result, getCachingContextHandler());\n  };\n  publicAPI.get2DContext = function () {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return model.canvas.getContext('2d', options);\n  };\n  publicAPI.restoreContext = () => {\n    const rp = vtkRenderPass.newInstance();\n    rp.setCurrentOperation('Release');\n    rp.traverse(publicAPI, null);\n  };\n  publicAPI.activateTexture = texture => {\n    // Only add if it isn't already there\n    const result = model._textureResourceIds.get(texture);\n    if (result !== undefined) {\n      model.context.activeTexture(model.context.TEXTURE0 + result);\n      return;\n    }\n    const activeUnit = publicAPI.getTextureUnitManager().allocate();\n    if (activeUnit < 0) {\n      vtkErrorMacro('Hardware does not support the number of textures defined.');\n      return;\n    }\n    model._textureResourceIds.set(texture, activeUnit);\n    model.context.activeTexture(model.context.TEXTURE0 + activeUnit);\n  };\n  publicAPI.deactivateTexture = texture => {\n    // Only deactivate if it isn't already there\n    const result = model._textureResourceIds.get(texture);\n    if (result !== undefined) {\n      publicAPI.getTextureUnitManager().free(result);\n      model._textureResourceIds.delete(texture);\n    }\n  };\n  publicAPI.getTextureUnitForTexture = texture => {\n    const result = model._textureResourceIds.get(texture);\n    if (result !== undefined) {\n      return result;\n    }\n    return -1;\n  };\n  publicAPI.getDefaultTextureByteSize = function (vtkType) {\n    let oglNorm16Ext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let useHalfFloat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (model.webgl2) {\n      switch (vtkType) {\n        case VtkDataTypes.CHAR:\n        case VtkDataTypes.SIGNED_CHAR:\n        case VtkDataTypes.UNSIGNED_CHAR:\n          return 1;\n        case oglNorm16Ext:\n        case useHalfFloat:\n        case VtkDataTypes.UNSIGNED_SHORT:\n        case VtkDataTypes.SHORT:\n        case VtkDataTypes.VOID:\n          // Used for unsigned int depth\n          return 2;\n        default:\n          // For all other cases, assume float\n          return 4;\n      }\n    }\n\n    // webgl1 type support is limited to 1 byte\n    return 1;\n  };\n  publicAPI.getDefaultTextureInternalFormat = function (vtktype, numComps) {\n    let oglNorm16Ext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let useHalfFloat = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    if (model.webgl2) {\n      switch (vtktype) {\n        case VtkDataTypes.UNSIGNED_CHAR:\n          switch (numComps) {\n            case 1:\n              return model.context.R8;\n            case 2:\n              return model.context.RG8;\n            case 3:\n              return model.context.RGB8;\n            case 4:\n            default:\n              return model.context.RGBA8;\n          }\n        case oglNorm16Ext && !useHalfFloat && VtkDataTypes.UNSIGNED_SHORT:\n          switch (numComps) {\n            case 1:\n              return oglNorm16Ext.R16_EXT;\n            case 2:\n              return oglNorm16Ext.RG16_EXT;\n            case 3:\n              return oglNorm16Ext.RGB16_EXT;\n            case 4:\n            default:\n              return oglNorm16Ext.RGBA16_EXT;\n          }\n        // prioritize norm16 over float\n        case oglNorm16Ext && !useHalfFloat && VtkDataTypes.SHORT:\n          switch (numComps) {\n            case 1:\n              return oglNorm16Ext.R16_SNORM_EXT;\n            case 2:\n              return oglNorm16Ext.RG16_SNORM_EXT;\n            case 3:\n              return oglNorm16Ext.RGB16_SNORM_EXT;\n            case 4:\n            default:\n              return oglNorm16Ext.RGBA16_SNORM_EXT;\n          }\n        case VtkDataTypes.UNSIGNED_SHORT:\n        case VtkDataTypes.SHORT:\n        case VtkDataTypes.FLOAT:\n        default:\n          // useHalfFloat tells us if the texture can be accurately\n          // rendered with 16 bits or not.\n          switch (numComps) {\n            case 1:\n              return useHalfFloat ? model.context.R16F : model.context.R32F;\n            case 2:\n              return useHalfFloat ? model.context.RG16F : model.context.RG32F;\n            case 3:\n              return useHalfFloat ? model.context.RGB16F : model.context.RGB32F;\n            case 4:\n            default:\n              return useHalfFloat ? model.context.RGBA16F : model.context.RGBA32F;\n          }\n      }\n    }\n\n    // webgl1 only supports four types\n    switch (numComps) {\n      case 1:\n        return model.context.LUMINANCE;\n      case 2:\n        return model.context.LUMINANCE_ALPHA;\n      case 3:\n        return model.context.RGB;\n      case 4:\n      default:\n        return model.context.RGBA;\n    }\n  };\n  publicAPI.setBackgroundImage = img => {\n    model.bgImage.src = img.src;\n  };\n  publicAPI.setUseBackgroundImage = value => {\n    model.useBackgroundImage = value;\n\n    // Add or remove the background image from the\n    // DOM as specified.\n    if (model.useBackgroundImage && !model.el.contains(model.bgImage)) {\n      model.el.appendChild(model.bgImage);\n    } else if (!model.useBackgroundImage && model.el.contains(model.bgImage)) {\n      model.el.removeChild(model.bgImage);\n    }\n  };\n  function getCanvasDataURL() {\n    let format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : model.imageFormat;\n    // Copy current canvas to not modify the original\n    const temporaryCanvas = document.createElement('canvas');\n    const temporaryContext = temporaryCanvas.getContext('2d');\n    temporaryCanvas.width = model.canvas.width;\n    temporaryCanvas.height = model.canvas.height;\n    temporaryContext.drawImage(model.canvas, 0, 0);\n\n    // Get current client rect to place canvas\n    const mainBoundingClientRect = model.canvas.getBoundingClientRect();\n    const renderWindow = model.renderable;\n    const renderers = renderWindow.getRenderers();\n    renderers.forEach(renderer => {\n      const viewProps = renderer.getViewProps();\n      viewProps.forEach(viewProp => {\n        // Check if the prop has a container that should have canvas\n        if (viewProp.getContainer) {\n          const container = viewProp.getContainer();\n          const canvasList = container.getElementsByTagName('canvas');\n          // Go throughout all canvas and copy it into temporary main canvas\n          for (let i = 0; i < canvasList.length; i++) {\n            const currentCanvas = canvasList[i];\n            const boundingClientRect = currentCanvas.getBoundingClientRect();\n            const newXPosition = boundingClientRect.x - mainBoundingClientRect.x;\n            const newYPosition = boundingClientRect.y - mainBoundingClientRect.y;\n            temporaryContext.drawImage(currentCanvas, newXPosition, newYPosition);\n          }\n        }\n      });\n    });\n    const screenshot = temporaryCanvas.toDataURL(format);\n    temporaryCanvas.remove();\n    publicAPI.invokeImageReady(screenshot);\n  }\n  publicAPI.captureNextImage = function () {\n    let format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'image/png';\n    let {\n      resetCamera = false,\n      size = null,\n      scale = 1\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (model.deleted) {\n      return null;\n    }\n    model.imageFormat = format;\n    const previous = model.notifyStartCaptureImage;\n    model.notifyStartCaptureImage = true;\n    model._screenshot = {\n      size: !!size || scale !== 1 ? size || model.size.map(val => val * scale) : null\n    };\n    return new Promise((resolve, reject) => {\n      const subscription = publicAPI.onImageReady(imageURL => {\n        if (model._screenshot.size === null) {\n          model.notifyStartCaptureImage = previous;\n          subscription.unsubscribe();\n          if (model._screenshot.placeHolder) {\n            // resize the main canvas back to its original size and show it\n            model.size = model._screenshot.originalSize;\n\n            // process the resize\n            publicAPI.modified();\n\n            // restore the saved camera parameters, if applicable\n            if (model._screenshot.cameras) {\n              model._screenshot.cameras.forEach(_ref => {\n                let {\n                  restoreParamsFn,\n                  arg\n                } = _ref;\n                return restoreParamsFn(arg);\n              });\n            }\n\n            // Trigger a render at the original size\n            publicAPI.traverseAllPasses();\n\n            // Remove and clean up the placeholder, revealing the original\n            model.el.removeChild(model._screenshot.placeHolder);\n            model._screenshot.placeHolder.remove();\n            model._screenshot = null;\n          }\n          resolve(imageURL);\n        } else {\n          // Create a placeholder image overlay while we resize and render\n          const tmpImg = document.createElement('img');\n          tmpImg.style = SCREENSHOT_PLACEHOLDER;\n          tmpImg.src = imageURL;\n          model._screenshot.placeHolder = model.el.appendChild(tmpImg);\n\n          // hide the main canvas\n          model.canvas.style.display = 'none';\n\n          // remember the main canvas original size, then resize it\n          model._screenshot.originalSize = model.size;\n          model.size = model._screenshot.size;\n          model.rootOpenGLRenderWindow?.resizeFromChildRenderWindows();\n          model._screenshot.size = null;\n\n          // process the resize\n          publicAPI.modified();\n          if (resetCamera) {\n            const isUserResetCamera = resetCamera !== true;\n\n            // If resetCamera was requested, we first save camera parameters\n            // from all the renderers, so we can restore them later\n            model._screenshot.cameras = model.renderable.getRenderers().map(renderer => {\n              const camera = renderer.getActiveCamera();\n              const params = camera.get('focalPoint', 'position', 'parallelScale');\n              return {\n                resetCameraArgs: isUserResetCamera ? {\n                  renderer\n                } : undefined,\n                resetCameraFn: isUserResetCamera ? resetCamera : renderer.resetCamera,\n                restoreParamsFn: camera.set,\n                // \"clone\" the params so we don't keep refs to properties\n                arg: JSON.parse(JSON.stringify(params))\n              };\n            });\n\n            // Perform the resetCamera() on each renderer only after capturing\n            // the params from all active cameras, in case there happen to be\n            // linked cameras among the renderers.\n            model._screenshot.cameras.forEach(_ref2 => {\n              let {\n                resetCameraFn,\n                resetCameraArgs\n              } = _ref2;\n              return resetCameraFn(resetCameraArgs);\n            });\n          }\n\n          // Trigger a render at the custom size\n          publicAPI.traverseAllPasses();\n        }\n      });\n    });\n  };\n  let hardwareMaximumLineWidth;\n  publicAPI.getHardwareMaximumLineWidth = () => {\n    // We cache the result of this function because `getParameter` is slow\n    if (hardwareMaximumLineWidth != null) {\n      return hardwareMaximumLineWidth;\n    }\n    const gl = publicAPI.get3DContext();\n    const lineWidthRange = gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE);\n    hardwareMaximumLineWidth = lineWidthRange[1];\n    return lineWidthRange[1];\n  };\n  publicAPI.getGLInformations = () => {\n    if (model._glInformation) {\n      return model._glInformation;\n    }\n    const gl = publicAPI.get3DContext();\n    const glTextureFloat = gl.getExtension('OES_texture_float');\n    const glTextureHalfFloat = gl.getExtension('OES_texture_half_float');\n    const glDebugRendererInfo = gl.getExtension('WEBGL_debug_renderer_info');\n    const glDrawBuffers = gl.getExtension('WEBGL_draw_buffers');\n    const glAnisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n    const params = [['Max Vertex Attributes', 'MAX_VERTEX_ATTRIBS', gl.getParameter(gl.MAX_VERTEX_ATTRIBS)], ['Max Varying Vectors', 'MAX_VARYING_VECTORS', gl.getParameter(gl.MAX_VARYING_VECTORS)], ['Max Vertex Uniform Vectors', 'MAX_VERTEX_UNIFORM_VECTORS', gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS)], ['Max Fragment Uniform Vectors', 'MAX_FRAGMENT_UNIFORM_VECTORS', gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS)], ['Max Fragment Texture Image Units', 'MAX_TEXTURE_IMAGE_UNITS', gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)], ['Max Vertex Texture Image Units', 'MAX_VERTEX_TEXTURE_IMAGE_UNITS', gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)], ['Max Combined Texture Image Units', 'MAX_COMBINED_TEXTURE_IMAGE_UNITS', gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS)], ['Max 2D Texture Size', 'MAX_TEXTURE_SIZE', gl.getParameter(gl.MAX_TEXTURE_SIZE)], ['Max Cube Texture Size', 'MAX_CUBE_MAP_TEXTURE_SIZE', gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE)], ['Max Texture Anisotropy', 'MAX_TEXTURE_MAX_ANISOTROPY_EXT', glAnisotropic && gl.getParameter(glAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)], ['Point Size Range', 'ALIASED_POINT_SIZE_RANGE', gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE).join(' - ')], ['Line Width Range', 'ALIASED_LINE_WIDTH_RANGE', gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE).join(' - ')], ['Max Viewport Dimensions', 'MAX_VIEWPORT_DIMS', gl.getParameter(gl.MAX_VIEWPORT_DIMS).join(' - ')], ['Max Renderbuffer Size', 'MAX_RENDERBUFFER_SIZE', gl.getParameter(gl.MAX_RENDERBUFFER_SIZE)], ['Framebuffer Red Bits', 'RED_BITS', gl.getParameter(gl.RED_BITS)], ['Framebuffer Green Bits', 'GREEN_BITS', gl.getParameter(gl.GREEN_BITS)], ['Framebuffer Blue Bits', 'BLUE_BITS', gl.getParameter(gl.BLUE_BITS)], ['Framebuffer Alpha Bits', 'ALPHA_BITS', gl.getParameter(gl.ALPHA_BITS)], ['Framebuffer Depth Bits', 'DEPTH_BITS', gl.getParameter(gl.DEPTH_BITS)], ['Framebuffer Stencil Bits', 'STENCIL_BITS', gl.getParameter(gl.STENCIL_BITS)], ['Framebuffer Subpixel Bits', 'SUBPIXEL_BITS', gl.getParameter(gl.SUBPIXEL_BITS)], ['MSAA Samples', 'SAMPLES', gl.getParameter(gl.SAMPLES)], ['MSAA Sample Buffers', 'SAMPLE_BUFFERS', gl.getParameter(gl.SAMPLE_BUFFERS)], ['Supported Formats for UByte Render Targets     ', 'UNSIGNED_BYTE RENDER TARGET FORMATS', [glTextureFloat && checkRenderTargetSupport(gl, gl.RGBA, gl.UNSIGNED_BYTE) ? 'RGBA' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.RGB, gl.UNSIGNED_BYTE) ? 'RGB' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.LUMINANCE, gl.UNSIGNED_BYTE) ? 'LUMINANCE' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.ALPHA, gl.UNSIGNED_BYTE) ? 'ALPHA' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.LUMINANCE_ALPHA, gl.UNSIGNED_BYTE) ? 'LUMINANCE_ALPHA' : ''].join(' ')], ['Supported Formats for Half Float Render Targets', 'HALF FLOAT RENDER TARGET FORMATS', [glTextureHalfFloat && checkRenderTargetSupport(gl, gl.RGBA, glTextureHalfFloat.HALF_FLOAT_OES) ? 'RGBA' : '', glTextureHalfFloat && checkRenderTargetSupport(gl, gl.RGB, glTextureHalfFloat.HALF_FLOAT_OES) ? 'RGB' : '', glTextureHalfFloat && checkRenderTargetSupport(gl, gl.LUMINANCE, glTextureHalfFloat.HALF_FLOAT_OES) ? 'LUMINANCE' : '', glTextureHalfFloat && checkRenderTargetSupport(gl, gl.ALPHA, glTextureHalfFloat.HALF_FLOAT_OES) ? 'ALPHA' : '', glTextureHalfFloat && checkRenderTargetSupport(gl, gl.LUMINANCE_ALPHA, glTextureHalfFloat.HALF_FLOAT_OES) ? 'LUMINANCE_ALPHA' : ''].join(' ')], ['Supported Formats for Full Float Render Targets', 'FLOAT RENDER TARGET FORMATS', [glTextureFloat && checkRenderTargetSupport(gl, gl.RGBA, gl.FLOAT) ? 'RGBA' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.RGB, gl.FLOAT) ? 'RGB' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.LUMINANCE, gl.FLOAT) ? 'LUMINANCE' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.ALPHA, gl.FLOAT) ? 'ALPHA' : '', glTextureFloat && checkRenderTargetSupport(gl, gl.LUMINANCE_ALPHA, gl.FLOAT) ? 'LUMINANCE_ALPHA' : ''].join(' ')], ['Max Multiple Render Targets Buffers', 'MAX_DRAW_BUFFERS_WEBGL', glDrawBuffers ? gl.getParameter(glDrawBuffers.MAX_DRAW_BUFFERS_WEBGL) : 0], ['High Float Precision in Vertex Shader', 'HIGH_FLOAT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).rangeMax, '</sup>)'].join('')], ['Medium Float Precision in Vertex Shader', 'MEDIUM_FLOAT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).rangeMax, '</sup>)'].join('')], ['Low Float Precision in Vertex Shader', 'LOW_FLOAT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).rangeMax, '</sup>)'].join('')], ['High Float Precision in Fragment Shader', 'HIGH_FLOAT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).rangeMax, '</sup>)'].join('')], ['Medium Float Precision in Fragment Shader', 'MEDIUM_FLOAT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).rangeMax, '</sup>)'].join('')], ['Low Float Precision in Fragment Shader', 'LOW_FLOAT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).rangeMax, '</sup>)'].join('')], ['High Int Precision in Vertex Shader', 'HIGH_INT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).rangeMax, '</sup>)'].join('')], ['Medium Int Precision in Vertex Shader', 'MEDIUM_INT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).rangeMax, '</sup>)'].join('')], ['Low Int Precision in Vertex Shader', 'LOW_INT VERTEX_SHADER', [gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).rangeMax, '</sup>)'].join('')], ['High Int Precision in Fragment Shader', 'HIGH_INT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).rangeMax, '</sup>)'].join('')], ['Medium Int Precision in Fragment Shader', 'MEDIUM_INT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).rangeMax, '</sup>)'].join('')], ['Low Int Precision in Fragment Shader', 'LOW_INT FRAGMENT_SHADER', [gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).precision, ' (-2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).rangeMin, '</sup> - 2<sup>', gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).rangeMax, '</sup>)'].join('')], ['Supported Extensions', 'EXTENSIONS', gl.getSupportedExtensions().join('<br/>\\t\\t\\t\\t\\t    ')], ['WebGL Renderer', 'RENDERER', gl.getParameter(gl.RENDERER)], ['WebGL Vendor', 'VENDOR', gl.getParameter(gl.VENDOR)], ['WebGL Version', 'VERSION', gl.getParameter(gl.VERSION)], ['Shading Language Version', 'SHADING_LANGUAGE_VERSION', gl.getParameter(gl.SHADING_LANGUAGE_VERSION)], ['Unmasked Renderer', 'UNMASKED_RENDERER', glDebugRendererInfo && gl.getParameter(glDebugRendererInfo.UNMASKED_RENDERER_WEBGL)], ['Unmasked Vendor', 'UNMASKED_VENDOR', glDebugRendererInfo && gl.getParameter(glDebugRendererInfo.UNMASKED_VENDOR_WEBGL)], ['WebGL Version', 'WEBGL_VERSION', model.webgl2 ? 2 : 1]];\n    const result = {};\n    while (params.length) {\n      const [label, key, value] = params.pop();\n      if (key) {\n        result[key] = {\n          label,\n          value\n        };\n      }\n    }\n    model._glInformation = result;\n    return result;\n  };\n  publicAPI.traverseAllPasses = () => {\n    if (model.renderPasses) {\n      for (let index = 0; index < model.renderPasses.length; ++index) {\n        model.renderPasses[index].traverse(publicAPI, null);\n      }\n    }\n    publicAPI.copyParentContent();\n    if (model.notifyStartCaptureImage) {\n      getCanvasDataURL();\n    }\n    const childrenRW = model.renderable.getChildRenderWindowsByReference();\n    for (let i = 0; i < childrenRW.length; ++i) {\n      publicAPI.getViewNodeFor(childrenRW[i])?.traverseAllPasses();\n    }\n  };\n  publicAPI.copyParentContent = () => {\n    const rootParent = model.rootOpenGLRenderWindow;\n    if (!rootParent || !model.context2D || model.children.some(oglRenderer => !!oglRenderer.getSelector?.())) {\n      return;\n    }\n    const parentCanvas = rootParent.getCanvas();\n    const selfCanvas = model.canvas;\n    model.context2D.drawImage(parentCanvas, 0, parentCanvas.height - selfCanvas.height,\n    // source y axis is inverted\n    selfCanvas.width, selfCanvas.height, 0, 0, selfCanvas.width, selfCanvas.height);\n  };\n  publicAPI.resizeFromChildRenderWindows = () => {\n    // Adapt the size of the parent render window to the child render windows\n    const childrenRW = model.renderable.getChildRenderWindowsByReference();\n    if (childrenRW.length > 0) {\n      const maxSize = [0, 0];\n      for (let i = 0; i < childrenRW.length; ++i) {\n        const childSize = publicAPI.getViewNodeFor(childrenRW[i])?.getSize();\n        if (childSize) {\n          maxSize[0] = childSize[0] > maxSize[0] ? childSize[0] : maxSize[0];\n          maxSize[1] = childSize[1] > maxSize[1] ? childSize[1] : maxSize[1];\n        }\n      }\n      publicAPI.setSize(...maxSize);\n    }\n  };\n  publicAPI.disableCullFace = () => {\n    if (model.cullFaceEnabled) {\n      model.context.disable(model.context.CULL_FACE);\n      model.cullFaceEnabled = false;\n    }\n  };\n  publicAPI.enableCullFace = () => {\n    if (!model.cullFaceEnabled) {\n      model.context.enable(model.context.CULL_FACE);\n      model.cullFaceEnabled = true;\n    }\n  };\n  publicAPI.setViewStream = stream => {\n    if (model.viewStream === stream) {\n      return false;\n    }\n    if (model.subscription) {\n      model.subscription.unsubscribe();\n      model.subscription = null;\n    }\n    model.viewStream = stream;\n    if (model.viewStream) {\n      // Force background to be transparent + render\n      const mainRenderer = model.renderable.getRenderers()[0];\n      mainRenderer.getBackgroundByReference()[3] = 0;\n\n      // Enable display of the background image\n      publicAPI.setUseBackgroundImage(true);\n\n      // Bind to remote stream\n      model.subscription = model.viewStream.onImageReady(e => publicAPI.setBackgroundImage(e.image));\n      model.viewStream.setSize(model.size[0], model.size[1]);\n      model.viewStream.invalidateCache();\n      model.viewStream.render();\n      publicAPI.modified();\n    }\n    return true;\n  };\n  publicAPI.createSelector = () => {\n    const ret = vtkHardwareSelector.newInstance();\n    ret.setOpenGLRenderWindow(publicAPI);\n    return ret;\n  };\n  function clearEvents() {\n    model.canvas.removeEventListener('webglcontextlost', _preventDefault);\n    model.canvas.removeEventListener('webglcontextrestored', publicAPI.restoreContext);\n  }\n  publicAPI.delete = macro.chain(() => {\n    if (model.context) {\n      deleteGLContext();\n    }\n    publicAPI.setContainer();\n    publicAPI.setViewStream();\n  }, clearEvents, publicAPI.delete);\n\n  // Do not trigger modified for performance reasons\n  publicAPI.setActiveFramebuffer = newActiveFramebuffer => {\n    model.activeFramebuffer = newActiveFramebuffer;\n  };\n  const superSetSize = publicAPI.setSize;\n  publicAPI.setSize = (width, height) => {\n    const modified = superSetSize(width, height);\n    if (modified) {\n      publicAPI.invokeWindowResizeEvent({\n        width,\n        height\n      });\n    }\n    return modified;\n  };\n  publicAPI.registerGraphicsResourceUser = (coreObject, newUser) => {\n    // Try to create the graphics resource if it doesn't exist\n    if (!model._graphicsResources.has(coreObject)) {\n      publicAPI.setGraphicsResourceForObject(coreObject, null, null);\n    }\n    // Add newUser to the set of users\n    const sharedResource = model._graphicsResources.get(coreObject);\n    sharedResource?.users.add(newUser);\n  };\n  publicAPI.unregisterGraphicsResourceUser = (coreObject, oldUser) => {\n    const sharedResource = model._graphicsResources.get(coreObject);\n    if (!sharedResource) {\n      return;\n    }\n    sharedResource.users.delete(oldUser);\n    // Release graphics resources when the number of users reaches 0\n    if (!sharedResource.users.size) {\n      sharedResource.oglObject?.releaseGraphicsResources(publicAPI);\n      model._graphicsResources.delete(coreObject);\n    }\n  };\n  publicAPI.getGraphicsResourceForObject = coreObject => model._graphicsResources.get(coreObject);\n  publicAPI.setGraphicsResourceForObject = (coreObject, oglObject, hash) => {\n    if (!coreObject) {\n      return;\n    }\n    const sharedResource = model._graphicsResources.get(coreObject);\n    // Release the old resource\n    sharedResource?.oglObject?.releaseGraphicsResources(publicAPI);\n    // Keep the same users that have registered for this coreObject\n    model._graphicsResources.set(coreObject, {\n      coreObject,\n      oglObject,\n      hash,\n      users: sharedResource?.users ?? new Set()\n    });\n  };\n  publicAPI.getGraphicsMemoryInfo = () => {\n    let memUsed = 0;\n    model._graphicsResources.forEach(_ref3 => {\n      let {\n        oglObject\n      } = _ref3;\n      memUsed += oglObject.getAllocatedGPUMemoryInBytes();\n    });\n    return memUsed;\n  };\n  publicAPI.releaseGraphicsResources = () => {\n    // Clear the shader cache\n    if (model.shaderCache !== null) {\n      model.shaderCache.releaseGraphicsResources(publicAPI);\n    }\n    // Free cached graphics resources at the context level\n    model._graphicsResources.forEach(_ref4 => {\n      let {\n        oglObject\n      } = _ref4;\n      oglObject.releaseGraphicsResources(publicAPI);\n    });\n    model._graphicsResources.clear();\n    if (model.textureUnitManager !== null) {\n      model.textureUnitManager.freeAll();\n    }\n    // Finally, ask the renderers to release prop resources\n    model.renderable.getRenderersByReference().forEach(ren => {\n      const glRen = publicAPI.getViewNodeFor(ren);\n      glRen?.releaseGraphicsResources();\n    });\n  };\n\n  // Proxy some methods if needed\n  const publicAPIBeforeProxy = {\n    ...publicAPI\n  };\n  parentMethodsToProxy.forEach(methodName => {\n    publicAPI[methodName] = function () {\n      if (model.rootOpenGLRenderWindow) {\n        // Proxy only methods when the render window has a parent\n        return model.rootOpenGLRenderWindow[methodName](...arguments);\n      }\n      return publicAPIBeforeProxy[methodName](...arguments);\n    };\n  });\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  cullFaceEnabled: false,\n  shaderCache: null,\n  initialized: false,\n  context: null,\n  context2D: null,\n  canvas: null,\n  cursorVisibility: true,\n  cursor: 'pointer',\n  textureUnitManager: null,\n  textureResourceIds: null,\n  containerSize: null,\n  renderPasses: [],\n  notifyStartCaptureImage: false,\n  webgl2: false,\n  defaultToWebgl2: true,\n  // attempt webgl2 on by default\n  activeFramebuffer: null,\n  imageFormat: 'image/png',\n  useOffScreen: false,\n  useBackgroundImage: false\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkRenderWindowViewNode.extend(publicAPI, model, initialValues);\n\n  // Create internal instances\n  if (!model.canvas) {\n    model.canvas = document.createElement('canvas');\n    model.canvas.style.width = '100%';\n  }\n  if (!model.selector) {\n    model.selector = vtkHardwareSelector.newInstance();\n    model.selector.setOpenGLRenderWindow(publicAPI);\n  }\n\n  // Create internal bgImage\n  model.bgImage = new Image();\n  model.bgImage.style.position = 'absolute';\n  model.bgImage.style.left = '0';\n  model.bgImage.style.top = '0';\n  model.bgImage.style.width = '100%';\n  model.bgImage.style.height = '100%';\n  model.bgImage.style.zIndex = '-1';\n  model._textureResourceIds = new Map();\n  model._graphicsResources = new Map();\n  model._glInformation = null;\n  model.myFactory = vtkViewNodeFactory.newInstance();\n  model.shaderCache = vtkShaderCache.newInstance();\n  model.shaderCache.setOpenGLRenderWindow(publicAPI);\n\n  // setup default forward pass rendering\n  model.renderPasses[0] = vtkForwardPass.newInstance();\n\n  // Build VTK API\n  macro.get(publicAPI, model, ['shaderCache', 'textureUnitManager', 'webgl2', 'useBackgroundImage', 'activeFramebuffer', 'rootOpenGLRenderWindow']);\n  macro.setGet(publicAPI, model, ['initialized', 'context', 'context2D', 'canvas', 'renderPasses', 'notifyStartCaptureImage', 'defaultToWebgl2', 'cursor', 'useOffScreen']);\n  macro.setGetArray(publicAPI, model, ['size'], 2);\n  macro.event(publicAPI, model, 'imageReady');\n  macro.event(publicAPI, model, 'windowResizeEvent');\n\n  // Object methods\n  vtkOpenGLRenderWindow(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkOpenGLRenderWindow');\n\n// ----------------------------------------------------------------------------\n// Register API specific RenderWindow implementation\n// ----------------------------------------------------------------------------\n\nregisterViewConstructor('WebGL', newInstance);\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderWindow = {\n  newInstance,\n  extend,\n  pushMonitorGLContextCount,\n  popMonitorGLContextCount\n};\n\n// Register ourself to OpenGL backend if imported\nregisterOverride('vtkRenderWindow', newInstance);\n\nexport { vtkRenderWindow as default, extend, newInstance, popMonitorGLContextCount, pushMonitorGLContextCount };\n", "import { n as newInstance$1, o as obj, g as get, e as setGet } from '../../macros2.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\n\n// methods we forward to the handle\nconst forwarded = ['setBindGroup', 'setIndexBuffer', 'setVertexBuffer', 'draw', 'drawIndexed'];\n\n// ----------------------------------------------------------------------------\n// vtkWebGPURenderEncoder methods\n// ----------------------------------------------------------------------------\nfunction vtkWebGPURenderEncoder(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPURenderEncoder');\n  publicAPI.begin = encoder => {\n    model.drawCallbacks = [];\n    model.handle = encoder.beginRenderPass(model.description);\n    if (model.label) {\n      model.handle.pushDebugGroup(model.label);\n    }\n  };\n  publicAPI.end = () => {\n    // loop over registered pipelines and their callbacks\n    for (let i = 0; i < model.drawCallbacks.length; i++) {\n      const pStruct = model.drawCallbacks[i];\n      const pl = pStruct.pipeline;\n      publicAPI.setPipeline(pl);\n      for (let cb = 0; cb < pStruct.callbacks.length; cb++) {\n        pStruct.callbacks[cb](publicAPI);\n      }\n    }\n    if (model.label) {\n      model.handle.popDebugGroup();\n    }\n    model.handle.end();\n    model.boundPipeline = null;\n  };\n  publicAPI.setPipeline = pl => {\n    if (model.boundPipeline === pl) {\n      return;\n    }\n    model.handle.setPipeline(pl.getHandle());\n    const pd = pl.getPipelineDescription();\n\n    // check attachment state\n    if (model.colorTextureViews.length !== pd.fragment.targets.length) {\n      console.log(`mismatched attachment counts on pipeline ${pd.fragment.targets.length} while encoder has ${model.colorTextureViews.length}`);\n      console.trace();\n    } else {\n      for (let i = 0; i < model.colorTextureViews.length; i++) {\n        const fmt = model.colorTextureViews[i].getTexture()?.getFormat();\n        if (fmt && fmt !== pd.fragment.targets[i].format) {\n          console.log(`mismatched attachments for attachment ${i} on pipeline ${pd.fragment.targets[i].format} while encoder has ${fmt}`);\n          console.trace();\n        }\n      }\n    }\n\n    // check depth buffer\n    if (!model.depthTextureView !== !('depthStencil' in pd)) {\n      console.log('mismatched depth attachments');\n      console.trace();\n    } else if (model.depthTextureView) {\n      const dfmt = model.depthTextureView.getTexture()?.getFormat();\n      if (dfmt && dfmt !== pd.depthStencil.format) {\n        console.log(`mismatched depth attachments on pipeline ${pd.depthStencil.format} while encoder has ${dfmt}`);\n        console.trace();\n      }\n    }\n    model.boundPipeline = pl;\n  };\n  publicAPI.replaceShaderCode = pipeline => {\n    model.replaceShaderCodeFunction(pipeline);\n  };\n  publicAPI.setColorTextureView = (idx, view) => {\n    if (model.colorTextureViews[idx] === view) {\n      return;\n    }\n    model.colorTextureViews[idx] = view;\n  };\n  publicAPI.activateBindGroup = bg => {\n    const device = model.boundPipeline.getDevice();\n    const midx = model.boundPipeline.getBindGroupLayoutCount(bg.getLabel());\n    model.handle.setBindGroup(midx, bg.getBindGroup(device));\n    // verify bind group layout matches\n    const bgl1 = device.getBindGroupLayoutDescription(bg.getBindGroupLayout(device));\n    const bgl2 = device.getBindGroupLayoutDescription(model.boundPipeline.getBindGroupLayout(midx));\n    if (bgl1 !== bgl2) {\n      console.log(`renderEncoder ${model.pipelineHash} mismatched bind group layouts bind group has\\n${bgl1}\\n versus pipeline\\n${bgl2}\\n`);\n      console.trace();\n    }\n  };\n  publicAPI.attachTextureViews = () => {\n    // for each texture create a view if we do not already have one\n    for (let i = 0; i < model.colorTextureViews.length; i++) {\n      if (!model.description.colorAttachments[i]) {\n        model.description.colorAttachments[i] = {\n          view: model.colorTextureViews[i].getHandle()\n        };\n      } else {\n        model.description.colorAttachments[i].view = model.colorTextureViews[i].getHandle();\n      }\n    }\n    if (model.depthTextureView) {\n      model.description.depthStencilAttachment.view = model.depthTextureView.getHandle();\n    }\n  };\n\n  // register pipeline callbacks from a mapper\n  publicAPI.registerDrawCallback = (pipeline, cb) => {\n    // if there is a matching pipeline just add the cb\n    for (let i = 0; i < model.drawCallbacks.length; i++) {\n      if (model.drawCallbacks[i].pipeline === pipeline) {\n        model.drawCallbacks[i].callbacks.push(cb);\n        return;\n      }\n    }\n    model.drawCallbacks.push({\n      pipeline,\n      callbacks: [cb]\n    });\n  };\n\n  // simple forwarders\n  for (let i = 0; i < forwarded.length; i++) {\n    publicAPI[forwarded[i]] = function () {\n      return model.handle[forwarded[i]](...arguments);\n    };\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  description: null,\n  handle: null,\n  boundPipeline: null,\n  pipelineHash: null,\n  pipelineSettings: null,\n  replaceShaderCodeFunction: null,\n  depthTextureView: null,\n  label: null\n};\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  obj(publicAPI, model);\n  model.description = {\n    colorAttachments: [{\n      view: undefined,\n      loadOp: 'load',\n      storeOp: 'store'\n    }],\n    depthStencilAttachment: {\n      view: undefined,\n      depthLoadOp: 'clear',\n      depthClearValue: 0.0,\n      depthStoreOp: 'store'\n    }\n  };\n\n  // default shader code just writes out the computedColor\n  model.replaceShaderCodeFunction = pipeline => {\n    const fDesc = pipeline.getShaderDescription('fragment');\n    fDesc.addOutput('vec4<f32>', 'outColor');\n    let code = fDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', ['output.outColor = computedColor;']).result;\n    fDesc.setCode(code);\n  };\n\n  // default pipeline settings\n  model.pipelineSettings = {\n    primitive: {\n      cullMode: 'none'\n    },\n    depthStencil: {\n      depthWriteEnabled: true,\n      depthCompare: 'greater-equal',\n      format: 'depth32float'\n    },\n    fragment: {\n      targets: [{\n        format: 'rgba16float',\n        blend: {\n          color: {\n            srcFactor: 'src-alpha',\n            dstFactor: 'one-minus-src-alpha'\n          },\n          alpha: {\n            srcFactor: 'one',\n            dstFactor: 'one-minus-src-alpha'\n          }\n        }\n      }]\n    }\n  };\n  model.colorTextureViews = [];\n  get(publicAPI, model, ['boundPipeline', 'colorTextureViews']);\n  setGet(publicAPI, model, ['depthTextureView', 'description', 'handle', 'label', 'pipelineHash', 'pipelineSettings', 'replaceShaderCodeFunction']);\n\n  // For more macro methods, see \"Sources/macros.js\"\n  // Object specific methods\n  vtkWebGPURenderEncoder(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nconst newInstance = newInstance$1(extend, 'vtkWebGPURenderEncoder');\n\n// ----------------------------------------------------------------------------\nvar vtkWebGPURenderEncoder$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPURenderEncoder$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\n\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUOpaquePass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUOpaquePass');\n\n  // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n  publicAPI.traverse = (renNode, viewNode) => {\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = viewNode;\n    const device = viewNode.getDevice();\n    if (!model.renderEncoder) {\n      publicAPI.createRenderEncoder();\n      model.colorTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassColor'\n      });\n      model.colorTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'rgba16float',\n        /* eslint-disable no-undef */\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      const ctView = model.colorTexture.createView('opaquePassColorTexture');\n      model.renderEncoder.setColorTextureView(0, ctView);\n      model.depthFormat = 'depth32float';\n      model.depthTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassDepth'\n      });\n      model.depthTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: model.depthFormat,\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      const dView = model.depthTexture.createView('opaquePassDepthTexture');\n      model.renderEncoder.setDepthTextureView(dView);\n    } else {\n      model.colorTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n      model.depthTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n    }\n    model.renderEncoder.attachTextureViews();\n    publicAPI.setCurrentOperation('opaquePass');\n    renNode.setRenderEncoder(model.renderEncoder);\n    renNode.traverse(publicAPI);\n  };\n  publicAPI.getColorTextureView = () => model.renderEncoder.getColorTextureViews()[0];\n  publicAPI.getDepthTextureView = () => model.renderEncoder.getDepthTextureView();\n  publicAPI.createRenderEncoder = () => {\n    model.renderEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'OpaquePass'\n    });\n    // default settings are fine for this\n    model.renderEncoder.setPipelineHash('op');\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  renderEncoder: null,\n  colorTexture: null,\n  depthTexture: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['colorTexture', 'depthTexture']);\n\n  // Object methods\n  vtkWebGPUOpaquePass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUOpaquePass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUOpaquePass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUOpaquePass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkWebGPUFullScreenQuad from './FullScreenQuad.js';\n\n// ----------------------------------------------------------------------------\n\nconst oitpFragTemplate = `\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));\n  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;\n  if (reveal == 1.0) { discard; }\n  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);\n  var total: f32 = max(tcolor.a, 0.01);\n  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\nfunction vtkWebGPUOrderIndependentTranslucentPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUOrderIndependentTranslucentPass');\n\n  // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n  publicAPI.traverse = (renNode, viewNode) => {\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = viewNode;\n    const device = viewNode.getDevice();\n    if (!model.translucentRenderEncoder) {\n      publicAPI.createRenderEncoder();\n      publicAPI.createFinalEncoder();\n      model.translucentColorTexture = vtkWebGPUTexture.newInstance({\n        label: 'translucentPassColor'\n      });\n      model.translucentColorTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'rgba16float',\n        /* eslint-disable no-undef */\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\n      });\n      const v1 = model.translucentColorTexture.createView('oitpColorTexture');\n      model.translucentRenderEncoder.setColorTextureView(0, v1);\n      model.translucentAccumulateTexture = vtkWebGPUTexture.newInstance({\n        label: 'translucentPassAccumulate'\n      });\n      model.translucentAccumulateTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'r16float',\n        /* eslint-disable no-undef */\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\n      });\n      const v2 = model.translucentAccumulateTexture.createView('oitpAccumTexture');\n      model.translucentRenderEncoder.setColorTextureView(1, v2);\n      model.fullScreenQuad = vtkWebGPUFullScreenQuad.newInstance();\n      model.fullScreenQuad.setDevice(viewNode.getDevice());\n      model.fullScreenQuad.setPipelineHash('oitpfsq');\n      model.fullScreenQuad.setTextureViews(model.translucentRenderEncoder.getColorTextureViews());\n      model.fullScreenQuad.setFragmentShaderTemplate(oitpFragTemplate);\n    } else {\n      model.translucentColorTexture.resizeToMatch(model.colorTextureView.getTexture());\n      model.translucentAccumulateTexture.resizeToMatch(model.colorTextureView.getTexture());\n    }\n    model.translucentRenderEncoder.setDepthTextureView(model.depthTextureView);\n    model.translucentRenderEncoder.attachTextureViews();\n    publicAPI.setCurrentOperation('translucentPass');\n    renNode.setRenderEncoder(model.translucentRenderEncoder);\n    renNode.traverse(publicAPI);\n    publicAPI.finalPass(viewNode, renNode);\n  };\n  publicAPI.finalPass = (viewNode, renNode) => {\n    model.translucentFinalEncoder.setColorTextureView(0, model.colorTextureView);\n    model.translucentFinalEncoder.attachTextureViews();\n    model.translucentFinalEncoder.begin(viewNode.getCommandEncoder());\n    renNode.scissorAndViewport(model.translucentFinalEncoder);\n    model.fullScreenQuad.prepareAndDraw(model.translucentFinalEncoder);\n    model.translucentFinalEncoder.end();\n  };\n  publicAPI.getTextures = () => [model.translucentColorTexture, model.translucentAccumulateTexture];\n  publicAPI.createRenderEncoder = () => {\n    model.translucentRenderEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'translucentRender'\n    });\n    const rDesc = model.translucentRenderEncoder.getDescription();\n    rDesc.colorAttachments = [{\n      view: undefined,\n      clearValue: [0.0, 0.0, 0.0, 0.0],\n      loadOp: 'clear',\n      storeOp: 'store'\n    }, {\n      view: undefined,\n      clearValue: [1.0, 0.0, 0.0, 0.0],\n      loadOp: 'clear',\n      storeOp: 'store'\n    }];\n    rDesc.depthStencilAttachment = {\n      view: undefined,\n      depthLoadOp: 'load',\n      depthStoreOp: 'store'\n    };\n    model.translucentRenderEncoder.setReplaceShaderCodeFunction(pipeline => {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      fDesc.addOutput('vec4<f32>', 'outColor');\n      fDesc.addOutput('f32', 'outAccum');\n      fDesc.addBuiltinInput('vec4<f32>', '@builtin(position) fragPos');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', [\n      // very simple depth weighting in w z ranges from 1.0 near to 0.0\n      'var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);', 'output.outColor = vec4<f32>(computedColor.rgb*w, w);', 'output.outAccum = computedColor.a;']).result;\n      fDesc.setCode(code);\n    });\n    model.translucentRenderEncoder.setPipelineHash('oitpr');\n    model.translucentRenderEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      depthStencil: {\n        depthWriteEnabled: false,\n        depthCompare: 'greater',\n        format: 'depth32float'\n      },\n      fragment: {\n        targets: [{\n          format: 'rgba16float',\n          blend: {\n            color: {\n              srcFactor: 'one',\n              dstFactor: 'one'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one'\n            }\n          }\n        }, {\n          format: 'r16float',\n          blend: {\n            color: {\n              srcFactor: 'zero',\n              dstFactor: 'one-minus-src'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n  };\n  publicAPI.createFinalEncoder = () => {\n    model.translucentFinalEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'translucentFinal'\n    });\n    model.translucentFinalEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        loadOp: 'load',\n        storeOp: 'store'\n      }]\n    });\n    model.translucentFinalEncoder.setReplaceShaderCodeFunction(pipeline => {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      fDesc.addOutput('vec4<f32>', 'outColor');\n      fDesc.addBuiltinInput('vec4<f32>', '@builtin(position) fragPos');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', ['output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);']).result;\n      fDesc.setCode(code);\n    });\n    model.translucentFinalEncoder.setPipelineHash('oitpf');\n    model.translucentFinalEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: 'rgba16float',\n          blend: {\n            color: {\n              srcFactor: 'src-alpha',\n              dstFactor: 'one-minus-src-alpha'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  colorTextureView: null,\n  depthTextureView: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['colorTextureView', 'depthTextureView']);\n\n  // Object methods\n  vtkWebGPUOrderIndependentTranslucentPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUOrderIndependentTranslucentPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUOrderIndepenentTranslucentPass = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUOrderIndepenentTranslucentPass as default, extend, newInstance };\n", "const BlendMode = {\n  COMPOSITE_BLEND: 0,\n  MAXIMUM_INTENSITY_BLEND: 1,\n  MINIMUM_INTENSITY_BLEND: 2,\n  AVERAGE_INTENSITY_BLEND: 3,\n  ADDITIVE_INTENSITY_BLEND: 4,\n  RADON_TRANSFORM_BLEND: 5,\n  LABELMAP_EDGE_PROJECTION_BLEND: 6\n};\nvar Constants = {\n  BlendMode\n};\n\nexport { BlendMode, Constants as default };\n", "import { m as macro } from '../../macros2.js';\nimport { mat4 } from 'gl-matrix';\nimport vtkWebGPUFullScreenQuad from './FullScreenQuad.js';\nimport vtkWebGPUUniformBuffer from './UniformBuffer.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUStorageBuffer from './StorageBuffer.js';\nimport vtkWebGPUSampler from './Sampler.js';\nimport vtkWebGPUTypes from './Types.js';\nimport { BlendMode } from '../Core/VolumeMapper/Constants.js';\n\nconst volFragTemplate = `\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Volume::TraverseDec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\nfn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32\n{\n  // todo multicomponent support\n  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;\n}\n\nfn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>\n{\n  var result: vec4<f32>;\n\n  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;\n  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;\n  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;\n  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;\n  result.w = 0.0;\n\n  // divide by spacing as that is our delta\n  result = result / volumeSSBO.values[vNum].spacing;\n  // now we have a gradient in unit tcoords\n\n  var grad: f32 = length(result.xyz);\n  if (grad > 0.0)\n  {\n    // rotate to View Coords, needed for lighting and shading\n    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;\n    result = nMat * result;\n    result = result / length(result);\n  }\n\n  // store gradient magnitude in .w\n  result.w = grad;\n\n  return result;\n}\n\nfn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>\n{\n  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n\n  // convert to tcoords and reject if outside the volume\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;\n  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||\n      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }\n\n  var scalar: f32 = getTextureValue(vTex, tpos);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n\n  var gofactor: f32 = 1.0;\n  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);\n  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    normal = getGradient(vTex, tpos, vNum, scalar);\n    if (componentSSBO.values[cNum].gomin <  1.0)\n    {\n      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,\n      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);\n    }\n  }\n\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n\n  if (volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    color = color*abs(normal.z);\n  }\n\n  outColor = vec4<f32>(color.rgb, gofactor * opacity);\n\n  return outColor;\n}\n\n// adjust the start and end point of a raycast such that it intersects the unit cube.\n// This function is used to take a raycast starting point and step vector\n// and numSteps and return the startijng and ending steps for intersecting the\n// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates\n// that have valid values. So this funtion can be used to take a ray in texture coordinates\n// and bound it to intersecting the texture.\n//\nfn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>\n{\n  var result: vec2<f32> = vec2<f32>(0.0, numSteps);\n  var tpos2: vec4<f32> = tpos + tstep*numSteps;\n\n  // move tpos to the start of the volume\n  var adjust: f32 =\n    min(\n      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),\n      min(\n        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),\n        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));\n  if (adjust < 0.0)\n  {\n    result.x = result.x - adjust;\n  }\n\n  // adjust length to the end\n  adjust =\n    max(\n      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),\n      max(\n        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),\n        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));\n  if (adjust > 0.0)\n  {\n    result.y = result.y - adjust;\n  }\n\n  return result;\n}\n\nfn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>\n{\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n  return vec4<f32>(color.rgb, opacity);\n}\n\nfn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var maxVal: f32 = -1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar > maxVal)\n    {\n      maxVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);\n}\n\nfn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var minVal: f32 = 1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar < minVal)\n    {\n      minVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);\n}\n\nfn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var avgVal: f32 = 0.0;\n  var sampleCount: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      avgVal = avgVal + sample;\n      sampleCount = sampleCount + 1.0;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  if (sampleCount <= 0.0)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);\n}\n\nfn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var sumVal: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      sumVal = sumVal + sample;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);\n}\n\nfn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>\n{\n  // initial ray position is at the beginning\n  var rayPosSC: vec4<f32> = minPosSC;\n\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var curDist: f32 = 0.0;\n  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n  var sampleColor: vec4<f32>;\n//VTK::Volume::TraverseCalls\n\n  loop\n  {\n    // for each volume, sample and accumulate color\n//VTK::Volume::CompositeCalls\n\n    // increment position\n    curDist = curDist + mapperUBO.SampleDistance;\n    rayPosSC = rayPosSC + rayStepSC;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayLengthSC) { break; }\n    if (computedColor.a > 0.98) { break; }\n  }\n  return computedColor;\n}\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;\n  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;\n\n  // discard empty rays\n  if (rayMax <= rayMin) { discard; }\n  else\n  {\n    // compute start and end ray positions in view coordinates\n    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);\n    minPosSC = minPosSC * (1.0 / minPosSC.w);\n    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);\n    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);\n\n    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);\n    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);\n    rayStepSC.w = 0.0;\n\n    var computedColor: vec4<f32>;\n\n//VTK::Volume::Loop\n\n//VTK::RenderEncoder::Impl\n  }\n\n  return output;\n}\n`;\nconst tmpMat4 = new Float64Array(16);\nconst tmp2Mat4 = new Float64Array(16);\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUVolumePassFSQ methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUVolumePassFSQ(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUVolumePassFSQ');\n  publicAPI.replaceShaderPosition = (hash, pipeline, vertexInput) => {\n    const vDesc = pipeline.getShaderDescription('vertex');\n    vDesc.addBuiltinOutput('vec4<f32>', '@builtin(position) Position');\n    let code = vDesc.getCode();\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Position::Impl', ['output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);', 'output.Position = vec4<f32>(vertexBC, 1.0);']).result;\n    vDesc.setCode(code);\n    const fDesc = pipeline.getShaderDescription('fragment');\n    fDesc.addBuiltinInput('vec4<f32>', '@builtin(position) fragPos');\n  };\n  model.shaderReplacements.set('replaceShaderPosition', publicAPI.replaceShaderPosition);\n  publicAPI.replaceShaderVolume = (hash, pipeline, vertexInput) => {\n    const fDesc = pipeline.getShaderDescription('fragment');\n    let code = fDesc.getCode();\n    const compositeCalls = [];\n    const traverseCalls = [];\n    for (let i = 0; i < model.volumes.length; i++) {\n      // todo pass rowPos\n      const blendMode = model.volumes[i].getRenderable().getMapper().getBlendMode();\n      if (blendMode === BlendMode.COMPOSITE_BLEND) {\n        compositeCalls.push(`    sampleColor = processVolume(volTexture${i}, ${i}, ${model.rowStarts[i]}, rayPosSC, tfunRows);`);\n        compositeCalls.push(`    computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`);\n      } else {\n        traverseCalls.push(`  sampleColor = traverseVals[${i}];`);\n        traverseCalls.push(`  computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`);\n      }\n    }\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::CompositeCalls', compositeCalls).result;\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::TraverseCalls', traverseCalls).result;\n    code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::TraverseDec', [`var<private> traverseVals: array<vec4<f32>,${model.volumes.length}>;`]).result;\n\n    // call the full and partial methods as needed\n    let compositeWhileTraversing = false;\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const blendMode = model.volumes[vidx].getRenderable().getMapper().getBlendMode();\n      if (blendMode === BlendMode.COMPOSITE_BLEND) {\n        compositeWhileTraversing = true;\n      } else if (blendMode === BlendMode.MAXIMUM_INTENSITY_BLEND) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::Loop', [`    traverseMax(volTexture${vidx}, ${vidx}, ${vidx}, rayLengthSC, minPosSC, rayStepSC);`, `    computedColor = traverseVals[${vidx}];`, '//VTK::Volume::Loop']).result;\n      } else if (blendMode === BlendMode.MINIMUM_INTENSITY_BLEND) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::Loop', [`    traverseMin(volTexture${vidx}, ${vidx}, ${vidx}, rayLengthSC, minPosSC, rayStepSC);`, `    computedColor = traverseVals[${vidx}];`, '//VTK::Volume::Loop']).result;\n      } else if (blendMode === BlendMode.AVERAGE_INTENSITY_BLEND) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::Loop', [`    traverseAverage(volTexture${vidx}, ${vidx}, ${vidx}, rayLengthSC, minPosSC, rayStepSC);`, `    computedColor = traverseVals[${vidx}];`, '//VTK::Volume::Loop']).result;\n      } else if (blendMode === BlendMode.ADDITIVE_INTENSITY_BLEND) {\n        code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::Loop', [`    traverseAdditive(volTexture${vidx}, ${vidx}, ${vidx}, rayLengthSC, minPosSC, rayStepSC);`, `    computedColor = traverseVals[${vidx}];`, '//VTK::Volume::Loop']).result;\n      }\n    }\n    if (compositeWhileTraversing) {\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::Volume::Loop', ['    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);']).result;\n    }\n    fDesc.setCode(code);\n  };\n  model.shaderReplacements.set('replaceShaderVolume', publicAPI.replaceShaderVolume);\n  publicAPI.updateLUTImage = device => {\n    // depends on\n    // - volumes array (length and values) - mtime\n    // - tfun arrays - renderable/property mtime\n\n    let mtime = publicAPI.getMTime();\n    for (let i = 0; i < model.volumes.length; i++) {\n      const vol = model.volumes[i].getRenderable();\n      const image = vol.getMapper().getInputData();\n      mtime = Math.max(mtime, vol.getMTime(), image.getMTime());\n    }\n    if (mtime < model.lutBuildTime.getMTime()) {\n      return;\n    }\n\n    // first determine how large the image should be\n    model.numRows = 0;\n    model.rowStarts = [];\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      model.rowStarts.push(model.numRows);\n      const webgpuvol = model.volumes[vidx];\n      const actor = webgpuvol.getRenderable();\n      const volMapr = actor.getMapper();\n      const vprop = actor.getProperty();\n      const image = volMapr.getInputData();\n      const scalars = image.getPointData() && image.getPointData().getScalars();\n      const numComp = scalars.getNumberOfComponents();\n      const iComps = vprop.getIndependentComponents();\n      const numIComps = iComps ? numComp : 1;\n      model.numRows += numIComps;\n    }\n\n    // allocate the image array\n    const colorArray = new Uint8ClampedArray(model.numRows * 2 * model.rowLength * 4);\n    const opacityArray = new Float32Array(model.numRows * 2 * model.rowLength);\n    let imgRow = 0;\n    const tmpTable = new Float32Array(model.rowLength * 3);\n    const rowLength = model.rowLength;\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const webgpuvol = model.volumes[vidx];\n      const actor = webgpuvol.getRenderable();\n      const volMapr = actor.getMapper();\n      const vprop = actor.getProperty();\n      const image = volMapr.getInputData();\n      const scalars = image.getPointData() && image.getPointData().getScalars();\n      const numComp = scalars.getNumberOfComponents();\n      const iComps = vprop.getIndependentComponents();\n      const numIComps = iComps ? numComp : 1;\n      for (let c = 0; c < numIComps; ++c) {\n        const cfun = vprop.getRGBTransferFunction(c);\n        const cRange = cfun.getRange();\n        cfun.getTable(cRange[0], cRange[1], rowLength, tmpTable, 1);\n        let ioffset = imgRow * rowLength * 4;\n        for (let i = 0; i < rowLength; ++i) {\n          colorArray[ioffset + i * 4] = 255.0 * tmpTable[i * 3];\n          colorArray[ioffset + i * 4 + 1] = 255.0 * tmpTable[i * 3 + 1];\n          colorArray[ioffset + i * 4 + 2] = 255.0 * tmpTable[i * 3 + 2];\n          colorArray[ioffset + i * 4 + 3] = 255.0;\n          for (let co = 0; co < 4; co++) {\n            colorArray[ioffset + (rowLength + i) * 4 + co] = colorArray[ioffset + i * 4 + co];\n          }\n        }\n        const ofun = vprop.getScalarOpacity(c);\n        const opacityFactor = model.sampleDist / vprop.getScalarOpacityUnitDistance(c);\n        const oRange = ofun.getRange();\n        ofun.getTable(oRange[0], oRange[1], rowLength, tmpTable, 1);\n        // adjust for sample distance etc\n        ioffset = imgRow * rowLength;\n        for (let i = 0; i < rowLength; ++i) {\n          opacityArray[ioffset + i] = 1.0 - (1.0 - tmpTable[i]) ** opacityFactor;\n          opacityArray[ioffset + i + rowLength] = opacityArray[ioffset + i];\n        }\n        imgRow += 2;\n      }\n    }\n    {\n      const treq = {\n        nativeArray: colorArray,\n        width: model.rowLength,\n        height: model.numRows * 2,\n        depth: 1,\n        format: 'rgba8unorm'\n      };\n      const newTex = device.getTextureManager().getTexture(treq);\n      const tview = newTex.createView('tfunTexture');\n      model.textureViews[2] = tview;\n    }\n    {\n      const treq = {\n        nativeArray: opacityArray,\n        width: model.rowLength,\n        height: model.numRows * 2,\n        depth: 1,\n        format: 'r16float'\n      };\n      const newTex = device.getTextureManager().getTexture(treq);\n      const tview = newTex.createView('ofunTexture');\n      model.textureViews[3] = tview;\n    }\n    model.lutBuildTime.modified();\n  };\n  publicAPI.updateSSBO = device => {\n    // if any of\n    // - color or opacity tfun ranges changed - volume Mtime\n    // - any volume matrix changed - volume MTime\n    // - stabilized center changed - ren.stabilizedMTime\n    // - any volume's input data worldtoindex or dimensions changed - input's mtime\n    //\n    let mtime = Math.max(publicAPI.getMTime(), model.WebGPURenderer.getStabilizedTime());\n    for (let i = 0; i < model.volumes.length; i++) {\n      const vol = model.volumes[i].getRenderable();\n      const volMapr = vol.getMapper();\n      const image = volMapr.getInputData();\n      mtime = Math.max(mtime, vol.getMTime(), image.getMTime(), volMapr.getMTime());\n    }\n    if (mtime < model.SSBO.getSendTime()) {\n      return;\n    }\n\n    // create the volumeSBBO\n    const center = model.WebGPURenderer.getStabilizedCenterByReference();\n    model.SSBO.clearData();\n    model.SSBO.setNumberOfInstances(model.volumes.length);\n\n    // create SCTC matrices  SC -> world -> model -> index -> tcoord\n    //\n    // when doing coord conversions from A to C recall\n    // the order is mat4.mult(AtoC, BtoC, AtoB);\n    //\n    const marray = new Float64Array(model.volumes.length * 16);\n    const vPlaneArray = new Float64Array(model.volumes.length * 16);\n    const tstepArray = new Float64Array(model.volumes.length * 4);\n    const shadeArray = new Float64Array(model.volumes.length * 4);\n    const spacingArray = new Float64Array(model.volumes.length * 4);\n    const ipScalarRangeArray = new Float64Array(model.volumes.length * 4);\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const webgpuvol = model.volumes[vidx];\n      const actor = webgpuvol.getRenderable();\n      const volMapr = actor.getMapper();\n      const image = volMapr.getInputData();\n      mat4.identity(tmpMat4);\n      mat4.translate(tmpMat4, tmpMat4, center);\n      // tmpMat4 is now SC->World\n\n      const mcwcmat = actor.getMatrix();\n      mat4.transpose(tmp2Mat4, mcwcmat);\n      mat4.invert(tmp2Mat4, tmp2Mat4);\n      // tmp2Mat4 is now world to model\n\n      mat4.multiply(tmpMat4, tmp2Mat4, tmpMat4);\n      // tmp4Mat is now SC->Model\n\n      // the method on the data is world to index but the volume is in\n      // model coordinates so really in this context it is model to index\n      const modelToIndex = image.getWorldToIndex();\n      mat4.multiply(tmpMat4, modelToIndex, tmpMat4);\n      // tmpMat4 is now SC -> Index\n\n      const dims = image.getDimensions();\n      mat4.identity(tmp2Mat4);\n      mat4.scale(tmp2Mat4, tmp2Mat4, [1.0 / dims[0], 1.0 / dims[1], 1.0 / dims[2]]);\n      mat4.multiply(tmpMat4, tmp2Mat4, tmpMat4);\n      // tmpMat4 is now SC -> Tcoord\n\n      for (let j = 0; j < 16; j++) {\n        marray[vidx * 16 + j] = tmpMat4[j];\n      }\n      mat4.invert(tmpMat4, tmpMat4);\n      // now it is Tcoord To SC\n\n      for (let j = 0; j < 4; j++) {\n        vPlaneArray[vidx * 16 + j * 4] = tmpMat4[j * 4];\n        vPlaneArray[vidx * 16 + j * 4 + 1] = tmpMat4[j * 4 + 1];\n        vPlaneArray[vidx * 16 + j * 4 + 2] = tmpMat4[j * 4 + 2];\n        vPlaneArray[vidx * 16 + j * 4 + 3] = 0.0;\n      }\n      tstepArray[vidx * 4] = 1.0 / dims[0];\n      tstepArray[vidx * 4 + 1] = 1.0 / dims[1];\n      tstepArray[vidx * 4 + 2] = 1.0 / dims[2];\n      tstepArray[vidx * 4 + 3] = 1.0;\n      shadeArray[vidx * 4] = actor.getProperty().getShade() ? 1.0 : 0.0;\n      const spacing = image.getSpacing();\n      spacingArray[vidx * 4] = spacing[0];\n      spacingArray[vidx * 4 + 1] = spacing[1];\n      spacingArray[vidx * 4 + 2] = spacing[2];\n      spacingArray[vidx * 4 + 3] = 1.0;\n\n      // handle filteringMode\n      const tScale = model.textureViews[vidx + 4].getTexture().getScale();\n      const ipScalarRange = actor.getProperty().getIpScalarRange();\n      ipScalarRangeArray[vidx * 4] = ipScalarRange[0] / tScale;\n      ipScalarRangeArray[vidx * 4 + 1] = ipScalarRange[1] / tScale;\n      ipScalarRangeArray[vidx * 4 + 2] = actor.getProperty().getFilterMode();\n    }\n    model.SSBO.addEntry('SCTCMatrix', 'mat4x4<f32>');\n    model.SSBO.addEntry('planeNormals', 'mat4x4<f32>');\n    model.SSBO.addEntry('shade', 'vec4<f32>');\n    model.SSBO.addEntry('tstep', 'vec4<f32>');\n    model.SSBO.addEntry('spacing', 'vec4<f32>');\n    model.SSBO.addEntry('ipScalarRange', 'vec4<f32>');\n    model.SSBO.setAllInstancesFromArray('SCTCMatrix', marray);\n    model.SSBO.setAllInstancesFromArray('planeNormals', vPlaneArray);\n    model.SSBO.setAllInstancesFromArray('shade', shadeArray);\n    model.SSBO.setAllInstancesFromArray('tstep', tstepArray);\n    model.SSBO.setAllInstancesFromArray('spacing', spacingArray);\n    model.SSBO.setAllInstancesFromArray('ipScalarRange', ipScalarRangeArray);\n    model.SSBO.send(device);\n\n    // now create the componentSSBO\n    model.componentSSBO.clearData();\n    model.componentSSBO.setNumberOfInstances(model.numRows);\n    const cScaleArray = new Float64Array(model.numRows);\n    const cShiftArray = new Float64Array(model.numRows);\n    const oScaleArray = new Float64Array(model.numRows);\n    const oShiftArray = new Float64Array(model.numRows);\n    const gominArray = new Float64Array(model.numRows);\n    const gomaxArray = new Float64Array(model.numRows);\n    const goshiftArray = new Float64Array(model.numRows);\n    const goscaleArray = new Float64Array(model.numRows);\n    let rowIdx = 0;\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const webgpuvol = model.volumes[vidx];\n      const actor = webgpuvol.getRenderable();\n      const volMapr = actor.getMapper();\n      const vprop = actor.getProperty();\n      const image = volMapr.getInputData();\n      const scalars = image.getPointData() && image.getPointData().getScalars();\n      const numComp = scalars.getNumberOfComponents();\n      const iComps = vprop.getIndependentComponents();\n      // const numIComps = iComps ? numComp : 1;\n\n      // half float?\n      const tformat = model.textureViews[vidx + 4].getTexture().getFormat();\n      const tDetails = vtkWebGPUTypes.getDetailsFromTextureFormat(tformat);\n      const halfFloat = tDetails.elementSize === 2 && tDetails.sampleType === 'float';\n      const volInfo = {\n        scale: [255.0],\n        offset: [0.0]\n      };\n      if (halfFloat) {\n        volInfo.scale[0] = 1.0;\n      }\n\n      // three levels of shift scale combined into one\n      // for performance in the fragment shader\n      for (let compIdx = 0; compIdx < numComp; compIdx++) {\n        const target = iComps ? compIdx : 0;\n        const sscale = volInfo.scale[compIdx];\n        const ofun = vprop.getScalarOpacity(target);\n        const oRange = ofun.getRange();\n        const oscale = sscale / (oRange[1] - oRange[0]);\n        const oshift = (volInfo.offset[compIdx] - oRange[0]) / (oRange[1] - oRange[0]);\n        oShiftArray[rowIdx] = oshift;\n        oScaleArray[rowIdx] = oscale;\n        const cfun = vprop.getRGBTransferFunction(target);\n        const cRange = cfun.getRange();\n        cShiftArray[rowIdx] = (volInfo.offset[compIdx] - cRange[0]) / (cRange[1] - cRange[0]);\n        cScaleArray[rowIdx] = sscale / (cRange[1] - cRange[0]);\n\n        // todo sscale for dependent should be based off of the A channel?\n        // not target (which is 0 in that case)\n        const useGO = vprop.getUseGradientOpacity(target);\n        if (useGO) {\n          const gomin = vprop.getGradientOpacityMinimumOpacity(target);\n          const gomax = vprop.getGradientOpacityMaximumOpacity(target);\n          gominArray[rowIdx] = gomin;\n          gomaxArray[rowIdx] = gomax;\n          const goRange = [vprop.getGradientOpacityMinimumValue(target), vprop.getGradientOpacityMaximumValue(target)];\n          goscaleArray[rowIdx] = sscale * (gomax - gomin) / (goRange[1] - goRange[0]);\n          goshiftArray[rowIdx] = -goRange[0] * (gomax - gomin) / (goRange[1] - goRange[0]) + gomin;\n        } else {\n          gominArray[rowIdx] = 1.0;\n          gomaxArray[rowIdx] = 1.0;\n          goscaleArray[rowIdx] = 0.0;\n          goshiftArray[rowIdx] = 1.0;\n        }\n        rowIdx++;\n      }\n    }\n    model.componentSSBO.addEntry('cScale', 'f32');\n    model.componentSSBO.addEntry('cShift', 'f32');\n    model.componentSSBO.addEntry('oScale', 'f32');\n    model.componentSSBO.addEntry('oShift', 'f32');\n    model.componentSSBO.addEntry('goShift', 'f32');\n    model.componentSSBO.addEntry('goScale', 'f32');\n    model.componentSSBO.addEntry('gomin', 'f32');\n    model.componentSSBO.addEntry('gomax', 'f32');\n    model.componentSSBO.setAllInstancesFromArray('cScale', cScaleArray);\n    model.componentSSBO.setAllInstancesFromArray('cShift', cShiftArray);\n    model.componentSSBO.setAllInstancesFromArray('oScale', oScaleArray);\n    model.componentSSBO.setAllInstancesFromArray('oShift', oShiftArray);\n    model.componentSSBO.setAllInstancesFromArray('goScale', goscaleArray);\n    model.componentSSBO.setAllInstancesFromArray('goShift', goshiftArray);\n    model.componentSSBO.setAllInstancesFromArray('gomin', gominArray);\n    model.componentSSBO.setAllInstancesFromArray('gomax', gomaxArray);\n    model.componentSSBO.send(device);\n  };\n  const superClassUpdateBuffers = publicAPI.updateBuffers;\n  publicAPI.updateBuffers = () => {\n    superClassUpdateBuffers();\n    // compute the min step size\n    let sampleDist = model.volumes[0].getRenderable().getMapper().getSampleDistance();\n    for (let i = 0; i < model.volumes.length; i++) {\n      const vol = model.volumes[i];\n      const volMapr = vol.getRenderable().getMapper();\n      const sd = volMapr.getSampleDistance();\n      if (sd < sampleDist) {\n        sampleDist = sd;\n      }\n    }\n    if (model.sampleDist !== sampleDist) {\n      model.sampleDist = sampleDist;\n      model.UBO.setValue('SampleDistance', sampleDist);\n      model.UBO.sendIfNeeded(model.device);\n    }\n\n    // add in 3d volume textures\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const webgpuvol = model.volumes[vidx];\n      const actor = webgpuvol.getRenderable();\n      const volMapr = actor.getMapper();\n      const image = volMapr.getInputData();\n      const newTex = model.device.getTextureManager().getTextureForImageData(image);\n      if (!model.textureViews[vidx + 4] || model.textureViews[vidx + 4].getTexture() !== newTex) {\n        const tview = newTex.createView(`volTexture${vidx}`);\n        model.textureViews[vidx + 4] = tview;\n      }\n    }\n\n    // clear any old leftovers\n    if (model.volumes.length < model.lastVolumeLength) {\n      // we may have gaps in the array right now so no splice\n      for (let i = model.volumes.length; i < model.lastVolumeLength; i++) {\n        model.textureViews.pop();\n      }\n    }\n    model.lastVolumeLength = model.volumes.length;\n    publicAPI.updateLUTImage(model.device);\n    publicAPI.updateSSBO(model.device);\n    if (!model.clampSampler) {\n      model.clampSampler = vtkWebGPUSampler.newInstance({\n        label: 'clampSampler'\n      });\n      model.clampSampler.create(model.device, {\n        minFilter: 'linear',\n        magFilter: 'linear'\n      });\n    }\n  };\n  publicAPI.computePipelineHash = () => {\n    model.pipelineHash = 'volfsq';\n    for (let vidx = 0; vidx < model.volumes.length; vidx++) {\n      const blendMode = model.volumes[vidx].getRenderable().getMapper().getBlendMode();\n      model.pipelineHash += `${blendMode}`;\n    }\n  };\n\n  // marks modified when needed\n  publicAPI.setVolumes = val => {\n    if (!model.volumes || model.volumes.length !== val.length) {\n      model.volumes = [...val];\n      publicAPI.modified();\n      return;\n    }\n    for (let i = 0; i < val.length; i++) {\n      if (val[i] !== model.volumes[i]) {\n        model.volumes = [...val];\n        publicAPI.modified();\n        return;\n      }\n    }\n  };\n  const superclassGetBindables = publicAPI.getBindables;\n  publicAPI.getBindables = () => {\n    const bindables = superclassGetBindables();\n    bindables.push(model.componentSSBO);\n    bindables.push(model.clampSampler);\n    return bindables;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  volumes: null,\n  rowLength: 1024,\n  lastVolumeLength: 0\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Inheritance\n  vtkWebGPUFullScreenQuad.extend(publicAPI, model, initialValues);\n  model.fragmentShaderTemplate = volFragTemplate;\n  model.UBO = vtkWebGPUUniformBuffer.newInstance({\n    label: 'mapperUBO'\n  });\n  model.UBO.addEntry('SampleDistance', 'f32');\n  model.SSBO = vtkWebGPUStorageBuffer.newInstance({\n    label: 'volumeSSBO'\n  });\n  model.componentSSBO = vtkWebGPUStorageBuffer.newInstance({\n    label: 'componentSSBO'\n  });\n  model.lutBuildTime = {};\n  macro.obj(model.lutBuildTime, {\n    mtime: 0\n  });\n\n  // Object methods\n  vtkWebGPUVolumePassFSQ(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUVolumePassFSQ');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUVolumePassFSQ$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUVolumePassFSQ$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkPolyData from '../../Common/DataModel/PolyData.js';\nimport vtkProperty from '../Core/Property.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUSimpleMapper from './SimpleMapper.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkWebGPUUniformBuffer from './UniformBuffer.js';\nimport vtkWebGPUFullScreenQuad from './FullScreenQuad.js';\nimport vtkWebGPUVolumePassFSQ from './VolumePassFSQ.js';\nimport { f as distance2BetweenPoints } from '../../Common/Core/Math/index.js';\n\nconst {\n  Representation\n} = vtkProperty;\nconst {\n  BufferUsage,\n  PrimitiveTypes\n} = vtkWebGPUBufferManager;\n\n// The volume rendering pass consists of two sub passes. The first\n// (depthRange) renders polygonal cubes for the volumes to compute min and\n// max bounds in depth for the image. This is then fed into the second pass\n// (final) which actually does the raycasting between those bounds sampling\n// the volumes along the way. So the first pass tends to be very fast whicle\n// the second is where most of the work is done.\n\n// given x then y then z ordering\n//\n//     2-----3\n//   / |   / |\n//  6-----7  |\n//  |  |  |  |\n//  |  0-----1\n//  |/    |/\n//  4-----5\n//\nconst cubeFaceTriangles = [[0, 4, 6], [0, 6, 2], [1, 3, 7], [1, 7, 5], [0, 5, 4], [0, 1, 5], [2, 6, 7], [2, 7, 3], [0, 3, 1], [0, 2, 3], [4, 5, 7], [4, 7, 6]];\nconst DepthBoundsFS = `\n//VTK::Renderer::Dec\n\n//VTK::Select::Dec\n\n//VTK::VolumePass::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Select::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::VolumePass::Impl\n\n  // use the maximum (closest) of the current value and the zbuffer\n  // the blend func will then take the min to find the farthest stop value\n  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\nconst volumeCopyFragTemplate = `\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,\n    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\n\n/* eslint-disable no-undef */\n/* eslint-disable no-bitwise */\n\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUVolumePass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUVolumePass');\n\n  // create the required textures, encoders, FSQ etc\n  publicAPI.initialize = viewNode => {\n    if (!model._clearEncoder) {\n      publicAPI.createClearEncoder(viewNode);\n    }\n    if (!model._mergeEncoder) {\n      publicAPI.createMergeEncoder(viewNode);\n    }\n    if (!model._copyEncoder) {\n      publicAPI.createCopyEncoder(viewNode);\n    }\n    if (!model._depthRangeEncoder) {\n      publicAPI.createDepthRangeEncoder(viewNode);\n    }\n    if (!model.fullScreenQuad) {\n      model.fullScreenQuad = vtkWebGPUVolumePassFSQ.newInstance();\n      model.fullScreenQuad.setDevice(viewNode.getDevice());\n      model.fullScreenQuad.setTextureViews([...model._depthRangeEncoder.getColorTextureViews()]);\n    }\n    if (!model._volumeCopyQuad) {\n      model._volumeCopyQuad = vtkWebGPUFullScreenQuad.newInstance();\n      model._volumeCopyQuad.setPipelineHash('volpassfsq');\n      model._volumeCopyQuad.setDevice(viewNode.getDevice());\n      model._volumeCopyQuad.setFragmentShaderTemplate(volumeCopyFragTemplate);\n      model._copyUBO = vtkWebGPUUniformBuffer.newInstance({\n        label: 'mapperUBO'\n      });\n      model._copyUBO.addEntry('tscale', 'vec2<f32>');\n      model._volumeCopyQuad.setUBO(model._copyUBO);\n      model._volumeCopyQuad.setTextureViews([model._colorTextureView]);\n    }\n  };\n  publicAPI.traverse = (renNode, viewNode) => {\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = viewNode;\n\n    // create stuff we need\n    publicAPI.initialize(viewNode);\n\n    // determine if we are rendering a small size\n    publicAPI.computeTiming(viewNode);\n\n    // first render the boxes to generate a min max depth\n    // map for all the volumes\n    publicAPI.renderDepthBounds(renNode, viewNode);\n\n    // always mark true\n    model._firstGroup = true;\n    const device = viewNode.getDevice();\n\n    // determine how many volumes we can render at a time. We subtract\n    // 4 because we use know we use textures for min, max, ofun and tfun\n    const maxVolumes = device.getHandle().limits.maxSampledTexturesPerShaderStage - 4;\n\n    // if we have to make multiple passes then break the volumes up into groups\n    // rendered from farthest to closest\n    if (model.volumes.length > maxVolumes) {\n      const cameraPos = renNode.getRenderable().getActiveCamera().getPosition();\n      // sort from back to front based on volume centroid\n      const distances = [];\n      for (let v = 0; v < model.volumes.length; v++) {\n        const bounds = model.volumes[v].getRenderable().getBounds();\n        const centroid = [0.5 * (bounds[1] + bounds[0]), 0.5 * (bounds[3] + bounds[2]), 0.5 * (bounds[5] + bounds[4])];\n        distances[v] = distance2BetweenPoints(centroid, cameraPos);\n      }\n\n      // sort by distance\n      const volumeOrder = [...Array(model.volumes.length).keys()];\n      volumeOrder.sort((a, b) => distances[b] - distances[a]);\n\n      // render in chunks back to front\n      let volumesToRender = [];\n      // start with smallest chunk so that the last (closest) chunk\n      // has a full maxVolumes;\n      let chunkSize = volumeOrder.length % maxVolumes;\n      for (let v = 0; v < volumeOrder.length; v++) {\n        volumesToRender.push(model.volumes[volumeOrder[v]]);\n        if (volumesToRender.length >= chunkSize) {\n          publicAPI.rayCastPass(viewNode, renNode, volumesToRender);\n          volumesToRender = [];\n          chunkSize = maxVolumes;\n          model._firstGroup = false;\n        }\n      }\n    } else {\n      // if not rendering in chunks then just draw all of them at once\n      publicAPI.rayCastPass(viewNode, renNode, model.volumes);\n    }\n\n    // copy back to the original color buffer\n\n    // final composite\n    model._volumeCopyQuad.setWebGPURenderer(renNode);\n    if (model._useSmallViewport) {\n      const width = model._colorTextureView.getTexture().getWidth();\n      const height = model._colorTextureView.getTexture().getHeight();\n      model._copyUBO.setArray('tscale', [model._smallViewportWidth / width, model._smallViewportHeight / height]);\n    } else {\n      model._copyUBO.setArray('tscale', [1.0, 1.0]);\n    }\n    model._copyUBO.sendIfNeeded(device);\n    model._copyEncoder.setColorTextureView(0, model.colorTextureView);\n    model._copyEncoder.attachTextureViews();\n    model._copyEncoder.begin(viewNode.getCommandEncoder());\n    renNode.scissorAndViewport(model._copyEncoder);\n    model._volumeCopyQuad.prepareAndDraw(model._copyEncoder);\n    model._copyEncoder.end();\n  };\n\n  // unsubscribe from our listeners\n  publicAPI.delete = macro.chain(() => {\n    if (model._animationRateSubscription) {\n      model._animationRateSubscription.unsubscribe();\n      model._animationRateSubscription = null;\n    }\n  }, publicAPI.delete);\n  publicAPI.computeTiming = viewNode => {\n    const rwi = viewNode.getRenderable().getInteractor();\n    if (model._lastScale == null) {\n      const firstMapper = model.volumes[0].getRenderable().getMapper();\n      model._lastScale = firstMapper.getInitialInteractionScale() || 1.0;\n    }\n    model._useSmallViewport = false;\n    if (rwi.isAnimating() && model._lastScale > 1.5) {\n      model._useSmallViewport = true;\n    }\n    model._colorTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n    if (!model._animationRateSubscription) {\n      // when the animation frame rate changes recompute the scale factor\n      model._animationRateSubscription = rwi.onAnimationFrameRateUpdate(() => {\n        const firstMapper = model.volumes[0].getRenderable().getMapper();\n        if (firstMapper.getAutoAdjustSampleDistances()) {\n          const frate = rwi.getRecentAnimationFrameRate();\n          const targetScale = model._lastScale * rwi.getDesiredUpdateRate() / frate;\n          model._lastScale = targetScale;\n          // clamp scale to some reasonable values.\n          // Below 1.5 we will just be using full resolution as that is close enough\n          // Above 400 seems like a lot so we limit to that 1/20th per axis\n          if (model._lastScale > 400) {\n            model._lastScale = 400;\n          }\n        } else {\n          model._lastScale = firstMapper.getImageSampleDistance() * firstMapper.getImageSampleDistance();\n        }\n        if (model._lastScale < 1.5) {\n          model._lastScale = 1.5;\n        }\n      });\n    }\n  };\n  publicAPI.rayCastPass = (viewNode, renNode, volumes) => {\n    const encoder = model._firstGroup ? model._clearEncoder : model._mergeEncoder;\n    encoder.attachTextureViews();\n    encoder.begin(viewNode.getCommandEncoder());\n    let width = model._colorTextureView.getTexture().getWidth();\n    let height = model._colorTextureView.getTexture().getHeight();\n    if (model._useSmallViewport) {\n      const canvas = viewNode.getCanvas();\n      const scaleFactor = 1 / Math.sqrt(model._lastScale);\n      model._smallViewportWidth = Math.ceil(scaleFactor * canvas.width);\n      model._smallViewportHeight = Math.ceil(scaleFactor * canvas.height);\n      width = model._smallViewportWidth;\n      height = model._smallViewportHeight;\n    }\n    encoder.getHandle().setViewport(0, 0, width, height, 0.0, 1.0);\n    // set scissor\n    encoder.getHandle().setScissorRect(0, 0, width, height);\n    model.fullScreenQuad.setWebGPURenderer(renNode);\n    model.fullScreenQuad.setVolumes(volumes);\n    model.fullScreenQuad.prepareAndDraw(encoder);\n    encoder.end();\n  };\n  publicAPI.renderDepthBounds = (renNode, viewNode) => {\n    publicAPI.updateDepthPolyData(renNode);\n    const pd = model._boundsPoly;\n    const points = pd.getPoints();\n    const cells = pd.getPolys();\n    let buffRequest = {\n      hash: `vp${cells.getMTime()}`,\n      usage: BufferUsage.Index,\n      cells,\n      numberOfPoints: points.getNumberOfPoints(),\n      primitiveType: PrimitiveTypes.Triangles,\n      representation: Representation.SURFACE\n    };\n    const indexBuffer = viewNode.getDevice().getBufferManager().getBuffer(buffRequest);\n    model._mapper.getVertexInput().setIndexBuffer(indexBuffer);\n\n    // points\n    buffRequest = {\n      usage: BufferUsage.PointArray,\n      format: 'float32x4',\n      hash: `vp${points.getMTime()}${cells.getMTime()}`,\n      dataArray: points,\n      indexBuffer,\n      packExtra: true\n    };\n    const buff = viewNode.getDevice().getBufferManager().getBuffer(buffRequest);\n    model._mapper.getVertexInput().addBuffer(buff, ['vertexBC']);\n    model._mapper.setNumberOfVertices(buff.getSizeInBytes() / buff.getStrideInBytes());\n    publicAPI.drawDepthRange(renNode, viewNode);\n  };\n  publicAPI.updateDepthPolyData = renNode => {\n    // check mtimes first\n    let update = false;\n    for (let i = 0; i < model.volumes.length; i++) {\n      const mtime = model.volumes[i].getMTime();\n      if (!model._lastMTimes[i] || mtime !== model._lastMTimes[i]) {\n        update = true;\n        model._lastMTimes[i] = mtime;\n      }\n    }\n\n    // also check stabilized time\n    const stime = renNode.getStabilizedTime();\n    if (model._lastMTimes.length <= model.volumes.length || stime !== model._lastMTimes[model.volumes.length]) {\n      update = true;\n      model._lastMTimes[model.volumes.length] = stime;\n    }\n\n    // if no need to update then return\n    if (!update) {\n      return;\n    }\n\n    // rebuild\n    const center = renNode.getStabilizedCenterByReference();\n    const numPts = model.volumes.length * 8;\n    const points = new Float64Array(numPts * 3);\n    const numTris = model.volumes.length * 12;\n    const polys = new Uint16Array(numTris * 4);\n\n    // add points and cells\n    for (let i = 0; i < model.volumes.length; i++) {\n      model.volumes[i].getBoundingCubePoints(points, i * 24);\n      let cellIdx = i * 12 * 4;\n      const offset = i * 8;\n      for (let t = 0; t < 12; t++) {\n        polys[cellIdx++] = 3;\n        polys[cellIdx++] = offset + cubeFaceTriangles[t][0];\n        polys[cellIdx++] = offset + cubeFaceTriangles[t][1];\n        polys[cellIdx++] = offset + cubeFaceTriangles[t][2];\n      }\n    }\n    for (let p = 0; p < points.length; p += 3) {\n      points[p] -= center[0];\n      points[p + 1] -= center[1];\n      points[p + 2] -= center[2];\n    }\n    model._boundsPoly.getPoints().setData(points, 3);\n    model._boundsPoly.getPoints().modified();\n    model._boundsPoly.getPolys().setData(polys, 1);\n    model._boundsPoly.getPolys().modified();\n    model._boundsPoly.modified();\n  };\n  publicAPI.drawDepthRange = (renNode, viewNode) => {\n    // copy current depth buffer to\n    model._depthRangeTexture.resizeToMatch(model.colorTextureView.getTexture());\n    model._depthRangeTexture2.resizeToMatch(model.colorTextureView.getTexture());\n    model._depthRangeEncoder.attachTextureViews();\n    publicAPI.setCurrentOperation('volumeDepthRangePass');\n    renNode.setRenderEncoder(model._depthRangeEncoder);\n    renNode.volumeDepthRangePass(true);\n    model._mapper.setWebGPURenderer(renNode);\n    model._mapper.prepareToDraw(model._depthRangeEncoder);\n    model._mapper.registerDrawCallback(model._depthRangeEncoder);\n    renNode.volumeDepthRangePass(false);\n  };\n  publicAPI.createDepthRangeEncoder = viewNode => {\n    const device = viewNode.getDevice();\n    model._depthRangeEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'VolumePass DepthRange'\n    });\n    model._depthRangeEncoder.setPipelineHash('volr');\n    model._depthRangeEncoder.setReplaceShaderCodeFunction(pipeline => {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      fDesc.addOutput('vec4<f32>', 'outColor1');\n      fDesc.addOutput('vec4<f32>', 'outColor2');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', ['output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);', 'output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);']).result;\n      fDesc.setCode(code);\n    });\n    model._depthRangeEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        clearValue: [0.0, 0.0, 0.0, 0.0],\n        loadOp: 'clear',\n        storeOp: 'store'\n      }, {\n        view: null,\n        clearValue: [1.0, 1.0, 1.0, 1.0],\n        loadOp: 'clear',\n        storeOp: 'store'\n      }]\n    });\n    model._depthRangeEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: 'r16float',\n          blend: {\n            color: {\n              srcFactor: 'one',\n              dstFactor: 'one',\n              operation: 'max'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one',\n              operation: 'max'\n            }\n          }\n        }, {\n          format: 'r16float',\n          blend: {\n            color: {\n              srcFactor: 'one',\n              dstFactor: 'one',\n              operation: 'min'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one',\n              operation: 'min'\n            }\n          }\n        }]\n      }\n    });\n\n    // and the textures it needs\n    model._depthRangeTexture = vtkWebGPUTexture.newInstance({\n      label: 'volumePassMaxDepth'\n    });\n    model._depthRangeTexture.create(device, {\n      width: viewNode.getCanvas().width,\n      height: viewNode.getCanvas().height,\n      format: 'r16float',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\n    });\n    const maxView = model._depthRangeTexture.createView('maxTexture');\n    model._depthRangeEncoder.setColorTextureView(0, maxView);\n    model._depthRangeTexture2 = vtkWebGPUTexture.newInstance({\n      label: 'volumePassDepthMin'\n    });\n    model._depthRangeTexture2.create(device, {\n      width: viewNode.getCanvas().width,\n      height: viewNode.getCanvas().height,\n      format: 'r16float',\n      usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING\n    });\n    const minView = model._depthRangeTexture2.createView('minTexture');\n    model._depthRangeEncoder.setColorTextureView(1, minView);\n    model._mapper.setDevice(viewNode.getDevice());\n    model._mapper.setTextureViews([model.depthTextureView]);\n  };\n  publicAPI.createClearEncoder = viewNode => {\n    model._colorTexture = vtkWebGPUTexture.newInstance({\n      label: 'volumePassColor'\n    });\n    model._colorTexture.create(viewNode.getDevice(), {\n      width: viewNode.getCanvas().width,\n      height: viewNode.getCanvas().height,\n      format: 'bgra8unorm',\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n    });\n    model._colorTextureView = model._colorTexture.createView('volumePassColorTexture');\n    model._colorTextureView.addSampler(viewNode.getDevice(), {\n      minFilter: 'linear',\n      magFilter: 'linear'\n    });\n    model._clearEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'VolumePass Clear'\n    });\n    model._clearEncoder.setColorTextureView(0, model._colorTextureView);\n    model._clearEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        clearValue: [0.0, 0.0, 0.0, 0.0],\n        loadOp: 'clear',\n        storeOp: 'store'\n      }]\n    });\n    model._clearEncoder.setPipelineHash('volpf');\n    model._clearEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: 'bgra8unorm',\n          blend: {\n            color: {\n              srcFactor: 'src-alpha',\n              dstFactor: 'one-minus-src-alpha'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n  };\n  publicAPI.createCopyEncoder = viewNode => {\n    model._copyEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'volumePassCopy'\n    });\n    model._copyEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        loadOp: 'load',\n        storeOp: 'store'\n      }]\n    });\n    model._copyEncoder.setPipelineHash('volcopypf');\n    model._copyEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: 'rgba16float',\n          blend: {\n            color: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n  };\n  publicAPI.createMergeEncoder = viewNode => {\n    model._mergeEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'volumePassMerge'\n    });\n    model._mergeEncoder.setColorTextureView(0, model._colorTextureView);\n    model._mergeEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        loadOp: 'load',\n        storeOp: 'store'\n      }]\n    });\n    model._mergeEncoder.setReplaceShaderCodeFunction(pipeline => {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      fDesc.addOutput('vec4<f32>', 'outColor');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', ['output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);']).result;\n      fDesc.setCode(code);\n    });\n    model._mergeEncoder.setPipelineHash('volpf');\n    model._mergeEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: 'bgra8unorm',\n          blend: {\n            color: {\n              srcFactor: 'src-alpha',\n              dstFactor: 'one-minus-src-alpha'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n  };\n\n  // marks modified when needed\n  publicAPI.setVolumes = val => {\n    if (!model.volumes || model.volumes.length !== val.length) {\n      model.volumes = [...val];\n      publicAPI.modified();\n      return;\n    }\n    for (let i = 0; i < val.length; i++) {\n      if (val[i] !== model.volumes[i]) {\n        model.volumes = [...val];\n        publicAPI.modified();\n        return;\n      }\n    }\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  colorTextureView: null,\n  depthTextureView: null,\n  volumes: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  model._mapper = vtkWebGPUSimpleMapper.newInstance();\n  model._mapper.setFragmentShaderTemplate(DepthBoundsFS);\n  model._mapper.getShaderReplacements().set('replaceShaderVolumePass', (hash, pipeline, vertexInput) => {\n    const fDesc = pipeline.getShaderDescription('fragment');\n    fDesc.addBuiltinInput('vec4<f32>', '@builtin(position) fragPos');\n  });\n  model._boundsPoly = vtkPolyData.newInstance();\n  model._lastMTimes = [];\n  macro.setGet(publicAPI, model, ['colorTextureView', 'depthTextureView']);\n\n  // Object methods\n  vtkWebGPUVolumePass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUVolumePass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUVolumePass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUVolumePass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPUFullScreenQuad from './FullScreenQuad.js';\nimport vtkWebGPUOpaquePass from './OpaquePass.js';\nimport vtkWebGPUOrderIndepenentTranslucentPass from './OrderIndependentTranslucentPass.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUVolumePass from './VolumePass.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkWebGPUSampler from './Sampler.js';\nimport vtkWebGPUTextureView from './TextureView.js';\n\nconst finalBlitFragTemplate = `\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n`;\n\n// ----------------------------------------------------------------------------\n\nfunction vtkForwardPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkForwardPass');\n\n  // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n  publicAPI.traverse = function (viewNode) {\n    let parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (model.deleted) {\n      return;\n    }\n\n    // we just render our delegates in order\n    model._currentParent = parent;\n\n    // build\n    publicAPI.setCurrentOperation('buildPass');\n    viewNode.traverse(publicAPI);\n    if (!model.opaquePass) {\n      model.opaquePass = vtkWebGPUOpaquePass.newInstance();\n    }\n    const numlayers = viewNode.getRenderable().getNumberOfLayers();\n\n    // iterate over renderers\n    const renderers = viewNode.getChildren();\n    for (let i = 0; i < numlayers; i++) {\n      for (let index = 0; index < renderers.length; index++) {\n        const renNode = renderers[index];\n        const ren = viewNode.getRenderable().getRenderers()[index];\n        if (ren.getDraw() && ren.getLayer() === i) {\n          // check for both opaque and volume actors\n          model.opaqueActorCount = 0;\n          model.translucentActorCount = 0;\n          model.volumes = [];\n          publicAPI.setCurrentOperation('queryPass');\n          renNode.traverse(publicAPI);\n          publicAPI.setCurrentOperation('cameraPass');\n          renNode.traverse(publicAPI);\n\n          // always do opaque pass to get a valid color and zbuffer, even if empty\n          model.opaquePass.traverse(renNode, viewNode);\n\n          // optional translucent pass\n          if (model.translucentActorCount > 0) {\n            if (!model.translucentPass) {\n              model.translucentPass = vtkWebGPUOrderIndepenentTranslucentPass.newInstance();\n            }\n            model.translucentPass.setColorTextureView(model.opaquePass.getColorTextureView());\n            model.translucentPass.setDepthTextureView(model.opaquePass.getDepthTextureView());\n            model.translucentPass.traverse(renNode, viewNode);\n          }\n\n          // optional volume pass\n          if (model.volumes.length > 0) {\n            if (!model.volumePass) {\n              model.volumePass = vtkWebGPUVolumePass.newInstance();\n            }\n            model.volumePass.setColorTextureView(model.opaquePass.getColorTextureView());\n            model.volumePass.setDepthTextureView(model.opaquePass.getDepthTextureView());\n            model.volumePass.setVolumes(model.volumes);\n            model.volumePass.traverse(renNode, viewNode);\n          }\n\n          // blit the result into the swap chain\n          publicAPI.finalPass(viewNode, renNode);\n        }\n      }\n    }\n  };\n  publicAPI.finalPass = (viewNode, renNode) => {\n    if (!model._finalBlitEncoder) {\n      publicAPI.createFinalBlitEncoder(viewNode);\n    }\n    model._finalBlitOutputTextureView.createFromTextureHandle(viewNode.getCurrentTexture(), {\n      depth: 1,\n      format: viewNode.getPresentationFormat()\n    });\n    model._finalBlitEncoder.attachTextureViews();\n    model._finalBlitEncoder.begin(viewNode.getCommandEncoder());\n    renNode.scissorAndViewport(model._finalBlitEncoder);\n    model._fullScreenQuad.prepareAndDraw(model._finalBlitEncoder);\n    model._finalBlitEncoder.end();\n  };\n  publicAPI.createFinalBlitEncoder = viewNode => {\n    model._finalBlitEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'forwardPassBlit'\n    });\n    model._finalBlitEncoder.setDescription({\n      colorAttachments: [{\n        view: null,\n        loadOp: 'load',\n        storeOp: 'store'\n      }]\n    });\n    model._finalBlitEncoder.setPipelineHash('fpf');\n    model._finalBlitEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      fragment: {\n        targets: [{\n          format: viewNode.getPresentationFormat(),\n          blend: {\n            color: {\n              srcFactor: 'src-alpha',\n              dstFactor: 'one-minus-src-alpha'\n            },\n            alpha: {\n              srcFactor: 'one',\n              dstFactor: 'one-minus-src-alpha'\n            }\n          }\n        }]\n      }\n    });\n    model._fsqSampler = vtkWebGPUSampler.newInstance({\n      label: 'finalPassSampler'\n    });\n    model._fsqSampler.create(viewNode.getDevice(), {\n      minFilter: 'linear',\n      magFilter: 'linear'\n    });\n    model._fullScreenQuad = vtkWebGPUFullScreenQuad.newInstance();\n    model._fullScreenQuad.setDevice(viewNode.getDevice());\n    model._fullScreenQuad.setPipelineHash('fpfsq');\n    model._fullScreenQuad.setTextureViews([model.opaquePass.getColorTextureView()]);\n    model._fullScreenQuad.setAdditionalBindables([model._fsqSampler]);\n    model._fullScreenQuad.setFragmentShaderTemplate(finalBlitFragTemplate);\n    model._finalBlitOutputTextureView = vtkWebGPUTextureView.newInstance();\n    model._finalBlitEncoder.setColorTextureView(0, model._finalBlitOutputTextureView);\n  };\n  publicAPI.incrementOpaqueActorCount = () => model.opaqueActorCount++;\n  publicAPI.incrementTranslucentActorCount = () => model.translucentActorCount++;\n  publicAPI.addVolume = volume => {\n    model.volumes.push(volume);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  opaqueActorCount: 0,\n  translucentActorCount: 0,\n  volumes: null,\n  opaqueRenderEncoder: null,\n  translucentPass: null,\n  volumePass: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['opaquePass', 'translucentPass', 'volumePass']);\n\n  // Object methods\n  vtkForwardPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkForwardPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkForwardPass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkForwardPass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkDataArray from '../../Common/Core/DataArray.js';\nimport vtkWebGPUTexture from './Texture.js';\n\nconst {\n  VtkDataTypes\n} = vtkDataArray;\n\n// ----------------------------------------------------------------------------\n// Global methods\n// ----------------------------------------------------------------------------\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUTextureManager methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUTextureManager(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUTextureManager');\n\n  // fills in request values based on what is missing/provided\n  function _fillRequest(req) {\n    // fill in values based on imageData if the request has it\n    if (req.imageData) {\n      req.dataArray = req.imageData.getPointData().getScalars();\n      req.time = req.dataArray.getMTime();\n      req.nativeArray = req.dataArray.getData();\n      const dims = req.imageData.getDimensions();\n      req.width = dims[0];\n      req.height = dims[1];\n      req.depth = dims[2];\n      const numComp = req.dataArray.getNumberOfComponents();\n      // todo fix handling of 3 component\n      switch (numComp) {\n        case 1:\n          req.format = 'r';\n          break;\n        case 2:\n          req.format = 'rg';\n          break;\n        case 3:\n        case 4:\n        default:\n          req.format = 'rgba';\n          break;\n      }\n      const dataType = req.dataArray.getDataType();\n      switch (dataType) {\n        case VtkDataTypes.UNSIGNED_CHAR:\n          req.format += '8unorm';\n          break;\n        // todo extend to other types that are not filterable\n        // as they can be useful\n        case VtkDataTypes.FLOAT:\n        case VtkDataTypes.UNSIGNED_INT:\n        case VtkDataTypes.INT:\n        case VtkDataTypes.DOUBLE:\n        case VtkDataTypes.UNSIGNED_SHORT:\n        case VtkDataTypes.SHORT:\n        default:\n          req.format += '16float';\n          break;\n      }\n    }\n\n    // fill in values based on image if the request has it\n    if (req.image) {\n      req.width = req.image.width;\n      req.height = req.image.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      req.usage = GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT;\n      /* eslint-enable no-undef */\n      /* eslint-enable no-bitwise */\n    }\n\n    // fill in based on js imageData\n    if (req.jsImageData) {\n      req.width = req.jsImageData.width;\n      req.height = req.jsImageData.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      req.nativeArray = req.jsImageData.data;\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      req.usage = GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT;\n      /* eslint-enable no-undef */\n      /* eslint-enable no-bitwise */\n    }\n\n    if (req.imageBitmap) {\n      req.width = req.imageBitmap.width;\n      req.height = req.imageBitmap.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      req.usage = GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT;\n      /* eslint-enable no-undef */\n      /* eslint-enable no-bitwise */\n    }\n\n    if (req.canvas) {\n      req.width = req.canvas.width;\n      req.height = req.canvas.height;\n      req.depth = 1;\n      req.format = 'rgba8unorm';\n      req.flip = true;\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      req.usage = GPUTextureUsage.STORAGE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT;\n      /* eslint-enable no-undef */\n      /* eslint-enable no-bitwise */\n    }\n  }\n\n  // create a texture (used by getTexture)\n  function _createTexture(req) {\n    const newTex = vtkWebGPUTexture.newInstance({\n      label: req.label\n    });\n    newTex.create(model.device, {\n      width: req.width,\n      height: req.height,\n      depth: req.depth,\n      format: req.format,\n      usage: req.usage,\n      mipLevel: req.mipLevel\n    });\n\n    // fill the texture if we have data\n    if (req.nativeArray || req.image || req.canvas || req.imageBitmap) {\n      newTex.writeImageData(req);\n    }\n    return newTex;\n  }\n\n  // get a texture or create it if not cached.\n  // this is the main entry point\n  publicAPI.getTexture = req => {\n    // if we have a source then get/create/cache the texture\n    if (req.hash) {\n      // if a matching texture already exists then return it\n      return model.device.getCachedObject(req.hash, _createTexture, req);\n    }\n    return _createTexture(req);\n  };\n  publicAPI.getTextureForImageData = imgData => {\n    const treq = {\n      time: imgData.getMTime()\n    };\n    treq.imageData = imgData;\n    // fill out the req time and format based on imageData/image\n    _fillRequest(treq);\n    treq.hash = treq.time + treq.format + treq.mipLevel;\n    return model.device.getTextureManager().getTexture(treq);\n  };\n  publicAPI.getTextureForVTKTexture = function (srcTexture) {\n    let label = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    const treq = {\n      time: srcTexture.getMTime(),\n      label\n    };\n    if (srcTexture.getInputData()) {\n      treq.imageData = srcTexture.getInputData();\n    } else if (srcTexture.getImage()) {\n      treq.image = srcTexture.getImage();\n    } else if (srcTexture.getJsImageData()) {\n      treq.jsImageData = srcTexture.getJsImageData();\n    } else if (srcTexture.getImageBitmap()) {\n      treq.imageBitmap = srcTexture.getImageBitmap();\n    } else if (srcTexture.getCanvas()) {\n      treq.canvas = srcTexture.getCanvas();\n    }\n    // fill out the req time and format based on imageData/image\n    _fillRequest(treq);\n    treq.mipLevel = srcTexture.getMipLevel();\n    treq.hash = treq.time + treq.format + treq.mipLevel;\n    return model.device.getTextureManager().getTexture(treq);\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  handle: null,\n  device: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['device']);\n  vtkWebGPUTextureManager(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUTextureManager$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUTextureManager$1 as default, extend, newInstance };\n", "import { n as newInstance$1, o as obj, e as setGet, g as get } from '../../macros2.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkWebGPUTextureManager from './TextureManager.js';\n\n/**\n * provide a simple WeakRefMap class to share device objects based on\n * hash values so that buffers/textures etc can be shared betwen mappers.\n * This is roughly based on WeakLRUCache but without the actual caching\n * behavior. This is just a map of key -> WeakRef(value)\n */\n\n/* eslint-disable no-undef */\nclass WeakRefMap extends Map {\n  constructor() {\n    super();\n    this.registry = new FinalizationRegistry(key => {\n      const entry = super.get(key);\n      if (entry && entry.deref && entry.deref() === undefined) super.delete(key);\n    });\n  }\n  getValue(key) {\n    const entry = super.get(key);\n    if (entry) {\n      const value = entry.deref();\n      if (value !== undefined) return value;\n      super.delete(key);\n    }\n    return undefined;\n  }\n  setValue(key, value) {\n    let entry;\n    if (value && typeof value === 'object') {\n      entry = new WeakRef(value);\n      this.registry.register(value, key);\n      super.set(key, entry);\n    }\n    // else entry is undefined\n    return entry;\n  }\n}\n/* eslint-enable no-undef */\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUDevice methods\n// ----------------------------------------------------------------------------\nfunction vtkWebGPUDevice(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUDevice');\n  publicAPI.initialize = handle => {\n    model.handle = handle;\n  };\n  publicAPI.createCommandEncoder = () => model.handle.createCommandEncoder();\n  publicAPI.submitCommandEncoder = commandEncoder => {\n    model.handle.queue.submit([commandEncoder.finish()]);\n  };\n  publicAPI.getShaderModule = sd => model.shaderCache.getShaderModule(sd);\n\n  /* eslint-disable no-bitwise */\n  /* eslint-disable no-undef */\n  publicAPI.getBindGroupLayout = val => {\n    if (!val.entries) {\n      return null;\n    }\n\n    // add in basic required values if missing\n    for (let i = 0; i < val.entries.length; i++) {\n      const ent = val.entries[i];\n      ent.binding = ent.binding || 0;\n      ent.visibility = ent.visibility || GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT;\n    }\n\n    // do we already have one?\n    const sval = JSON.stringify(val);\n    for (let i = 0; i < model.bindGroupLayouts.length; i++) {\n      if (model.bindGroupLayouts[i].sval === sval) {\n        return model.bindGroupLayouts[i].layout;\n      }\n    }\n\n    // create one and store it\n    const layout = model.handle.createBindGroupLayout(val);\n\n    // we actually only store the stringified version\n    // as that is what we always compare against\n    model.bindGroupLayouts.push({\n      sval,\n      layout\n    });\n    return layout;\n  };\n  publicAPI.getBindGroupLayoutDescription = layout => {\n    for (let i = 0; i < model.bindGroupLayouts.length; i++) {\n      if (model.bindGroupLayouts[i].layout === layout) {\n        return model.bindGroupLayouts[i].sval;\n      }\n    }\n    vtkErrorMacro('layout not found');\n    console.trace();\n    return null;\n  };\n  publicAPI.getPipeline = hash => {\n    if (hash in model.pipelines) {\n      return model.pipelines[hash];\n    }\n    return null;\n  };\n  publicAPI.createPipeline = (hash, pipeline) => {\n    pipeline.initialize(publicAPI, hash);\n    model.pipelines[hash] = pipeline;\n  };\n  publicAPI.onSubmittedWorkDone = () => model.handle.queue.onSubmittedWorkDone();\n\n  // The Device has an object cache that can be used to cache buffers,\n  // textures and other objects that can be shared. The basic approach is to\n  // call getCachedObject with a request and a create function. The request\n  // is based on a hash. The cache lookup just returns any entry that has a\n  // matching hash. If a match isn't found then the create function is\n  // called with any extra arguments.\n\n  // is the object already cached?\n  publicAPI.hasCachedObject = hash => model.objectCache.getValue(hash);\n  publicAPI.getCachedObject = function (hash, creator) {\n    if (!hash) {\n      vtkErrorMacro('attempt to cache an object without a hash');\n      return null;\n    }\n    const existingValue = model.objectCache.getValue(hash);\n    if (existingValue) {\n      return existingValue;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    const createdObject = creator(...args);\n    model.objectCache.setValue(hash, createdObject);\n    return createdObject;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\nconst DEFAULT_VALUES = {\n  handle: null,\n  pipelines: null,\n  shaderCache: null,\n  bindGroupLayouts: null,\n  bufferManager: null,\n  textureManager: null\n};\n\n// ----------------------------------------------------------------------------\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  obj(publicAPI, model);\n  setGet(publicAPI, model, ['handle']);\n  get(publicAPI, model, ['bufferManager', 'shaderCache', 'textureManager']);\n\n  // this is a weak ref cache implementation, we create it without\n  // an expirer (so it is strictly based on garbage collection and\n  // objects are not held if there are no external references)\n  // model.objectCache = new WeakLRUCache({ expirer: false });\n  model.objectCache = new WeakRefMap();\n  model.shaderCache = vtkWebGPUShaderCache.newInstance();\n  model.shaderCache.setDevice(publicAPI);\n  model.bindGroupLayouts = [];\n  model.bufferManager = vtkWebGPUBufferManager.newInstance();\n  model.bufferManager.setDevice(publicAPI);\n  model.textureManager = vtkWebGPUTextureManager.newInstance();\n  model.textureManager.setDevice(publicAPI);\n  model.pipelines = {};\n\n  // For more macro methods, see \"Sources/macros.js\"\n  // Object specific methods\n  vtkWebGPUDevice(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nconst newInstance = newInstance$1(extend, 'vtkWebGPUDevice');\n\n// ----------------------------------------------------------------------------\nvar vtkWebGPUDevice$1 = {\n  newInstance,\n  extend\n};\n\nexport { WeakRefMap, vtkWebGPUDevice$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkWebGPUShaderCache from './ShaderCache.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\n\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUHardwareSelectionPass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUHardwareSelectionPass');\n\n  // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n  publicAPI.traverse = (viewNode, renNode) => {\n    if (model.deleted) {\n      return;\n    }\n    model._currentParent = null;\n\n    // build\n    publicAPI.setCurrentOperation('buildPass');\n    viewNode.traverse(publicAPI);\n    const device = viewNode.getDevice();\n    if (!model.selectionRenderEncoder) {\n      publicAPI.createRenderEncoder();\n\n      // create color texture\n      model.colorTexture = vtkWebGPUTexture.newInstance({\n        label: 'hardwareSelectorColor'\n      });\n      model.colorTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'rgba32uint',\n        /* eslint-disable no-undef */\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n      });\n      const v1 = model.colorTexture.createView('hardwareSelectColorTexture');\n      model.selectionRenderEncoder.setColorTextureView(0, v1);\n\n      // create depth texture\n      model.depthTexture = vtkWebGPUTexture.newInstance({\n        label: 'hardwareSelectorDepth'\n      });\n      model.depthTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'depth32float',\n        /* eslint-disable no-undef */\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n      });\n      const v2 = model.depthTexture.createView('hardwareSelectDepthTexture');\n      model.selectionRenderEncoder.setDepthTextureView(v2);\n    } else {\n      model.colorTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n      model.depthTexture.resizeToMatch(model.colorTexture);\n    }\n    model.selectionRenderEncoder.attachTextureViews();\n    renNode.setRenderEncoder(model.selectionRenderEncoder);\n    publicAPI.setCurrentOperation('cameraPass');\n    renNode.traverse(publicAPI);\n    // opaque pass is used for selection\n    publicAPI.setCurrentOperation('opaquePass');\n    renNode.traverse(publicAPI);\n  };\n  publicAPI.createRenderEncoder = () => {\n    model.selectionRenderEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'HardwareSelectionPass'\n    });\n    // default settings are fine for this\n    model.selectionRenderEncoder.setPipelineHash('sel');\n    model.selectionRenderEncoder.setReplaceShaderCodeFunction(pipeline => {\n      const fDesc = pipeline.getShaderDescription('fragment');\n      fDesc.addOutput('vec4<u32>', 'outColor');\n      let code = fDesc.getCode();\n      code = vtkWebGPUShaderCache.substitute(code, '//VTK::RenderEncoder::Impl', ['output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);']).result;\n      fDesc.setCode(code);\n    });\n    const renDesc = model.selectionRenderEncoder.getDescription();\n    renDesc.colorAttachments[0].clearValue = [0.0, 0.0, 0.0, 0.0];\n    model.selectionRenderEncoder.setPipelineSettings({\n      primitive: {\n        cullMode: 'none'\n      },\n      depthStencil: {\n        depthWriteEnabled: true,\n        depthCompare: 'greater',\n        format: 'depth32float'\n      },\n      fragment: {\n        targets: [{\n          format: 'rgba32uint',\n          blend: undefined\n        }]\n      }\n    });\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  selectionRenderEncoder: null,\n  colorTexture: null,\n  depthTexture: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['colorTexture', 'depthTexture']);\n\n  // Object methods\n  vtkWebGPUHardwareSelectionPass(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUHardwareSelectionPass');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUHardwareSelectionPass$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUHardwareSelectionPass$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkHardwareSelector from '../Core/HardwareSelector.js';\nimport vtkWebGPUBuffer from './Buffer.js';\nimport vtkWebGPUHardwareSelectionPass from './HardwareSelectionPass.js';\nimport vtkSelectionNode from '../../Common/DataModel/SelectionNode.js';\nimport vtkDataSet from '../../Common/DataModel/DataSet.js';\n\nconst {\n  SelectionContent,\n  SelectionField\n} = vtkSelectionNode;\nconst {\n  FieldAssociations\n} = vtkDataSet;\nconst {\n  vtkErrorMacro\n} = macro;\nfunction getInfoHash(info) {\n  return `${info.propID} ${info.compositeID}`;\n}\nfunction convert(xx, yy, buffdata, channel) {\n  const offset = ((buffdata.height - yy - 1) * buffdata.colorBufferWidth + xx) * 4 + channel;\n  return buffdata.colorValues[offset];\n}\nfunction getPixelInformationWithData(buffdata, inDisplayPosition, maxDistance, outSelectedPosition) {\n  // Base case\n  const maxDist = maxDistance < 0 ? 0 : maxDistance;\n  if (maxDist === 0) {\n    outSelectedPosition[0] = inDisplayPosition[0];\n    outSelectedPosition[1] = inDisplayPosition[1];\n    if (inDisplayPosition[0] < 0 || inDisplayPosition[0] >= buffdata.width || inDisplayPosition[1] < 0 || inDisplayPosition[1] >= buffdata.height) {\n      return null;\n    }\n    const actorid = convert(inDisplayPosition[0], inDisplayPosition[1], buffdata, 0);\n    if (actorid <= 0) {\n      // the pixel did not hit any actor.\n      return null;\n    }\n    const info = {};\n    info.propID = actorid;\n    let compositeID = convert(inDisplayPosition[0], inDisplayPosition[1], buffdata, 1);\n    if (compositeID < 0 || compositeID > 0xffffff) {\n      compositeID = 0;\n    }\n    info.compositeID = compositeID;\n    if (buffdata.captureZValues) {\n      const offset = (buffdata.height - inDisplayPosition[1] - 1) * buffdata.zbufferBufferWidth + inDisplayPosition[0];\n      info.zValue = buffdata.depthValues[offset];\n      info.zValue = buffdata.webGPURenderer.convertToOpenGLDepth(info.zValue);\n      info.displayPosition = inDisplayPosition;\n    }\n    return info;\n  }\n\n  // Iterate over successively growing boxes.\n  // They recursively call the base case to handle single pixels.\n  const dispPos = [inDisplayPosition[0], inDisplayPosition[1]];\n  const curPos = [0, 0];\n  let info = getPixelInformationWithData(buffdata, inDisplayPosition, 0, outSelectedPosition);\n  if (info) {\n    return info;\n  }\n  for (let dist = 1; dist < maxDist; ++dist) {\n    // Vertical sides of box.\n    for (let y = dispPos[1] > dist ? dispPos[1] - dist : 0; y <= dispPos[1] + dist; ++y) {\n      curPos[1] = y;\n      if (dispPos[0] >= dist) {\n        curPos[0] = dispPos[0] - dist;\n        info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n        if (info) {\n          return info;\n        }\n      }\n      curPos[0] = dispPos[0] + dist;\n      info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n      if (info) {\n        return info;\n      }\n    }\n    // Horizontal sides of box.\n    for (let x = dispPos[0] >= dist ? dispPos[0] - (dist - 1) : 0; x <= dispPos[0] + (dist - 1); ++x) {\n      curPos[0] = x;\n      if (dispPos[1] >= dist) {\n        curPos[1] = dispPos[1] - dist;\n        info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n        if (info) {\n          return info;\n        }\n      }\n      curPos[1] = dispPos[1] + dist;\n      info = getPixelInformationWithData(buffdata, curPos, 0, outSelectedPosition);\n      if (info) {\n        return info;\n      }\n    }\n  }\n\n  // nothing hit.\n  outSelectedPosition[0] = inDisplayPosition[0];\n  outSelectedPosition[1] = inDisplayPosition[1];\n  return null;\n}\n\n//-----------------------------------------------------------------------------\nfunction convertSelection(fieldassociation, dataMap, buffdata) {\n  const sel = [];\n  let count = 0;\n  dataMap.forEach((value, key) => {\n    const child = vtkSelectionNode.newInstance();\n    child.setContentType(SelectionContent.INDICES);\n    switch (fieldassociation) {\n      case FieldAssociations.FIELD_ASSOCIATION_CELLS:\n        child.setFieldType(SelectionField.CELL);\n        break;\n      case FieldAssociations.FIELD_ASSOCIATION_POINTS:\n        child.setFieldType(SelectionField.POINT);\n        break;\n      default:\n        vtkErrorMacro('Unknown field association');\n    }\n    child.getProperties().propID = value.info.propID;\n    const wprop = buffdata.webGPURenderer.getPropFromID(value.info.propID);\n    child.getProperties().prop = wprop.getRenderable();\n    child.getProperties().compositeID = value.info.compositeID;\n    child.getProperties().pixelCount = value.pixelCount;\n    if (buffdata.captureZValues) {\n      child.getProperties().displayPosition = [value.info.displayPosition[0], value.info.displayPosition[1], value.info.zValue];\n      child.getProperties().worldPosition = buffdata.webGPURenderWindow.displayToWorld(value.info.displayPosition[0], value.info.displayPosition[1], value.info.zValue, buffdata.renderer);\n    }\n    child.setSelectionList(value.attributeIDs);\n    sel[count] = child;\n    count++;\n  });\n  return sel;\n}\n\n//----------------------------------------------------------------------------\nfunction generateSelectionWithData(buffdata, fx1, fy1, fx2, fy2) {\n  const x1 = Math.floor(fx1);\n  const y1 = Math.floor(fy1);\n  const x2 = Math.floor(fx2);\n  const y2 = Math.floor(fy2);\n  const dataMap = new Map();\n  const outSelectedPosition = [0, 0];\n  for (let yy = y1; yy <= y2; yy++) {\n    for (let xx = x1; xx <= x2; xx++) {\n      const pos = [xx, yy];\n      const info = getPixelInformationWithData(buffdata, pos, 0, outSelectedPosition);\n      if (info) {\n        const hash = getInfoHash(info);\n        if (!dataMap.has(hash)) {\n          dataMap.set(hash, {\n            info,\n            pixelCount: 1,\n            attributeIDs: [info.attributeID]\n          });\n        } else {\n          const dmv = dataMap.get(hash);\n          dmv.pixelCount++;\n          if (buffdata.captureZValues) {\n            if (info.zValue < dmv.info.zValue) {\n              dmv.info = info;\n            }\n          }\n          if (dmv.attributeIDs.indexOf(info.attributeID) === -1) {\n            dmv.attributeIDs.push(info.attributeID);\n          }\n        }\n      }\n    }\n  }\n  return convertSelection(buffdata.fieldAssociation, dataMap, buffdata);\n}\n\n// ----------------------------------------------------------------------------\n// vtkWebGPUHardwareSelector methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUHardwareSelector(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUHardwareSelector');\n\n  //----------------------------------------------------------------------------\n  publicAPI.endSelection = () => {\n    model.WebGPURenderer.setSelector(null);\n  };\n\n  //----------------------------------------------------------------------------\n  // note we ignore the x,y arguments as WebGPU has to do buffer copies\n  // of the entire depth bufer. We could realloc hardware selection textures\n  // based on the passed in size etc but it gets messy so for now we always\n  // render the full size window and copy it to the buffers.\n  publicAPI.getSourceDataAsync = async renderer => {\n    if (!renderer || !model._WebGPURenderWindow) {\n      vtkErrorMacro('Renderer and view must be set before calling Select.');\n      return false;\n    }\n\n    // todo revisit making selection part of core\n    // then we can do this in core\n    model._WebGPURenderWindow.getRenderable().preRender();\n    if (!model._WebGPURenderWindow.getInitialized()) {\n      model._WebGPURenderWindow.initialize();\n      await new Promise(resolve => {\n        model._WebGPURenderWindow.onInitialized(resolve);\n      });\n    }\n    const webGPURenderer = model._WebGPURenderWindow.getViewNodeFor(renderer);\n    if (!webGPURenderer) {\n      return false;\n    }\n\n    // Initialize renderer for selection.\n    // change the renderer's background to black, which will indicate a miss\n    const originalSuppress = webGPURenderer.getSuppressClear();\n    webGPURenderer.setSuppressClear(true);\n    model._selectionPass.traverse(model._WebGPURenderWindow, webGPURenderer);\n\n    // restore original background\n    webGPURenderer.setSuppressClear(originalSuppress);\n    const device = model._WebGPURenderWindow.getDevice();\n    const texture = model._selectionPass.getColorTexture();\n    const depthTexture = model._selectionPass.getDepthTexture();\n\n    // as this is async we really don't want to store things in\n    // the class as multiple calls may start before resolving\n    // so anything specific to this request gets put into the\n    // result object (by value in most cases)\n    const result = {\n      area: [0, 0, texture.getWidth() - 1, texture.getHeight() - 1],\n      captureZValues: model.captureZValues,\n      fieldAssociation: model.fieldAssociation,\n      renderer,\n      webGPURenderer,\n      webGPURenderWindow: model._WebGPURenderWindow,\n      width: texture.getWidth(),\n      height: texture.getHeight()\n    };\n\n    // must be a multiple of 256 bytes, so 16 texels with rgba32uint\n    result.colorBufferWidth = 16 * Math.floor((result.width + 15) / 16);\n    result.colorBufferSizeInBytes = result.colorBufferWidth * result.height * 4 * 4;\n    const colorBuffer = vtkWebGPUBuffer.newInstance({\n      label: 'hardwareSelectColorBuffer'\n    });\n    colorBuffer.setDevice(device);\n    /* eslint-disable no-bitwise */\n    /* eslint-disable no-undef */\n    colorBuffer.create(result.colorBufferSizeInBytes, GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST);\n    /* eslint-enable no-bitwise */\n    /* eslint-enable no-undef */\n\n    const cmdEnc = model._WebGPURenderWindow.getCommandEncoder();\n    cmdEnc.copyTextureToBuffer({\n      texture: texture.getHandle()\n    }, {\n      buffer: colorBuffer.getHandle(),\n      bytesPerRow: 16 * result.colorBufferWidth,\n      rowsPerImage: result.height\n    }, {\n      width: result.width,\n      height: result.height,\n      depthOrArrayLayers: 1\n    });\n    let zbuffer;\n    if (model.captureZValues) {\n      result.zbufferBufferWidth = 64 * Math.floor((result.width + 63) / 64);\n      zbuffer = vtkWebGPUBuffer.newInstance({\n        label: 'hardwareSelectDepthBuffer'\n      });\n      zbuffer.setDevice(device);\n      result.zbufferSizeInBytes = result.height * result.zbufferBufferWidth * 4;\n      /* eslint-disable no-bitwise */\n      /* eslint-disable no-undef */\n      zbuffer.create(result.zbufferSizeInBytes, GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST);\n      /* eslint-enable no-bitwise */\n      /* eslint-enable no-undef */\n\n      cmdEnc.copyTextureToBuffer({\n        texture: depthTexture.getHandle(),\n        aspect: 'depth-only'\n      }, {\n        buffer: zbuffer.getHandle(),\n        bytesPerRow: 4 * result.zbufferBufferWidth,\n        rowsPerImage: result.height\n      }, {\n        width: result.width,\n        height: result.height,\n        depthOrArrayLayers: 1\n      });\n    }\n    device.submitCommandEncoder(cmdEnc);\n\n    /* eslint-disable no-undef */\n    const cLoad = colorBuffer.mapAsync(GPUMapMode.READ);\n    if (model.captureZValues) {\n      const zLoad = zbuffer.mapAsync(GPUMapMode.READ);\n      await Promise.all([cLoad, zLoad]);\n      result.depthValues = new Float32Array(zbuffer.getMappedRange().slice());\n      zbuffer.unmap();\n    } else {\n      await cLoad;\n    }\n    /* eslint-enable no-undef */\n\n    result.colorValues = new Uint32Array(colorBuffer.getMappedRange().slice());\n    colorBuffer.unmap();\n    result.generateSelection = (fx1, fy1, fx2, fy2) => generateSelectionWithData(result, fx1, fy1, fx2, fy2);\n    return result;\n  };\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  // WebGPURenderWindow: null,\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Build VTK API\n  vtkHardwareSelector.extend(publicAPI, model, initialValues);\n  model._selectionPass = vtkWebGPUHardwareSelectionPass.newInstance();\n  macro.setGet(publicAPI, model, ['_WebGPURenderWindow']);\n  macro.moveToProtected(publicAPI, model, ['WebGPURenderWindow']);\n\n  // Object methods\n  vtkWebGPUHardwareSelector(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPUHardwareSelector');\n\n// ----------------------------------------------------------------------------\n\nvar vtkWebGPUHardwareSelector$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkWebGPUHardwareSelector$1 as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport { registerViewConstructor } from '../Core/RenderWindow.js';\nimport vtkForwardPass from './ForwardPass.js';\nimport vtkWebGPUBuffer from './Buffer.js';\nimport vtkWebGPUDevice from './Device.js';\nimport vtkWebGPUHardwareSelector from './HardwareSelector.js';\nimport vtkWebGPUViewNodeFactory, { registerOverride } from './ViewNodeFactory.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nimport vtkRenderWindowViewNode from '../SceneGraph/RenderWindowViewNode.js';\nimport HalfFloat from '../../Common/Core/HalfFloat.js';\n\nconst {\n  vtkErrorMacro\n} = macro;\n// const IS_CHROME = navigator.userAgent.indexOf('Chrome') !== -1;\nconst SCREENSHOT_PLACEHOLDER = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%'\n};\n\n// ----------------------------------------------------------------------------\n// vtkWebGPURenderWindow methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPURenderWindow(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPURenderWindow');\n  publicAPI.getViewNodeFactory = () => model.myFactory;\n\n  // Auto update style\n  const previousSize = [0, 0];\n  function updateWindow() {\n    // Canvas size\n    if (model.renderable) {\n      if (model.size[0] !== previousSize[0] || model.size[1] !== previousSize[1]) {\n        previousSize[0] = model.size[0];\n        previousSize[1] = model.size[1];\n        model.canvas.setAttribute('width', model.size[0]);\n        model.canvas.setAttribute('height', model.size[1]);\n        publicAPI.recreateSwapChain();\n      }\n    }\n\n    // ImageStream size\n    if (model.viewStream) {\n      // If same size that's a NoOp\n      model.viewStream.setSize(model.size[0], model.size[1]);\n    }\n\n    // Offscreen ?\n    model.canvas.style.display = model.useOffScreen ? 'none' : 'block';\n\n    // Cursor type\n    if (model.el) {\n      model.el.style.cursor = model.cursorVisibility ? model.cursor : 'none';\n    }\n\n    // Invalidate cached DOM container size\n    model.containerSize = null;\n  }\n  publicAPI.onModified(updateWindow);\n  publicAPI.recreateSwapChain = () => {\n    if (model.context) {\n      model.context.unconfigure();\n      model.presentationFormat = navigator.gpu.getPreferredCanvasFormat(model.adapter);\n\n      /* eslint-disable no-undef */\n      /* eslint-disable no-bitwise */\n      model.context.configure({\n        device: model.device.getHandle(),\n        format: model.presentationFormat,\n        alphaMode: 'premultiplied',\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST,\n        width: model.size[0],\n        height: model.size[1]\n      });\n      model._configured = true;\n    }\n  };\n  publicAPI.getCurrentTexture = () => model.context.getCurrentTexture();\n\n  // Builds myself.\n  publicAPI.buildPass = prepass => {\n    if (prepass) {\n      if (!model.renderable) {\n        return;\n      }\n      publicAPI.prepareNodes();\n      publicAPI.addMissingNodes(model.renderable.getRenderersByReference());\n      publicAPI.removeUnusedNodes();\n      publicAPI.initialize();\n    } else if (model.initialized) {\n      if (!model._configured) {\n        publicAPI.recreateSwapChain();\n      }\n      model.commandEncoder = model.device.createCommandEncoder();\n    }\n  };\n\n  // publicAPI.traverseRenderers = (renPass) => {\n  //   // iterate over renderers\n  //   const numlayers = publicAPI.getRenderable().getNumberOfLayers();\n  //   const renderers = publicAPI.getChildren();\n  //   for (let i = 0; i < numlayers; i++) {\n  //     for (let index = 0; index < renderers.length; index++) {\n  //       const renNode = renderers[index];\n  //       const ren = publicAPI.getRenderable().getRenderers()[index];\n  //       if (ren.getDraw() && ren.getLayer() === i) {\n  //         renNode.traverse(renPass);\n  //       }\n  //     }\n  //   }\n  // };\n\n  publicAPI.initialize = () => {\n    if (!model.initializing) {\n      model.initializing = true;\n      if (!navigator.gpu) {\n        vtkErrorMacro('WebGPU is not enabled.');\n        return;\n      }\n      publicAPI.create3DContextAsync().then(() => {\n        model.initialized = true;\n        if (model.deleted) {\n          return;\n        }\n        publicAPI.invokeInitialized();\n      });\n    }\n  };\n  publicAPI.setContainer = el => {\n    if (model.el && model.el !== el) {\n      if (model.canvas.parentNode !== model.el) {\n        vtkErrorMacro('Error: canvas parent node does not match container');\n      }\n\n      // Remove canvas from previous container\n      model.el.removeChild(model.canvas);\n\n      // If the renderer has previously added\n      // a background image, remove it from the DOM.\n      if (model.el.contains(model.bgImage)) {\n        model.el.removeChild(model.bgImage);\n      }\n    }\n    if (model.el !== el) {\n      model.el = el;\n      if (model.el) {\n        model.el.appendChild(model.canvas);\n\n        // If the renderer is set to use a background\n        // image, attach it to the DOM.\n        if (model.useBackgroundImage) {\n          model.el.appendChild(model.bgImage);\n        }\n      }\n\n      // Trigger modified()\n      publicAPI.modified();\n    }\n  };\n  publicAPI.getContainer = () => model.el;\n  publicAPI.getContainerSize = () => {\n    if (!model.containerSize && model.el) {\n      const {\n        width,\n        height\n      } = model.el.getBoundingClientRect();\n      model.containerSize = [width, height];\n    }\n    return model.containerSize || model.size;\n  };\n  publicAPI.getFramebufferSize = () => model.size;\n  publicAPI.create3DContextAsync = async () => {\n    // Get a GPU device to render with\n    model.adapter = await navigator.gpu.requestAdapter({\n      powerPreference: 'high-performance'\n    });\n    if (model.deleted) {\n      return;\n    }\n    // console.log([...model.adapter.features]);\n    model.device = vtkWebGPUDevice.newInstance();\n    model.device.initialize(await model.adapter.requestDevice());\n    if (model.deleted) {\n      model.device = null;\n      return;\n    }\n    // model.device.getHandle().lost.then((info) => {\n    //   console.log(`${info.message}`);\n    //   publicAPI.releaseGraphicsResources();\n    // });\n    model.context = model.canvas.getContext('webgpu');\n  };\n  publicAPI.releaseGraphicsResources = () => {\n    const rp = vtkRenderPass.newInstance();\n    rp.setCurrentOperation('Release');\n    rp.traverse(publicAPI, null);\n    model.adapter = null;\n    model.device = null;\n    model.context = null;\n    model.initialized = false;\n    model.initializing = false;\n  };\n  publicAPI.setBackgroundImage = img => {\n    model.bgImage.src = img.src;\n  };\n  publicAPI.setUseBackgroundImage = value => {\n    model.useBackgroundImage = value;\n\n    // Add or remove the background image from the\n    // DOM as specified.\n    if (model.useBackgroundImage && !model.el.contains(model.bgImage)) {\n      model.el.appendChild(model.bgImage);\n    } else if (!model.useBackgroundImage && model.el.contains(model.bgImage)) {\n      model.el.removeChild(model.bgImage);\n    }\n  };\n  async function getCanvasDataURL() {\n    let format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : model.imageFormat;\n    // Copy current canvas to not modify the original\n    const temporaryCanvas = document.createElement('canvas');\n    const temporaryContext = temporaryCanvas.getContext('2d');\n    temporaryCanvas.width = model.canvas.width;\n    temporaryCanvas.height = model.canvas.height;\n    const result = await publicAPI.getPixelsAsync();\n    const imageData = new ImageData(result.colorValues, result.width, result.height);\n    // temporaryCanvas.putImageData(imageData, 0, 0);\n    temporaryContext.putImageData(imageData, 0, 0);\n\n    // Get current client rect to place canvas\n    const mainBoundingClientRect = model.canvas.getBoundingClientRect();\n    const renderWindow = model.renderable;\n    const renderers = renderWindow.getRenderers();\n    renderers.forEach(renderer => {\n      const viewProps = renderer.getViewProps();\n      viewProps.forEach(viewProp => {\n        // Check if the prop has a container that should have canvas\n        if (viewProp.getContainer) {\n          const container = viewProp.getContainer();\n          const canvasList = container.getElementsByTagName('canvas');\n          // Go throughout all canvas and copy it into temporary main canvas\n          for (let i = 0; i < canvasList.length; i++) {\n            const currentCanvas = canvasList[i];\n            const boundingClientRect = currentCanvas.getBoundingClientRect();\n            const newXPosition = boundingClientRect.x - mainBoundingClientRect.x;\n            const newYPosition = boundingClientRect.y - mainBoundingClientRect.y;\n            temporaryContext.drawImage(currentCanvas, newXPosition, newYPosition);\n          }\n        }\n      });\n    });\n    const screenshot = temporaryCanvas.toDataURL(format);\n    temporaryCanvas.remove();\n    publicAPI.invokeImageReady(screenshot);\n  }\n  publicAPI.captureNextImage = function () {\n    let format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'image/png';\n    let {\n      resetCamera = false,\n      size = null,\n      scale = 1\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (model.deleted) {\n      return null;\n    }\n    model.imageFormat = format;\n    const previous = model.notifyStartCaptureImage;\n    model.notifyStartCaptureImage = true;\n    model._screenshot = {\n      size: !!size || scale !== 1 ? size || model.size.map(val => val * scale) : null\n    };\n    return new Promise((resolve, reject) => {\n      const subscription = publicAPI.onImageReady(imageURL => {\n        if (model._screenshot.size === null) {\n          model.notifyStartCaptureImage = previous;\n          subscription.unsubscribe();\n          if (model._screenshot.placeHolder) {\n            // resize the main canvas back to its original size and show it\n            model.size = model._screenshot.originalSize;\n\n            // process the resize\n            publicAPI.modified();\n\n            // restore the saved camera parameters, if applicable\n            if (model._screenshot.cameras) {\n              model._screenshot.cameras.forEach(_ref => {\n                let {\n                  restoreParamsFn,\n                  arg\n                } = _ref;\n                return restoreParamsFn(arg);\n              });\n            }\n\n            // Trigger a render at the original size\n            publicAPI.traverseAllPasses();\n\n            // Remove and clean up the placeholder, revealing the original\n            model.el.removeChild(model._screenshot.placeHolder);\n            model._screenshot.placeHolder.remove();\n            model._screenshot = null;\n          }\n          resolve(imageURL);\n        } else {\n          // Create a placeholder image overlay while we resize and render\n          const tmpImg = document.createElement('img');\n          tmpImg.style = SCREENSHOT_PLACEHOLDER;\n          tmpImg.src = imageURL;\n          model._screenshot.placeHolder = model.el.appendChild(tmpImg);\n\n          // hide the main canvas\n          model.canvas.style.display = 'none';\n\n          // remember the main canvas original size, then resize it\n          model._screenshot.originalSize = model.size;\n          model.size = model._screenshot.size;\n          model._screenshot.size = null;\n\n          // process the resize\n          publicAPI.modified();\n          if (resetCamera) {\n            const isUserResetCamera = resetCamera !== true;\n\n            // If resetCamera was requested, we first save camera parameters\n            // from all the renderers, so we can restore them later\n            model._screenshot.cameras = model.renderable.getRenderers().map(renderer => {\n              const camera = renderer.getActiveCamera();\n              const params = camera.get('focalPoint', 'position', 'parallelScale');\n              return {\n                resetCameraArgs: isUserResetCamera ? {\n                  renderer\n                } : undefined,\n                resetCameraFn: isUserResetCamera ? resetCamera : renderer.resetCamera,\n                restoreParamsFn: camera.set,\n                // \"clone\" the params so we don't keep refs to properties\n                arg: JSON.parse(JSON.stringify(params))\n              };\n            });\n\n            // Perform the resetCamera() on each renderer only after capturing\n            // the params from all active cameras, in case there happen to be\n            // linked cameras among the renderers.\n            model._screenshot.cameras.forEach(_ref2 => {\n              let {\n                resetCameraFn,\n                resetCameraArgs\n              } = _ref2;\n              return resetCameraFn(resetCameraArgs);\n            });\n          }\n\n          // Trigger a render at the custom size\n          publicAPI.traverseAllPasses();\n        }\n      });\n    });\n  };\n  publicAPI.traverseAllPasses = () => {\n    if (model.deleted) {\n      return;\n    }\n    // if we are not initialized then we call initialize\n    // which is async so we will not actually get a render\n    // so we queue up another traverse for when we are initialized\n    if (!model.initialized) {\n      publicAPI.initialize();\n      const subscription = publicAPI.onInitialized(() => {\n        subscription.unsubscribe();\n        publicAPI.traverseAllPasses();\n      });\n    } else {\n      if (model.renderPasses) {\n        for (let index = 0; index < model.renderPasses.length; ++index) {\n          model.renderPasses[index].traverse(publicAPI, null);\n        }\n      }\n      if (model.commandEncoder) {\n        model.device.submitCommandEncoder(model.commandEncoder);\n        model.commandEncoder = null;\n        if (model.notifyStartCaptureImage) {\n          model.device.onSubmittedWorkDone().then(() => {\n            getCanvasDataURL();\n          });\n        }\n      }\n    }\n  };\n  publicAPI.setViewStream = stream => {\n    if (model.viewStream === stream) {\n      return false;\n    }\n    if (model.subscription) {\n      model.subscription.unsubscribe();\n      model.subscription = null;\n    }\n    model.viewStream = stream;\n    if (model.viewStream) {\n      // Force background to be transparent + render\n      const mainRenderer = model.renderable.getRenderers()[0];\n      mainRenderer.getBackgroundByReference()[3] = 0;\n\n      // Enable display of the background image\n      publicAPI.setUseBackgroundImage(true);\n\n      // Bind to remote stream\n      model.subscription = model.viewStream.onImageReady(e => publicAPI.setBackgroundImage(e.image));\n      model.viewStream.setSize(model.size[0], model.size[1]);\n      model.viewStream.invalidateCache();\n      model.viewStream.render();\n      publicAPI.modified();\n    }\n    return true;\n  };\n  publicAPI.getUniquePropID = () => model.nextPropID++;\n  publicAPI.getPropFromID = id => {\n    for (let i = 0; i < model.children.length; i++) {\n      const res = model.children[i].getPropFromID(id);\n      if (res !== null) {\n        return res;\n      }\n    }\n    return null;\n  };\n  publicAPI.getPixelsAsync = async () => {\n    const device = model.device;\n    const texture = model.renderPasses[0].getOpaquePass().getColorTexture();\n\n    // as this is async we really don't want to store things in\n    // the class as multiple calls may start before resolving\n    // so anything specific to this request gets put into the\n    // result object (by value in most cases)\n    const result = {\n      width: texture.getWidth(),\n      height: texture.getHeight()\n    };\n\n    // must be a multiple of 256 bytes, so 32 texels with rgba16\n    result.colorBufferWidth = 32 * Math.floor((result.width + 31) / 32);\n    result.colorBufferSizeInBytes = result.colorBufferWidth * result.height * 8;\n    const colorBuffer = vtkWebGPUBuffer.newInstance();\n    colorBuffer.setDevice(device);\n    /* eslint-disable no-bitwise */\n    /* eslint-disable no-undef */\n    colorBuffer.create(result.colorBufferSizeInBytes, GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST);\n    /* eslint-enable no-bitwise */\n    /* eslint-enable no-undef */\n\n    const cmdEnc = model.device.createCommandEncoder();\n    cmdEnc.copyTextureToBuffer({\n      texture: texture.getHandle()\n    }, {\n      buffer: colorBuffer.getHandle(),\n      bytesPerRow: 8 * result.colorBufferWidth,\n      rowsPerImage: result.height\n    }, {\n      width: result.width,\n      height: result.height,\n      depthOrArrayLayers: 1\n    });\n    device.submitCommandEncoder(cmdEnc);\n\n    /* eslint-disable no-undef */\n    const cLoad = colorBuffer.mapAsync(GPUMapMode.READ);\n    await cLoad;\n    /* eslint-enable no-undef */\n\n    result.colorValues = new Uint16Array(colorBuffer.getMappedRange().slice());\n    colorBuffer.unmap();\n    // repack the array\n    const tmparray = new Uint8ClampedArray(result.height * result.width * 4);\n    for (let y = 0; y < result.height; y++) {\n      for (let x = 0; x < result.width; x++) {\n        const doffset = (y * result.width + x) * 4;\n        const soffset = (y * result.colorBufferWidth + x) * 4;\n        tmparray[doffset] = 255.0 * HalfFloat.fromHalf(result.colorValues[soffset]);\n        tmparray[doffset + 1] = 255.0 * HalfFloat.fromHalf(result.colorValues[soffset + 1]);\n        tmparray[doffset + 2] = 255.0 * HalfFloat.fromHalf(result.colorValues[soffset + 2]);\n        tmparray[doffset + 3] = 255.0 * HalfFloat.fromHalf(result.colorValues[soffset + 3]);\n      }\n    }\n    result.colorValues = tmparray;\n    return result;\n  };\n  publicAPI.createSelector = () => {\n    const ret = vtkWebGPUHardwareSelector.newInstance();\n    ret.setWebGPURenderWindow(publicAPI);\n    return ret;\n  };\n  const superSetSize = publicAPI.setSize;\n  publicAPI.setSize = (width, height) => {\n    const modified = superSetSize(width, height);\n    if (modified) {\n      publicAPI.invokeWindowResizeEvent({\n        width,\n        height\n      });\n    }\n    return modified;\n  };\n  publicAPI.delete = macro.chain(publicAPI.delete, publicAPI.setViewStream);\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  initialized: false,\n  context: null,\n  adapter: null,\n  device: null,\n  canvas: null,\n  cursorVisibility: true,\n  cursor: 'pointer',\n  containerSize: null,\n  renderPasses: [],\n  notifyStartCaptureImage: false,\n  imageFormat: 'image/png',\n  useOffScreen: false,\n  useBackgroundImage: false,\n  nextPropID: 1,\n  xrSupported: false,\n  presentationFormat: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Create internal instances\n  model.canvas = document.createElement('canvas');\n  model.canvas.style.width = '100%';\n\n  // Create internal bgImage\n  model.bgImage = new Image();\n  model.bgImage.style.position = 'absolute';\n  model.bgImage.style.left = '0';\n  model.bgImage.style.top = '0';\n  model.bgImage.style.width = '100%';\n  model.bgImage.style.height = '100%';\n  model.bgImage.style.zIndex = '-1';\n\n  // Inheritance\n  vtkRenderWindowViewNode.extend(publicAPI, model, initialValues);\n  model.myFactory = vtkWebGPUViewNodeFactory.newInstance();\n\n  // setup default forward pass rendering\n  model.renderPasses[0] = vtkForwardPass.newInstance();\n  if (!model.selector) {\n    model.selector = vtkWebGPUHardwareSelector.newInstance();\n    model.selector.setWebGPURenderWindow(publicAPI);\n  }\n  macro.event(publicAPI, model, 'imageReady');\n  macro.event(publicAPI, model, 'initialized');\n\n  // Build VTK API\n  macro.get(publicAPI, model, ['commandEncoder', 'device', 'presentationFormat', 'useBackgroundImage', 'xrSupported']);\n  macro.setGet(publicAPI, model, ['initialized', 'context', 'canvas', 'device', 'renderPasses', 'notifyStartCaptureImage', 'cursor', 'useOffScreen']);\n  macro.setGetArray(publicAPI, model, ['size'], 2);\n  macro.event(publicAPI, model, 'windowResizeEvent');\n\n  // Object methods\n  vtkWebGPURenderWindow(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend, 'vtkWebGPURenderWindow');\n\n// ----------------------------------------------------------------------------\n// Register API specific RenderWindow implementation\n// ----------------------------------------------------------------------------\n\nregisterViewConstructor('WebGPU', newInstance);\n\n// ----------------------------------------------------------------------------\n\nvar vtkRenderWindow = {\n  newInstance,\n  extend\n};\n\n// Register ourself to WebGPU backend if imported\nregisterOverride('vtkRenderWindow', newInstance);\n\nexport { vtkRenderWindow as default, extend, newInstance };\n", "import { m as macro } from '../../macros2.js';\nimport vtkRenderer from '../Core/Renderer.js';\nimport vtkRenderWindow from '../Core/RenderWindow.js';\nimport vtkRenderWindowInteractor from '../Core/RenderWindowInteractor.js';\nimport vtkInteractorStyleTrackballCamera from '../../Interaction/Style/InteractorStyleTrackballCamera.js';\nimport vtkURLExtract from '../../Common/Core/URLExtract.js';\nimport '../../Common/Core/Points.js';\nimport '../../Common/Core/DataArray.js';\nimport '../../Common/DataModel/PolyData.js';\nimport '../Core/Actor.js';\nimport '../Core/Mapper.js';\nimport '../OpenGL/RenderWindow.js';\nimport '../WebGPU/RenderWindow.js';\n\n// Process arguments from URL\nconst userParams = vtkURLExtract.extractURLParameters();\nfunction vtkGenericRenderWindow(publicAPI, model) {\n  // Capture resize trigger method to remove from publicAPI\n  const invokeResize = publicAPI.invokeResize;\n  delete publicAPI.invokeResize;\n\n  // VTK renderWindow/renderer\n  model.renderWindow = vtkRenderWindow.newInstance();\n  model.renderer = vtkRenderer.newInstance();\n  model.renderWindow.addRenderer(model.renderer);\n\n  // OpenGLRenderWindow\n  model._apiSpecificRenderWindow = model.renderWindow.newAPISpecificView(userParams.viewAPI ?? model.defaultViewAPI);\n  model.renderWindow.addView(model._apiSpecificRenderWindow);\n\n  // Interactor\n  model.interactor = vtkRenderWindowInteractor.newInstance();\n  model.interactor.setInteractorStyle(vtkInteractorStyleTrackballCamera.newInstance());\n  model.interactor.setView(model._apiSpecificRenderWindow);\n  model.interactor.initialize();\n\n  // Expose background\n  publicAPI.setBackground = model.renderer.setBackground;\n\n  // Update BG color\n  publicAPI.setBackground(...model.background);\n\n  // Handle window resize\n  publicAPI.resize = () => {\n    if (model.container) {\n      const dims = model.container.getBoundingClientRect();\n      const devicePixelRatio = window.devicePixelRatio || 1;\n      model._apiSpecificRenderWindow.setSize(Math.floor(dims.width * devicePixelRatio), Math.floor(dims.height * devicePixelRatio));\n      invokeResize();\n      model.renderWindow.render();\n    }\n  };\n\n  // Handle DOM container relocation\n  publicAPI.setContainer = el => {\n    if (model.container) {\n      model.interactor.unbindEvents(model.container);\n    }\n\n    // Switch container\n    model.container = el;\n    model._apiSpecificRenderWindow.setContainer(model.container);\n\n    // Bind to new container\n    if (model.container) {\n      model.interactor.bindEvents(model.container);\n    }\n  };\n\n  // Properly release GL context\n  publicAPI.delete = macro.chain(publicAPI.setContainer, model._apiSpecificRenderWindow.delete, () => {\n    window.removeEventListener('resize', publicAPI.resize);\n  }, publicAPI.delete);\n\n  // Handle size\n  if (model.listenWindowResize) {\n    window.addEventListener('resize', publicAPI.resize);\n  }\n  publicAPI.resize();\n}\n\n// ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nconst DEFAULT_VALUES = {\n  background: [0.32, 0.34, 0.43],\n  listenWindowResize: true,\n  container: null\n};\n\n// ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  let initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  // Object methods\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['renderWindow', 'renderer', '_apiSpecificRenderWindow', 'interactor', 'container']);\n  macro.moveToProtected(publicAPI, model, ['_apiSpecificRenderWindow']);\n  macro.event(publicAPI, model, 'resize');\n\n  // Object specific methods\n  vtkGenericRenderWindow(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\n\nconst newInstance = macro.newInstance(extend);\n\n// ----------------------------------------------------------------------------\n\nvar vtkGenericRenderWindow$1 = {\n  newInstance,\n  extend\n};\n\nexport { vtkGenericRenderWindow$1 as default, extend, newInstance };\n"],
  "mappings": "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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA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",
  "names": ["undefined", "hex", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "vtkDebugMacro", "vtkErrorMacro", "notImplemented", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "Device", "Input", "Constants", "vtkWarningMacro", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "States", "DEFAULT_VALUES", "extend", "newInstance", "States", "DEFAULT_VALUES", "extend", "newInstance", "convert", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "SelectionContent", "SelectionField", "FieldAssociations", "vtkErrorMacro", "info", "DEFAULT_VALUES", "extend", "newInstance", "vtkHardwareSelector", "Md5", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "vtkDebugMacro", "vtkErrorMacro", "vtkHardwareSelector", "DEFAULT_VALUES", "extend", "newInstance", "vtkRenderWindow", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "oitpFragTemplate", "DEFAULT_VALUES", "extend", "newInstance", "Constants", "DEFAULT_VALUES", "extend", "newInstance", "Representation", "DEFAULT_VALUES", "extend", "newInstance", "vtkForwardPass", "DEFAULT_VALUES", "extend", "newInstance", "vtkForwardPass$1", "VtkDataTypes", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "DEFAULT_VALUES", "extend", "newInstance", "SelectionContent", "SelectionField", "FieldAssociations", "vtkErrorMacro", "getInfoHash", "convert", "getPixelInformationWithData", "info", "convertSelection", "generateSelectionWithData", "DEFAULT_VALUES", "extend", "newInstance", "vtkErrorMacro", "SCREENSHOT_PLACEHOLDER", "DEFAULT_VALUES", "extend", "vtkForwardPass$1", "newInstance", "vtkRenderWindow", "registerOverride", "DEFAULT_VALUES", "extend", "newInstance"]
}
